
-----------
QUERY:
--
-- ARRAYS
--

-- directory paths are passed to us in environment variables
-- \getenv abs_srcdir PG_ABS_SRCDIR

CREATE TABLE arrtest (
	a 			int2[],
	b 			int4[][][],
	c 			name[],
	d			text[][],
	e 			float8[],
	f			char(5)[],
	g			varchar(5)[]
);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[],\n\tb \t\t\tint4[][][],\n\tc \t\t\tname[],\n\td\t\t\ttext[][],\n\te \t\t\tfloat8[],\n\tf\t\t\tchar(5)[' at line 9")

-----------
QUERY:


CREATE TABLE array_op_test (
	seqno		int4,
	i			int4[],
	t			text[]
);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[],\n\tt\t\t\ttext[]\n)' at line 3")

-----------
QUERY:


-- \set filename /* REPLACED */ PG_ABS_SRCDIR '/data/array.data'
COPY array_op_test FROM /* REPLACED */ PG_ABS_SRCDIR '/data/array.data';
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'COPY array_op_test FROM /* REPLACED */  '/home/keuscha/Documents/FS2024/AST/proj' at line 2")

-----------
QUERY:

ANALYZE array_op_test;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'array_op_test' at line 1")

-----------
QUERY:


--
-- only the /* REPLACED */ ''e/* REPLACED */ '' array is 0-based, the others are 1-based.
--

INSERT INTO arrtest (a[1:5], b[1:1][1:2][1:2], c, d, f, g)
   VALUES ('{1,2,3,4,5}', '{{{0,0},{1,2}}}', '{}', '{}', '{}', '{}');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[1:5], b[1:1][1:2][1:2], c, d, f, g)\n   VALUES ('{1,2,3,4,5}', '{{{0,0},{1,2}}}'' at line 5")

-----------
QUERY:


UPDATE arrtest SET e[0] = '1.1';
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[0] = '1.1'' at line 1")

-----------
QUERY:


UPDATE arrtest SET e[1] = '2.2';
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[1] = '2.2'' at line 1")

-----------
QUERY:


INSERT INTO arrtest (f)
   VALUES ('{"too long"}');
RESULT:
	ERROR - (1146, "Table 'test.arrtest' doesn't exist")

-----------
QUERY:


INSERT INTO arrtest (a, b[1:2][1:2], c, d, e, f, g)
   VALUES ('{11,12,23}', '{{3,4},{4,5}}', '{"foobar"}',
           '{{"elt1", "elt2"}}', '{"3.4", "6.7"}',
           '{"abc","abcde"}', '{"abc","abcde"}');
RESULT:
	ERROR - (1064, 'You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near \'[1:2][1:2], c, d, e, f, g)\n   VALUES (\'{11,12,23}\', \'{{3,4},{4,5}}\', \'{"foobar"}\' at line 1')

-----------
QUERY:


INSERT INTO arrtest (a, b[1:2], c, d[1:2])
   VALUES ('{}', '{3,4}', '{foo,bar}', '{bar,foo}');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[1:2], c, d[1:2])\n   VALUES ('{}', '{3,4}', '{foo,bar}', '{bar,foo}')' at line 1")

-----------
QUERY:


INSERT INTO arrtest (b[2]) VALUES(now());
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[2]) VALUES(now())' at line 1")

-----------
QUERY:
  -- error, type mismatch

INSERT INTO arrtest (b[1:2]) VALUES(now());
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[1:2]) VALUES(now())' at line 3")

-----------
QUERY:
  -- error, type mismatch

SELECT * FROM arrtest;
RESULT:
	ERROR - (1146, "Table 'test.arrtest' doesn't exist")

-----------
QUERY:


SELECT arrtest.a[1],
          arrtest.b[1][1][1],
          arrtest.c[1],
          arrtest.d[1][1],
          arrtest.e[0]
   FROM arrtest;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[1],\n          arrtest.b[1][1][1],\n          arrtest.c[1],\n          arrtest.d[1' at line 1")

-----------
QUERY:


SELECT a[1], b[1][1][1], c[1], d[1][1], e[0]
   FROM arrtest;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[1], b[1][1][1], c[1], d[1][1], e[0]\n   FROM arrtest' at line 1")

-----------
QUERY:


SELECT a[1:3],
          b[1:1][1:2][1:2],
          c[1:2],
          d[1:1][1:2]
   FROM arrtest;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[1:3],\n          b[1:1][1:2][1:2],\n          c[1:2],\n          d[1:1][1:2]\n   FR' at line 1")

-----------
QUERY:


SELECT array_ndims(a) AS a,array_ndims(b) AS b,array_ndims(c) AS c
   FROM arrtest;
RESULT:
	ERROR - (1146, "Table 'test.arrtest' doesn't exist")

-----------
QUERY:


SELECT array_dims(a) AS a,array_dims(b) AS b,array_dims(c) AS c
   FROM arrtest;
RESULT:
	ERROR - (1146, "Table 'test.arrtest' doesn't exist")

-----------
QUERY:


-- returns nothing
SELECT *
   FROM arrtest
   WHERE a[1] < 5 and
         c = '{"foobar"}'::_name;
RESULT:
	ERROR - (1064, 'You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near \'[1] < 5 and\n         c = \'{"foobar"}\'::_name\' at line 4')

-----------
QUERY:


UPDATE arrtest
  SET a[1:2] = '{16,25}'
  WHERE NOT a = '{}'::_int2;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[1:2] = '{16,25}'\n  WHERE NOT a = '{}'::_int2' at line 2")

-----------
QUERY:


UPDATE arrtest
  SET b[1:1][1:1][1:2] = '{113, 117}',
      b[1:1][1:2][2:2] = '{142, 147}'
  WHERE array_dims(b) = '[1:1][1:2][1:2]';
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[1:1][1:1][1:2] = '{113, 117}',\n      b[1:1][1:2][2:2] = '{142, 147}'\n  WHERE ar' at line 2")

-----------
QUERY:


UPDATE arrtest
  SET c[2:2] = '{"new_word"}'
  WHERE array_dims(c) is not null;
RESULT:
	ERROR - (1064, 'You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near \'[2:2] = \'{"new_word"}\'\n  WHERE array_dims(c) is not null\' at line 2')

-----------
QUERY:


SELECT a,b,c FROM arrtest;
RESULT:
	ERROR - (1146, "Table 'test.arrtest' doesn't exist")

-----------
QUERY:


SELECT a[1:3],
          b[1:1][1:2][1:2],
          c[1:2],
          d[1:1][2:2]
   FROM arrtest;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[1:3],\n          b[1:1][1:2][1:2],\n          c[1:2],\n          d[1:1][2:2]\n   FR' at line 1")

-----------
QUERY:


SELECT b[1:1][2][2],
       d[1:1][2]
   FROM arrtest;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[1:1][2][2],\n       d[1:1][2]\n   FROM arrtest' at line 1")

-----------
QUERY:


INSERT INTO arrtest(a) VALUES('{1,null,3}');
RESULT:
	ERROR - (1146, "Table 'test.arrtest' doesn't exist")

-----------
QUERY:

SELECT a FROM arrtest;
RESULT:
	ERROR - (1146, "Table 'test.arrtest' doesn't exist")

-----------
QUERY:

UPDATE arrtest SET a[4] = NULL WHERE a[2] IS NULL;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[4] = NULL WHERE a[2] IS NULL' at line 1")

-----------
QUERY:

SELECT a FROM arrtest WHERE a[2] IS NULL;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[2] IS NULL' at line 1")

-----------
QUERY:

DELETE FROM arrtest WHERE a[2] IS NULL AND b IS NULL;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[2] IS NULL AND b IS NULL' at line 1")

-----------
QUERY:

SELECT a,b,c FROM arrtest;
RESULT:
	ERROR - (1146, "Table 'test.arrtest' doesn't exist")

-----------
QUERY:


-- test non-error-throwing API
SELECT pg_input_is_valid('{1,2,3}', 'integer[]');
RESULT:
	ERROR - (1305, 'FUNCTION test.pg_input_is_valid does not exist')

-----------
QUERY:

SELECT pg_input_is_valid('{1,2', 'integer[]');
RESULT:
	ERROR - (1305, 'FUNCTION test.pg_input_is_valid does not exist')

-----------
QUERY:

SELECT pg_input_is_valid('{1,zed}', 'integer[]');
RESULT:
	ERROR - (1305, 'FUNCTION test.pg_input_is_valid does not exist')

-----------
QUERY:

SELECT * FROM pg_input_error_info('{1,zed}', 'integer[]');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '('{1,zed}', 'integer[]')' at line 1")

-----------
QUERY:


-- test mixed slice/scalar subscripting
select '{{1,2,3},{4,5,6},{7,8,9}}'::int[];
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::int[]' at line 2")

-----------
QUERY:

select ('{{1,2,3},{4,5,6},{7,8,9}}'::int[])[1:2][2];
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::int[])[1:2][2]' at line 1")

-----------
QUERY:

select '[0:2][0:2]={{1,2,3},{4,5,6},{7,8,9}}'::int[];
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::int[]' at line 1")

-----------
QUERY:

select ('[0:2][0:2]={{1,2,3},{4,5,6},{7,8,9}}'::int[])[1:2][2];
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::int[])[1:2][2]' at line 1")

-----------
QUERY:


--
-- check subscription corner cases
--
-- More subscripts than MAXDIM (6)
SELECT ('{}'::int[])[1][2][3][4][5][6][7];
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::int[])[1][2][3][4][5][6][7]' at line 5")

-----------
QUERY:

-- NULL index yields NULL when selecting
SELECT ('{{{1},{2},{3}},{{4},{5},{6}}}'::int[])[1][NULL][1];
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::int[])[1][NULL][1]' at line 2")

-----------
QUERY:

SELECT ('{{{1},{2},{3}},{{4},{5},{6}}}'::int[])[1][NULL:1][1];
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::int[])[1][NULL:1][1]' at line 1")

-----------
QUERY:

SELECT ('{{{1},{2},{3}},{{4},{5},{6}}}'::int[])[1][1:NULL][1];
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::int[])[1][1:NULL][1]' at line 1")

-----------
QUERY:

-- NULL index in assignment is an error
UPDATE arrtest
  SET c[NULL] = '{"can''t assign"}'
  WHERE array_dims(c) is not null;
RESULT:
	ERROR - (1064, 'You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near \'[NULL] = \'{"can\'\'t assign"}\'\n  WHERE array_dims(c) is not null\' at line 3')

-----------
QUERY:

UPDATE arrtest
  SET c[NULL:1] = '{"can''t assign"}'
  WHERE array_dims(c) is not null;
RESULT:
	ERROR - (1064, 'You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near \'[NULL:1] = \'{"can\'\'t assign"}\'\n  WHERE array_dims(c) is not null\' at line 2')

-----------
QUERY:

UPDATE arrtest
  SET c[1:NULL] = '{"can''t assign"}'
  WHERE array_dims(c) is not null;
RESULT:
	ERROR - (1064, 'You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near \'[1:NULL] = \'{"can\'\'t assign"}\'\n  WHERE array_dims(c) is not null\' at line 2')

-----------
QUERY:

-- Un-subscriptable type
SELECT (now())[1];
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[1]' at line 2")

-----------
QUERY:


-- test slices with empty lower and/or upper index
CREATE TEMP TABLE arrtest_s (
  a       int2[],
  b       int2[][]
);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'TEMP TABLE arrtest_s (\n  a       int2[],\n  b       int2[][]\n)' at line 2")

-----------
QUERY:

INSERT INTO arrtest_s VALUES ('{1,2,3,4,5}', '{{1,2,3}, {4,5,6}, {7,8,9}}');
RESULT:
	ERROR - (1146, "Table 'test.arrtest_s' doesn't exist")

-----------
QUERY:

INSERT INTO arrtest_s VALUES ('[0:4]={1,2,3,4,5}', '[0:2][0:2]={{1,2,3}, {4,5,6}, {7,8,9}}');
RESULT:
	ERROR - (1146, "Table 'test.arrtest_s' doesn't exist")

-----------
QUERY:


SELECT * FROM arrtest_s;
RESULT:
	ERROR - (1146, "Table 'test.arrtest_s' doesn't exist")

-----------
QUERY:

SELECT a[:3], b[:2][:2] FROM arrtest_s;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[:3], b[:2][:2] FROM arrtest_s' at line 1")

-----------
QUERY:

SELECT a[2:], b[2:][2:] FROM arrtest_s;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[2:], b[2:][2:] FROM arrtest_s' at line 1")

-----------
QUERY:

SELECT a[:], b[:] FROM arrtest_s;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[:], b[:] FROM arrtest_s' at line 1")

-----------
QUERY:


-- updates
UPDATE arrtest_s SET a[:3] = '{11, 12, 13}', b[:2][:2] = '{{11,12}, {14,15}}'
  WHERE array_lower(a,1) = 1;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[:3] = '{11, 12, 13}', b[:2][:2] = '{{11,12}, {14,15}}'\n  WHERE array_lower(a,1)' at line 2")

-----------
QUERY:

SELECT * FROM arrtest_s;
RESULT:
	ERROR - (1146, "Table 'test.arrtest_s' doesn't exist")

-----------
QUERY:

UPDATE arrtest_s SET a[3:] = '{23, 24, 25}', b[2:][2:] = '{{25,26}, {28,29}}';
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[3:] = '{23, 24, 25}', b[2:][2:] = '{{25,26}, {28,29}}'' at line 1")

-----------
QUERY:

SELECT * FROM arrtest_s;
RESULT:
	ERROR - (1146, "Table 'test.arrtest_s' doesn't exist")

-----------
QUERY:

UPDATE arrtest_s SET a[:] = '{11, 12, 13, 14, 15}';
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[:] = '{11, 12, 13, 14, 15}'' at line 1")

-----------
QUERY:

SELECT * FROM arrtest_s;
RESULT:
	ERROR - (1146, "Table 'test.arrtest_s' doesn't exist")

-----------
QUERY:

UPDATE arrtest_s SET a[:] = '{23, 24, 25}';
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[:] = '{23, 24, 25}'' at line 1")

-----------
QUERY:
  -- fail, too small
INSERT INTO arrtest_s VALUES(NULL, NULL);
RESULT:
	ERROR - (1146, "Table 'test.arrtest_s' doesn't exist")

-----------
QUERY:

UPDATE arrtest_s SET a[:] = '{11, 12, 13, 14, 15}';
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[:] = '{11, 12, 13, 14, 15}'' at line 1")

-----------
QUERY:
  -- fail, no good with null

-- we want to work with a point_tbl that includes a null
CREATE TEMP TABLE point_tbl AS SELECT * FROM public.point_tbl;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'TEMP TABLE point_tbl AS SELECT * FROM public.point_tbl' at line 4")

-----------
QUERY:

INSERT INTO POINT_TBL(f1) VALUES (NULL);
RESULT:
	[]

-----------
QUERY:


-- check with fixed-length-array type, such as point
SELECT f1[0:1] FROM POINT_TBL;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[0:1] FROM POINT_TBL' at line 2")

-----------
QUERY:

SELECT f1[0:] FROM POINT_TBL;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[0:] FROM POINT_TBL' at line 1")

-----------
QUERY:

SELECT f1[:1] FROM POINT_TBL;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[:1] FROM POINT_TBL' at line 1")

-----------
QUERY:

SELECT f1[:] FROM POINT_TBL;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[:] FROM POINT_TBL' at line 1")

-----------
QUERY:


-- subscript assignments to fixed-width result in NULL if previous value is NULL
UPDATE point_tbl SET f1[0] = 10 WHERE f1 IS NULL RETURNING *;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[0] = 10 WHERE f1 IS NULL RETURNING *' at line 2")

-----------
QUERY:

INSERT INTO point_tbl(f1[0]) VALUES(0) RETURNING *;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[0]) VALUES(0) RETURNING *' at line 1")

-----------
QUERY:

-- NULL assignments get ignored
UPDATE point_tbl SET f1[0] = NULL WHERE f1::text = '(10,10)'::point::text RETURNING *;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[0] = NULL WHERE f1::text = '(10,10)'::point::text RETURNING *' at line 2")

-----------
QUERY:

-- but non-NULL subscript assignments work
UPDATE point_tbl SET f1[0] = -10, f1[1] = -10 WHERE f1::text = '(10,10)'::point::text RETURNING *;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[0] = -10, f1[1] = -10 WHERE f1::text = '(10,10)'::point::text RETURNING *' at line 2")

-----------
QUERY:

-- but not to expand the range
UPDATE point_tbl SET f1[3] = 10 WHERE f1::text = '(-10,-10)'::point::text RETURNING *;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[3] = 10 WHERE f1::text = '(-10,-10)'::point::text RETURNING *' at line 2")

-----------
QUERY:


--
-- test array extension
--
CREATE TEMP TABLE arrtest1 (i int[], t text[]);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'TEMP TABLE arrtest1 (i int[], t text[])' at line 4")

-----------
QUERY:

insert into arrtest1 values(array[1,2,null,4], array['one','two',null,'four']);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[1,2,null,4], array['one','two',null,'four'])' at line 1")

-----------
QUERY:

select * from arrtest1;
RESULT:
	ERROR - (1146, "Table 'test.arrtest1' doesn't exist")

-----------
QUERY:

update arrtest1 set i[2] = 22, t[2] = 'twenty-two';
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[2] = 22, t[2] = 'twenty-two'' at line 1")

-----------
QUERY:

select * from arrtest1;
RESULT:
	ERROR - (1146, "Table 'test.arrtest1' doesn't exist")

-----------
QUERY:

update arrtest1 set i[5] = 5, t[5] = 'five';
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[5] = 5, t[5] = 'five'' at line 1")

-----------
QUERY:

select * from arrtest1;
RESULT:
	ERROR - (1146, "Table 'test.arrtest1' doesn't exist")

-----------
QUERY:

update arrtest1 set i[8] = 8, t[8] = 'eight';
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[8] = 8, t[8] = 'eight'' at line 1")

-----------
QUERY:

select * from arrtest1;
RESULT:
	ERROR - (1146, "Table 'test.arrtest1' doesn't exist")

-----------
QUERY:

update arrtest1 set i[0] = 0, t[0] = 'zero';
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[0] = 0, t[0] = 'zero'' at line 1")

-----------
QUERY:

select * from arrtest1;
RESULT:
	ERROR - (1146, "Table 'test.arrtest1' doesn't exist")

-----------
QUERY:

update arrtest1 set i[-3] = -3, t[-3] = 'minus-three';
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[-3] = -3, t[-3] = 'minus-three'' at line 1")

-----------
QUERY:

select * from arrtest1;
RESULT:
	ERROR - (1146, "Table 'test.arrtest1' doesn't exist")

-----------
QUERY:

update arrtest1 set i[0:2] = array[10,11,12], t[0:2] = array['ten','eleven','twelve'];
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[0:2] = array[10,11,12], t[0:2] = array['ten','eleven','twelve']' at line 1")

-----------
QUERY:

select * from arrtest1;
RESULT:
	ERROR - (1146, "Table 'test.arrtest1' doesn't exist")

-----------
QUERY:

update arrtest1 set i[8:10] = array[18,null,20], t[8:10] = array['p18',null,'p20'];
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[8:10] = array[18,null,20], t[8:10] = array['p18',null,'p20']' at line 1")

-----------
QUERY:

select * from arrtest1;
RESULT:
	ERROR - (1146, "Table 'test.arrtest1' doesn't exist")

-----------
QUERY:

update arrtest1 set i[11:12] = array[null,22], t[11:12] = array[null,'p22'];
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[11:12] = array[null,22], t[11:12] = array[null,'p22']' at line 1")

-----------
QUERY:

select * from arrtest1;
RESULT:
	ERROR - (1146, "Table 'test.arrtest1' doesn't exist")

-----------
QUERY:

update arrtest1 set i[15:16] = array[null,26], t[15:16] = array[null,'p26'];
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[15:16] = array[null,26], t[15:16] = array[null,'p26']' at line 1")

-----------
QUERY:

select * from arrtest1;
RESULT:
	ERROR - (1146, "Table 'test.arrtest1' doesn't exist")

-----------
QUERY:

update arrtest1 set i[-5:-3] = array[-15,-14,-13], t[-5:-3] = array['m15','m14','m13'];
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[-5:-3] = array[-15,-14,-13], t[-5:-3] = array['m15','m14','m13']' at line 1")

-----------
QUERY:

select * from arrtest1;
RESULT:
	ERROR - (1146, "Table 'test.arrtest1' doesn't exist")

-----------
QUERY:

update arrtest1 set i[-7:-6] = array[-17,null], t[-7:-6] = array['m17',null];
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[-7:-6] = array[-17,null], t[-7:-6] = array['m17',null]' at line 1")

-----------
QUERY:

select * from arrtest1;
RESULT:
	ERROR - (1146, "Table 'test.arrtest1' doesn't exist")

-----------
QUERY:

update arrtest1 set i[-12:-10] = array[-22,null,-20], t[-12:-10] = array['m22',null,'m20'];
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[-12:-10] = array[-22,null,-20], t[-12:-10] = array['m22',null,'m20']' at line 1")

-----------
QUERY:

select * from arrtest1;
RESULT:
	ERROR - (1146, "Table 'test.arrtest1' doesn't exist")

-----------
QUERY:

delete from arrtest1;
RESULT:
	ERROR - (1146, "Table 'test.arrtest1' doesn't exist")

-----------
QUERY:

insert into arrtest1 values(array[1,2,null,4], array['one','two',null,'four']);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[1,2,null,4], array['one','two',null,'four'])' at line 1")

-----------
QUERY:

select * from arrtest1;
RESULT:
	ERROR - (1146, "Table 'test.arrtest1' doesn't exist")

-----------
QUERY:

update arrtest1 set i[0:5] = array[0,1,2,null,4,5], t[0:5] = array['z','p1','p2',null,'p4','p5'];
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[0:5] = array[0,1,2,null,4,5], t[0:5] = array['z','p1','p2',null,'p4','p5']' at line 1")

-----------
QUERY:

select * from arrtest1;
RESULT:
	ERROR - (1146, "Table 'test.arrtest1' doesn't exist")

-----------
QUERY:


--
-- array expressions and operators
--

-- table creation and INSERTs
CREATE TEMP TABLE arrtest2 (i integer ARRAY[4], f float8[], n numeric[], t text[], d timestamp[]);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'TEMP TABLE arrtest2 (i integer ARRAY[4], f float8[], n numeric[], t text[], d ti' at line 6")

-----------
QUERY:

INSERT INTO arrtest2 VALUES(
  ARRAY[[[113,142],[1,147]]],
  ARRAY[1.1,1.2,1.3]::float8[],
  ARRAY[1.1,1.2,1.3],
  ARRAY[[['aaa','aab'],['aba','abb'],['aca','acb']],[['baa','bab'],['bba','bbb'],['bca','bcb']]],
  ARRAY['19620326','19931223','19970117']::timestamp[]
);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[[[113,142],[1,147]]],\n  ARRAY[1.1,1.2,1.3]::float8[],\n  ARRAY[1.1,1.2,1.3],\n  A' at line 2")

-----------
QUERY:


-- some more test data
CREATE TEMP TABLE arrtest_f (f0 int, f1 text, f2 float8);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'TEMP TABLE arrtest_f (f0 int, f1 text, f2 float8)' at line 2")

-----------
QUERY:

insert into arrtest_f values(1,'cat1',1.21);
RESULT:
	ERROR - (1146, "Table 'test.arrtest_f' doesn't exist")

-----------
QUERY:

insert into arrtest_f values(2,'cat1',1.24);
RESULT:
	ERROR - (1146, "Table 'test.arrtest_f' doesn't exist")

-----------
QUERY:

insert into arrtest_f values(3,'cat1',1.18);
RESULT:
	ERROR - (1146, "Table 'test.arrtest_f' doesn't exist")

-----------
QUERY:

insert into arrtest_f values(4,'cat1',1.26);
RESULT:
	ERROR - (1146, "Table 'test.arrtest_f' doesn't exist")

-----------
QUERY:

insert into arrtest_f values(5,'cat1',1.15);
RESULT:
	ERROR - (1146, "Table 'test.arrtest_f' doesn't exist")

-----------
QUERY:

insert into arrtest_f values(6,'cat2',1.15);
RESULT:
	ERROR - (1146, "Table 'test.arrtest_f' doesn't exist")

-----------
QUERY:

insert into arrtest_f values(7,'cat2',1.26);
RESULT:
	ERROR - (1146, "Table 'test.arrtest_f' doesn't exist")

-----------
QUERY:

insert into arrtest_f values(8,'cat2',1.32);
RESULT:
	ERROR - (1146, "Table 'test.arrtest_f' doesn't exist")

-----------
QUERY:

insert into arrtest_f values(9,'cat2',1.30);
RESULT:
	ERROR - (1146, "Table 'test.arrtest_f' doesn't exist")

-----------
QUERY:


CREATE TEMP TABLE arrtest_i (f0 int, f1 text, f2 int);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'TEMP TABLE arrtest_i (f0 int, f1 text, f2 int)' at line 1")

-----------
QUERY:

insert into arrtest_i values(1,'cat1',21);
RESULT:
	ERROR - (1146, "Table 'test.arrtest_i' doesn't exist")

-----------
QUERY:

insert into arrtest_i values(2,'cat1',24);
RESULT:
	ERROR - (1146, "Table 'test.arrtest_i' doesn't exist")

-----------
QUERY:

insert into arrtest_i values(3,'cat1',18);
RESULT:
	ERROR - (1146, "Table 'test.arrtest_i' doesn't exist")

-----------
QUERY:

insert into arrtest_i values(4,'cat1',26);
RESULT:
	ERROR - (1146, "Table 'test.arrtest_i' doesn't exist")

-----------
QUERY:

insert into arrtest_i values(5,'cat1',15);
RESULT:
	ERROR - (1146, "Table 'test.arrtest_i' doesn't exist")

-----------
QUERY:

insert into arrtest_i values(6,'cat2',15);
RESULT:
	ERROR - (1146, "Table 'test.arrtest_i' doesn't exist")

-----------
QUERY:

insert into arrtest_i values(7,'cat2',26);
RESULT:
	ERROR - (1146, "Table 'test.arrtest_i' doesn't exist")

-----------
QUERY:

insert into arrtest_i values(8,'cat2',32);
RESULT:
	ERROR - (1146, "Table 'test.arrtest_i' doesn't exist")

-----------
QUERY:

insert into arrtest_i values(9,'cat2',30);
RESULT:
	ERROR - (1146, "Table 'test.arrtest_i' doesn't exist")

-----------
QUERY:


-- expressions
SELECT t.f[1][3][1] AS "131", t.f[2][2][1] AS "221" FROM (
  SELECT ARRAY[[[111,112],[121,122],[131,132]],[[211,212],[221,122],[231,232]]] AS f
) AS t;
RESULT:
	ERROR - (1064, 'You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near \'[1][3][1] AS "131", t.f[2][2][1] AS "221" FROM (\n  SELECT ARRAY[[[111,112],[121,\' at line 2')

-----------
QUERY:

SELECT ARRAY[[[[[['hello'],['world']]]]]];
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[[[[[['hello'],['world']]]]]]' at line 1")

-----------
QUERY:

SELECT ARRAY[ARRAY['hello'],ARRAY['world']];
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[ARRAY['hello'],ARRAY['world']]' at line 1")

-----------
QUERY:

SELECT ARRAY(select f2 from arrtest_f order by f2) AS "ARRAY";
RESULT:
	ERROR - (1064, 'You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near \'(select f2 from arrtest_f order by f2) AS "ARRAY"\' at line 1')

-----------
QUERY:


-- with nulls
SELECT '{1,null,3}'::int[];
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::int[]' at line 2")

-----------
QUERY:

SELECT ARRAY[1,NULL,3];
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[1,NULL,3]' at line 1")

-----------
QUERY:


-- functions
SELECT array_append(array[42], 6) AS "{42,6}";
RESULT:
	ERROR - (1064, 'You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near \'[42], 6) AS "{42,6}"\' at line 2')

-----------
QUERY:

SELECT array_prepend(6, array[42]) AS "{6,42}";
RESULT:
	ERROR - (1064, 'You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near \'[42]) AS "{6,42}"\' at line 1')

-----------
QUERY:

SELECT array_cat(ARRAY[1,2], ARRAY[3,4]) AS "{1,2,3,4}";
RESULT:
	ERROR - (1064, 'You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near \'[1,2], ARRAY[3,4]) AS "{1,2,3,4}"\' at line 1')

-----------
QUERY:

SELECT array_cat(ARRAY[1,2], ARRAY[[3,4],[5,6]]) AS "{{1,2},{3,4},{5,6}}";
RESULT:
	ERROR - (1064, 'You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near \'[1,2], ARRAY[[3,4],[5,6]]) AS "{{1,2},{3,4},{5,6}}"\' at line 1')

-----------
QUERY:

SELECT array_cat(ARRAY[[3,4],[5,6]], ARRAY[1,2]) AS "{{3,4},{5,6},{1,2}}";
RESULT:
	ERROR - (1064, 'You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near \'[[3,4],[5,6]], ARRAY[1,2]) AS "{{3,4},{5,6},{1,2}}"\' at line 1')

-----------
QUERY:


SELECT array_position(ARRAY[1,2,3,4,5], 4);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[1,2,3,4,5], 4)' at line 1")

-----------
QUERY:

SELECT array_position(ARRAY[5,3,4,2,1], 4);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[5,3,4,2,1], 4)' at line 1")

-----------
QUERY:

SELECT array_position(ARRAY[[1,2],[3,4]], 3);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[[1,2],[3,4]], 3)' at line 1")

-----------
QUERY:

SELECT array_position(ARRAY['sun','mon','tue','wed','thu','fri','sat'], 'mon');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '['sun','mon','tue','wed','thu','fri','sat'], 'mon')' at line 1")

-----------
QUERY:

SELECT array_position(ARRAY['sun','mon','tue','wed','thu','fri','sat'], 'sat');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '['sun','mon','tue','wed','thu','fri','sat'], 'sat')' at line 1")

-----------
QUERY:

SELECT array_position(ARRAY['sun','mon','tue','wed','thu','fri','sat'], NULL);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '['sun','mon','tue','wed','thu','fri','sat'], NULL)' at line 1")

-----------
QUERY:

SELECT array_position(ARRAY['sun','mon','tue','wed','thu',NULL,'fri','sat'], NULL);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '['sun','mon','tue','wed','thu',NULL,'fri','sat'], NULL)' at line 1")

-----------
QUERY:

SELECT array_position(ARRAY['sun','mon','tue','wed','thu',NULL,'fri','sat'], 'sat');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '['sun','mon','tue','wed','thu',NULL,'fri','sat'], 'sat')' at line 1")

-----------
QUERY:


SELECT array_positions(NULL, 10);
RESULT:
	ERROR - (1305, 'FUNCTION test.array_positions does not exist')

-----------
QUERY:

SELECT array_positions(NULL, NULL::int);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::int)' at line 1")

-----------
QUERY:

SELECT array_positions(ARRAY[1,2,3,4,5,6,1,2,3,4,5,6], 4);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[1,2,3,4,5,6,1,2,3,4,5,6], 4)' at line 1")

-----------
QUERY:

SELECT array_positions(ARRAY[[1,2],[3,4]], 4);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[[1,2],[3,4]], 4)' at line 1")

-----------
QUERY:

SELECT array_positions(ARRAY[1,2,3,4,5,6,1,2,3,4,5,6], NULL);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[1,2,3,4,5,6,1,2,3,4,5,6], NULL)' at line 1")

-----------
QUERY:

SELECT array_positions(ARRAY[1,2,3,NULL,5,6,1,2,3,NULL,5,6], NULL);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[1,2,3,NULL,5,6,1,2,3,NULL,5,6], NULL)' at line 1")

-----------
QUERY:

SELECT array_length(array_positions(ARRAY(SELECT 'AAAAAAAAAAAAAAAAAAAAAAAAA'::text || i % 10
                                          FROM generate_series(1,100) g(i)),
                                  'AAAAAAAAAAAAAAAAAAAAAAAAA5'), 1);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(SELECT 'AAAAAAAAAAAAAAAAAAAAAAAAA'::text || i % 10\n                            ' at line 1")

-----------
QUERY:


DO $$
DECLARE
  o int;
  a int[] := ARRAY[1,2,3,2,3,1,2];
BEGIN
  o := array_position(a, 2);
  WHILE o IS NOT NULL
  LOOP
    RAISE NOTICE '%', o;
    o := array_position(a, 2, o + 1);
  END LOOP;
END
$$ LANGUAGE plpgsql;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'DECLARE\n  o int;\n  a int[] := ARRAY[1,2,3,2,3,1,2];\nBEGIN\n  o := array_position(' at line 2")

-----------
QUERY:


SELECT array_position('[2:4]={1,2,3}'::int[], 1);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::int[], 1)' at line 1")

-----------
QUERY:

SELECT array_positions('[2:4]={1,2,3}'::int[], 1);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::int[], 1)' at line 1")

-----------
QUERY:


SELECT
    array_position(ids, (1, 1)),
    array_positions(ids, (1, 1))
        FROM
(VALUES
    (ARRAY[(0, 0), (1, 1)]),
    (ARRAY[(1, 1)])
) AS f (ids);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(ARRAY[(0, 0), (1, 1)]),\n    (ARRAY[(1, 1)])\n) AS f (ids)' at line 6")

-----------
QUERY:


-- operators
SELECT a FROM arrtest WHERE b = ARRAY[[[113,142],[1,147]]];
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[[[113,142],[1,147]]]' at line 2")

-----------
QUERY:

SELECT NOT ARRAY[1.1,1.2,1.3] = ARRAY[1.1,1.2,1.3] AS "FALSE";
RESULT:
	ERROR - (1064, 'You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near \'[1.1,1.2,1.3] = ARRAY[1.1,1.2,1.3] AS "FALSE"\' at line 1')

-----------
QUERY:

SELECT ARRAY[1,2] || 3 AS "{1,2,3}";
RESULT:
	ERROR - (1064, 'You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near \'[1,2] || 3 AS "{1,2,3}"\' at line 1')

-----------
QUERY:

SELECT 0 || ARRAY[1,2] AS "{0,1,2}";
RESULT:
	ERROR - (1064, 'You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near \'[1,2] AS "{0,1,2}"\' at line 1')

-----------
QUERY:

SELECT ARRAY[1,2] || ARRAY[3,4] AS "{1,2,3,4}";
RESULT:
	ERROR - (1064, 'You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near \'[1,2] || ARRAY[3,4] AS "{1,2,3,4}"\' at line 1')

-----------
QUERY:

SELECT ARRAY[[['hello','world']]] || ARRAY[[['happy','birthday']]] AS "ARRAY";
RESULT:
	ERROR - (1064, 'You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near \'[[[\'hello\',\'world\']]] || ARRAY[[[\'happy\',\'birthday\']]] AS "ARRAY"\' at line 1')

-----------
QUERY:

SELECT ARRAY[[1,2],[3,4]] || ARRAY[5,6] AS "{{1,2},{3,4},{5,6}}";
RESULT:
	ERROR - (1064, 'You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near \'[[1,2],[3,4]] || ARRAY[5,6] AS "{{1,2},{3,4},{5,6}}"\' at line 1')

-----------
QUERY:

SELECT ARRAY[0,0] || ARRAY[1,1] || ARRAY[2,2] AS "{0,0,1,1,2,2}";
RESULT:
	ERROR - (1064, 'You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near \'[0,0] || ARRAY[1,1] || ARRAY[2,2] AS "{0,0,1,1,2,2}"\' at line 1')

-----------
QUERY:

SELECT 0 || ARRAY[1,2] || 3 AS "{0,1,2,3}";
RESULT:
	ERROR - (1064, 'You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near \'[1,2] || 3 AS "{0,1,2,3}"\' at line 1')

-----------
QUERY:

SELECT ARRAY[1.1] || ARRAY[2,3,4];
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[1.1] || ARRAY[2,3,4]' at line 1")

-----------
QUERY:

SELECT array_agg(x) || array_agg(x) FROM (VALUES (ROW(1,2)), (ROW(3,4))) v(x);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(ROW(1,2)), (ROW(3,4))) v(x)' at line 1")

-----------
QUERY:

SELECT ROW(1,2) || array_agg(x) FROM (VALUES (ROW(3,4)), (ROW(5,6))) v(x);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(ROW(3,4)), (ROW(5,6))) v(x)' at line 1")

-----------
QUERY:


SELECT * FROM array_op_test WHERE i @> '{32}' ORDER BY seqno;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '@> '{32}' ORDER BY seqno' at line 1")

-----------
QUERY:

SELECT * FROM array_op_test WHERE i && '{32}' ORDER BY seqno;
RESULT:
	ERROR - (1146, "Table 'test.array_op_test' doesn't exist")

-----------
QUERY:

SELECT * FROM array_op_test WHERE i @> '{17}' ORDER BY seqno;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '@> '{17}' ORDER BY seqno' at line 1")

-----------
QUERY:

SELECT * FROM array_op_test WHERE i && '{17}' ORDER BY seqno;
RESULT:
	ERROR - (1146, "Table 'test.array_op_test' doesn't exist")

-----------
QUERY:

SELECT * FROM array_op_test WHERE i @> '{32,17}' ORDER BY seqno;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '@> '{32,17}' ORDER BY seqno' at line 1")

-----------
QUERY:

SELECT * FROM array_op_test WHERE i && '{32,17}' ORDER BY seqno;
RESULT:
	ERROR - (1146, "Table 'test.array_op_test' doesn't exist")

-----------
QUERY:

SELECT * FROM array_op_test WHERE i <@ '{38,34,32,89}' ORDER BY seqno;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ''{38,34,32,89}' ORDER BY seqno' at line 1")

-----------
QUERY:

SELECT * FROM array_op_test WHERE i = '{}' ORDER BY seqno;
RESULT:
	ERROR - (1146, "Table 'test.array_op_test' doesn't exist")

-----------
QUERY:

SELECT * FROM array_op_test WHERE i @> '{}' ORDER BY seqno;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '@> '{}' ORDER BY seqno' at line 1")

-----------
QUERY:

SELECT * FROM array_op_test WHERE i && '{}' ORDER BY seqno;
RESULT:
	ERROR - (1146, "Table 'test.array_op_test' doesn't exist")

-----------
QUERY:

SELECT * FROM array_op_test WHERE i <@ '{}' ORDER BY seqno;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ''{}' ORDER BY seqno' at line 1")

-----------
QUERY:

SELECT * FROM array_op_test WHERE i = '{NULL}' ORDER BY seqno;
RESULT:
	ERROR - (1146, "Table 'test.array_op_test' doesn't exist")

-----------
QUERY:

SELECT * FROM array_op_test WHERE i @> '{NULL}' ORDER BY seqno;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '@> '{NULL}' ORDER BY seqno' at line 1")

-----------
QUERY:

SELECT * FROM array_op_test WHERE i && '{NULL}' ORDER BY seqno;
RESULT:
	ERROR - (1146, "Table 'test.array_op_test' doesn't exist")

-----------
QUERY:

SELECT * FROM array_op_test WHERE i <@ '{NULL}' ORDER BY seqno;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ''{NULL}' ORDER BY seqno' at line 1")

-----------
QUERY:


SELECT * FROM array_op_test WHERE t @> '{AAAAAAAA72908}' ORDER BY seqno;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '@> '{AAAAAAAA72908}' ORDER BY seqno' at line 1")

-----------
QUERY:

SELECT * FROM array_op_test WHERE t && '{AAAAAAAA72908}' ORDER BY seqno;
RESULT:
	ERROR - (1146, "Table 'test.array_op_test' doesn't exist")

-----------
QUERY:

SELECT * FROM array_op_test WHERE t @> '{AAAAAAAAAA646}' ORDER BY seqno;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '@> '{AAAAAAAAAA646}' ORDER BY seqno' at line 1")

-----------
QUERY:

SELECT * FROM array_op_test WHERE t && '{AAAAAAAAAA646}' ORDER BY seqno;
RESULT:
	ERROR - (1146, "Table 'test.array_op_test' doesn't exist")

-----------
QUERY:

SELECT * FROM array_op_test WHERE t @> '{AAAAAAAA72908,AAAAAAAAAA646}' ORDER BY seqno;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '@> '{AAAAAAAA72908,AAAAAAAAAA646}' ORDER BY seqno' at line 1")

-----------
QUERY:

SELECT * FROM array_op_test WHERE t && '{AAAAAAAA72908,AAAAAAAAAA646}' ORDER BY seqno;
RESULT:
	ERROR - (1146, "Table 'test.array_op_test' doesn't exist")

-----------
QUERY:

SELECT * FROM array_op_test WHERE t <@ '{AAAAAAAA72908,AAAAAAAAAAAAAAAAAAA17075,AA88409,AAAAAAAAAAAAAAAAAA36842,AAAAAAA48038,AAAAAAAAAAAAAA10611}' ORDER BY seqno;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ''{AAAAAAAA72908,AAAAAAAAAAAAAAAAAAA17075,AA88409,AAAAAAAAAAAAAAAAAA36842,AAAAAAA' at line 1")

-----------
QUERY:

SELECT * FROM array_op_test WHERE t = '{}' ORDER BY seqno;
RESULT:
	ERROR - (1146, "Table 'test.array_op_test' doesn't exist")

-----------
QUERY:

SELECT * FROM array_op_test WHERE t @> '{}' ORDER BY seqno;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '@> '{}' ORDER BY seqno' at line 1")

-----------
QUERY:

SELECT * FROM array_op_test WHERE t && '{}' ORDER BY seqno;
RESULT:
	ERROR - (1146, "Table 'test.array_op_test' doesn't exist")

-----------
QUERY:

SELECT * FROM array_op_test WHERE t <@ '{}' ORDER BY seqno;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ''{}' ORDER BY seqno' at line 1")

-----------
QUERY:


-- array casts
SELECT ARRAY[1,2,3]::text[]::int[]::float8[] AS "{1,2,3}";
RESULT:
	ERROR - (1064, 'You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near \'[1,2,3]::text[]::int[]::float8[] AS "{1,2,3}"\' at line 2')

-----------
QUERY:

SELECT pg_typeof(ARRAY[1,2,3]::text[]::int[]::float8[]) AS "double precision[]";
RESULT:
	ERROR - (1064, 'You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near \'[1,2,3]::text[]::int[]::float8[]) AS "double precision[]"\' at line 1')

-----------
QUERY:

SELECT ARRAY[['a','bc'],['def','hijk']]::text[]::varchar[] AS "{{a,bc},{def,hijk}}";
RESULT:
	ERROR - (1064, 'You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near \'[[\'a\',\'bc\'],[\'def\',\'hijk\']]::text[]::varchar[] AS "{{a,bc},{def,hijk}}"\' at line 1')

-----------
QUERY:

SELECT pg_typeof(ARRAY[['a','bc'],['def','hijk']]::text[]::varchar[]) AS "character varying[]";
RESULT:
	ERROR - (1064, 'You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near \'[[\'a\',\'bc\'],[\'def\',\'hijk\']]::text[]::varchar[]) AS "character varying[]"\' at line 1')

-----------
QUERY:

SELECT CAST(ARRAY[[[[[['a','bb','ccc']]]]]] as text[]) as "{{{{{{a,bb,ccc}}}}}}";
RESULT:
	ERROR - (1064, 'You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near \'[[[[[[\'a\',\'bb\',\'ccc\']]]]]] as text[]) as "{{{{{{a,bb,ccc}}}}}}"\' at line 1')

-----------
QUERY:

SELECT NULL::text[]::int[] AS "NULL";
RESULT:
	ERROR - (1064, 'You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near \'::text[]::int[] AS "NULL"\' at line 1')

-----------
QUERY:


-- scalar op any/all (array)
select 33 = any ('{1,2,3}');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ''{1,2,3}')' at line 2")

-----------
QUERY:

select 33 = any ('{1,2,33}');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ''{1,2,33}')' at line 1")

-----------
QUERY:

select 33 = all ('{1,2,33}');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ''{1,2,33}')' at line 1")

-----------
QUERY:

select 33 >= all ('{1,2,33}');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ''{1,2,33}')' at line 1")

-----------
QUERY:

-- boundary cases
select null::int >= all ('{1,2,33}');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::int >= all ('{1,2,33}')' at line 2")

-----------
QUERY:

select null::int >= all ('{}');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::int >= all ('{}')' at line 1")

-----------
QUERY:

select null::int >= any ('{}');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::int >= any ('{}')' at line 1")

-----------
QUERY:

-- cross-datatype
select 33.4 = any (array[1,2,3]);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'array[1,2,3])' at line 2")

-----------
QUERY:

select 33.4 > all (array[1,2,3]);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'array[1,2,3])' at line 1")

-----------
QUERY:

-- errors
select 33 * any ('{1,2,3}');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '('{1,2,3}')' at line 2")

-----------
QUERY:

select 33 * any (44);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(44)' at line 1")

-----------
QUERY:

-- nulls
select 33 = any (null::int[]);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'null::int[])' at line 2")

-----------
QUERY:

select null::int = any ('{1,2,3}');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::int = any ('{1,2,3}')' at line 1")

-----------
QUERY:

select 33 = any ('{1,null,3}');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ''{1,null,3}')' at line 1")

-----------
QUERY:

select 33 = any ('{1,null,33}');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ''{1,null,33}')' at line 1")

-----------
QUERY:

select 33 = all (null::int[]);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'null::int[])' at line 1")

-----------
QUERY:

select null::int = all ('{1,2,3}');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::int = all ('{1,2,3}')' at line 1")

-----------
QUERY:

select 33 = all ('{1,null,3}');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ''{1,null,3}')' at line 1")

-----------
QUERY:

select 33 = all ('{33,null,33}');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ''{33,null,33}')' at line 1")

-----------
QUERY:

-- nulls later in the bitmap
SELECT -1 != ALL(ARRAY(SELECT NULLIF(g.i, 900) FROM generate_series(1,1000) g(i)));
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'ARRAY(SELECT NULLIF(g.i, 900) FROM generate_series(1,1000) g(i)))' at line 2")

-----------
QUERY:


-- test indexes on arrays
create temp table arr_tbl (f1 int[] unique);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'temp table arr_tbl (f1 int[] unique)' at line 2")

-----------
QUERY:

insert into arr_tbl values ('{1,2,3}');
RESULT:
	ERROR - (1146, "Table 'test.arr_tbl' doesn't exist")

-----------
QUERY:

insert into arr_tbl values ('{1,2}');
RESULT:
	ERROR - (1146, "Table 'test.arr_tbl' doesn't exist")

-----------
QUERY:

-- failure expected:
insert into arr_tbl values ('{1,2,3}');
RESULT:
	ERROR - (1146, "Table 'test.arr_tbl' doesn't exist")

-----------
QUERY:

insert into arr_tbl values ('{2,3,4}');
RESULT:
	ERROR - (1146, "Table 'test.arr_tbl' doesn't exist")

-----------
QUERY:

insert into arr_tbl values ('{1,5,3}');
RESULT:
	ERROR - (1146, "Table 'test.arr_tbl' doesn't exist")

-----------
QUERY:

insert into arr_tbl values ('{1,2,10}');
RESULT:
	ERROR - (1146, "Table 'test.arr_tbl' doesn't exist")

-----------
QUERY:


set enable_seqscan to off;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'to off' at line 1")

-----------
QUERY:

set enable_bitmapscan to off;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'to off' at line 1")

-----------
QUERY:

select * from arr_tbl where f1 > '{1,2,3}' and f1 <= '{1,5,3}';
RESULT:
	ERROR - (1146, "Table 'test.arr_tbl' doesn't exist")

-----------
QUERY:

select * from arr_tbl where f1 >= '{1,2,3}' and f1 < '{1,5,3}';
RESULT:
	ERROR - (1146, "Table 'test.arr_tbl' doesn't exist")

-----------
QUERY:


-- test ON CONFLICT DO UPDATE with arrays
create temp table arr_pk_tbl (pk int4 primary key, f1 int[]);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'temp table arr_pk_tbl (pk int4 primary key, f1 int[])' at line 2")

-----------
QUERY:

insert into arr_pk_tbl values (1, '{1,2,3}');
RESULT:
	ERROR - (1146, "Table 'test.arr_pk_tbl' doesn't exist")

-----------
QUERY:

insert into arr_pk_tbl values (1, '{3,4,5}') on conflict (pk)
  do update set f1[1] = excluded.f1[1], f1[3] = excluded.f1[3]
  returning pk, f1;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'conflict (pk)\n  do update set f1[1] = excluded.f1[1], f1[3] = excluded.f1[3]\n  r' at line 1")

-----------
QUERY:

insert into arr_pk_tbl(pk, f1[1:2]) values (1, '{6,7,8}') on conflict (pk)
  do update set f1[1] = excluded.f1[1],
    f1[2] = excluded.f1[2],
    f1[3] = excluded.f1[3]
  returning pk, f1;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[1:2]) values (1, '{6,7,8}') on conflict (pk)\n  do update set f1[1] = excluded.f' at line 1")

-----------
QUERY:


-- note: if above selects don/* REPLACED */ ''t produce the expected tuple order,
-- then you didn/* REPLACED */ ''t get an indexscan plan, and something is busted.
reset enable_seqscan;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'enable_seqscan' at line 3")

-----------
QUERY:

reset enable_bitmapscan;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'enable_bitmapscan' at line 1")

-----------
QUERY:


-- test subscript overflow detection

-- The normal error message includes a platform-dependent limit,
-- so suppress it to avoid needing multiple expected-files.
-- \set VERBOSITY sqlstate

insert into arr_pk_tbl values(10, '[-2147483648:-2147483647]={1,2}');
RESULT:
	ERROR - (1146, "Table 'test.arr_pk_tbl' doesn't exist")

-----------
QUERY:

update arr_pk_tbl set f1[2147483647] = 42 where pk = 10;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[2147483647] = 42 where pk = 10' at line 1")

-----------
QUERY:

update arr_pk_tbl set f1[2147483646:2147483647] = array[4,2] where pk = 10;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[2147483646:2147483647] = array[4,2] where pk = 10' at line 1")

-----------
QUERY:


-- also exercise the expanded-array case
do $$ declare a int[];
begin
  a := '[-2147483648:-2147483647]={1,2}'::int[];
  a[2147483647] := 42;
end $$;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'declare a int[];\nbegin\n  a := '[-2147483648:-2147483647]={1,2}'::int[];\n  a[2147' at line 2")

-----------
QUERY:


-- \set VERBOSITY default

-- test [not] (like|ilike) (any|all) (...)
select 'foo' like any (array['%a', '%o']);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(array['%a', '%o'])' at line 4")

-----------
QUERY:
 -- t
select 'foo' like any (array['%a', '%b']);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(array['%a', '%b'])' at line 2")

-----------
QUERY:
 -- f
select 'foo' like all (array['f%', '%o']);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'all (array['f%', '%o'])' at line 2")

-----------
QUERY:
 -- t
select 'foo' like all (array['f%', '%b']);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'all (array['f%', '%b'])' at line 2")

-----------
QUERY:
 -- f
select 'foo' not like any (array['%a', '%b']);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(array['%a', '%b'])' at line 2")

-----------
QUERY:
 -- t
select 'foo' not like all (array['%a', '%o']);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'all (array['%a', '%o'])' at line 2")

-----------
QUERY:
 -- f
select 'foo' ilike any (array['%A', '%O']);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'any (array['%A', '%O'])' at line 2")

-----------
QUERY:
 -- t
select 'foo' ilike all (array['F%', '%O']);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'all (array['F%', '%O'])' at line 2")

-----------
QUERY:
 -- t

--
-- General array parser tests
--

-- none of the following should be accepted
select '{{1,{2}},{2,3}}'::text[];
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::text[]' at line 8")

-----------
QUERY:

select E'{{1,2},\\{2,3}}'::text[];
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::text[]' at line 1")

-----------
QUERY:

select '{"a"b}'::text[];
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::text[]' at line 1")

-----------
QUERY:

select '{a"b"}'::text[];
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::text[]' at line 1")

-----------
QUERY:

select '{"a""b"}'::text[];
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::text[]' at line 1")

-----------
QUERY:

select '{{"1 2" x},{3}}'::text[];
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::text[]' at line 1")

-----------
QUERY:

select '{{"1 2"} x,{3}}'::text[];
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::text[]' at line 1")

-----------
QUERY:

select '{}}'::text[];
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::text[]' at line 1")

-----------
QUERY:

select '{ }}'::text[];
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::text[]' at line 1")

-----------
QUERY:

select '}{'::text[];
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::text[]' at line 1")

-----------
QUERY:

select '{foo{}}'::text[];
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::text[]' at line 1")

-----------
QUERY:

select '{"foo"{}}'::text[];
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::text[]' at line 1")

-----------
QUERY:

select '{foo,,bar}'::text[];
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::text[]' at line 1")

-----------
QUERY:

select '{{1},{{2}}}'::text[];
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::text[]' at line 1")

-----------
QUERY:

select '{{{1}},{2}}'::text[];
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::text[]' at line 1")

-----------
QUERY:

select '{{},{{}}}'::text[];
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::text[]' at line 1")

-----------
QUERY:

select '{{{}},{}}'::text[];
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::text[]' at line 1")

-----------
QUERY:

select '{{1},{}}'::text[];
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::text[]' at line 1")

-----------
QUERY:

select '{{},{1}}'::text[];
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::text[]' at line 1")

-----------
QUERY:

select '[1:0]={}'::int[];
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::int[]' at line 1")

-----------
QUERY:

select '[2147483646:2147483647]={1,2}'::int[];
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::int[]' at line 1")

-----------
QUERY:

select '[1:-1]={}'::int[];
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::int[]' at line 1")

-----------
QUERY:

select '[2]={1}'::int[];
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::int[]' at line 1")

-----------
QUERY:

select '[1:]={1}'::int[];
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::int[]' at line 1")

-----------
QUERY:

select '[:1]={1}'::int[];
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::int[]' at line 1")

-----------
QUERY:

select array[];
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[]' at line 1")

-----------
QUERY:

select '{{1,},{1},}'::text[];
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::text[]' at line 1")

-----------
QUERY:

select '{{1,},{1}}'::text[];
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::text[]' at line 1")

-----------
QUERY:

select '{{1,}}'::text[];
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::text[]' at line 1")

-----------
QUERY:

select '{1,}'::text[];
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::text[]' at line 1")

-----------
QUERY:

select '[21474836488:21474836489]={1,2}'::int[];
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::int[]' at line 1")

-----------
QUERY:

select '[-2147483649:-2147483648]={1,2}'::int[];
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::int[]' at line 1")

-----------
QUERY:

-- none of the above should be accepted

-- all of the following should be accepted
select '{}'::text[];
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::text[]' at line 4")

-----------
QUERY:

select '{{},{}}'::text[];
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::text[]' at line 1")

-----------
QUERY:

select '{{{1,2,3,4},{2,3,4,5}},{{3,4,5,6},{4,5,6,7}}}'::text[];
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::text[]' at line 1")

-----------
QUERY:

select '{null,n\ull,"null"}'::text[];
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::text[]' at line 1")

-----------
QUERY:

select '{ ab\c , "ab\"c" }'::text[];
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::text[]' at line 1")

-----------
QUERY:

select '{0 second  ,0 second}'::interval[];
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::interval[]' at line 1")

-----------
QUERY:

select '{ { "," } , { 3 } }'::text[];
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::text[]' at line 1")

-----------
QUERY:

select '  {   {  "  0 second  "   ,  0 second  }   }'::text[];
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::text[]' at line 1")

-----------
QUERY:

select '{
           0 second,
           @ 1 hour @ 42 minutes @ 20 seconds
         }'::interval[];
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::interval[]' at line 4")

-----------
QUERY:

select array[]::text[];
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[]::text[]' at line 1")

-----------
QUERY:

select '[2]={1,7}'::int[];
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::int[]' at line 1")

-----------
QUERY:

select '[0:1]={1.1,2.2}'::float8[];
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::float8[]' at line 1")

-----------
QUERY:

select '[2147483646:2147483646]={1}'::int[];
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::int[]' at line 1")

-----------
QUERY:

select '[-2147483648:-2147483647]={1,2}'::int[];
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::int[]' at line 1")

-----------
QUERY:

-- all of the above should be accepted

-- tests for array aggregates
CREATE TEMP TABLE arraggtest ( f1 INT[], f2 TEXT[][], f3 FLOAT[]);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'TEMP TABLE arraggtest ( f1 INT[], f2 TEXT[][], f3 FLOAT[])' at line 4")

-----------
QUERY:


INSERT INTO arraggtest (f1, f2, f3) VALUES
('{1,2,3,4}','{{grey,red},{blue,blue}}','{1.6, 0.0}');
RESULT:
	ERROR - (1146, "Table 'test.arraggtest' doesn't exist")

-----------
QUERY:

INSERT INTO arraggtest (f1, f2, f3) VALUES
('{1,2,3}','{{grey,red},{grey,blue}}','{1.6}');
RESULT:
	ERROR - (1146, "Table 'test.arraggtest' doesn't exist")

-----------
QUERY:

SELECT max(f1), min(f1), max(f2), min(f2), max(f3), min(f3) FROM arraggtest;
RESULT:
	ERROR - (1146, "Table 'test.arraggtest' doesn't exist")

-----------
QUERY:


INSERT INTO arraggtest (f1, f2, f3) VALUES
('{3,3,2,4,5,6}','{{white,yellow},{pink,orange}}','{2.1,3.3,1.8,1.7,1.6}');
RESULT:
	ERROR - (1146, "Table 'test.arraggtest' doesn't exist")

-----------
QUERY:

SELECT max(f1), min(f1), max(f2), min(f2), max(f3), min(f3) FROM arraggtest;
RESULT:
	ERROR - (1146, "Table 'test.arraggtest' doesn't exist")

-----------
QUERY:


INSERT INTO arraggtest (f1, f2, f3) VALUES
('{2}','{{black,red},{green,orange}}','{1.6,2.2,2.6,0.4}');
RESULT:
	ERROR - (1146, "Table 'test.arraggtest' doesn't exist")

-----------
QUERY:

SELECT max(f1), min(f1), max(f2), min(f2), max(f3), min(f3) FROM arraggtest;
RESULT:
	ERROR - (1146, "Table 'test.arraggtest' doesn't exist")

-----------
QUERY:


INSERT INTO arraggtest (f1, f2, f3) VALUES
('{4,2,6,7,8,1}','{{red},{black},{purple},{blue},{blue}}',NULL);
RESULT:
	ERROR - (1146, "Table 'test.arraggtest' doesn't exist")

-----------
QUERY:

SELECT max(f1), min(f1), max(f2), min(f2), max(f3), min(f3) FROM arraggtest;
RESULT:
	ERROR - (1146, "Table 'test.arraggtest' doesn't exist")

-----------
QUERY:


INSERT INTO arraggtest (f1, f2, f3) VALUES
('{}','{{pink,white,blue,red,grey,orange}}','{2.1,1.87,1.4,2.2}');
RESULT:
	ERROR - (1146, "Table 'test.arraggtest' doesn't exist")

-----------
QUERY:

SELECT max(f1), min(f1), max(f2), min(f2), max(f3), min(f3) FROM arraggtest;
RESULT:
	ERROR - (1146, "Table 'test.arraggtest' doesn't exist")

-----------
QUERY:


-- A few simple tests for arrays of composite types

create type comptype as (f1 int, f2 text);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'type comptype as (f1 int, f2 text)' at line 3")

-----------
QUERY:


create table comptable (c1 comptype, c2 comptype[]);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'comptype, c2 comptype[])' at line 1")

-----------
QUERY:


-- XXX would like to not have to specify row() construct types here ...
insert into comptable
  values (row(1,'foo'), array[row(2,'bar')::comptype, row(3,'baz')::comptype]);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[row(2,'bar')::comptype, row(3,'baz')::comptype])' at line 3")

-----------
QUERY:


-- check that implicitly named array type _comptype isn/* REPLACED */ ''t a problem
create type _comptype as enum('fooey');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'type _comptype as enum('fooey')' at line 2")

-----------
QUERY:


select * from comptable;
RESULT:
	ERROR - (1146, "Table 'test.comptable' doesn't exist")

-----------
QUERY:

select c2[2].f2 from comptable;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[2].f2 from comptable' at line 1")

-----------
QUERY:


drop type _comptype;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'type _comptype' at line 1")

-----------
QUERY:

drop table comptable;
RESULT:
	ERROR - (1051, "Unknown table 'test.comptable'")

-----------
QUERY:

drop type comptype;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'type comptype' at line 1")

-----------
QUERY:


create or replace function unnest1(anyarray)
returns setof anyelement as $$
select $1[s] from generate_subscripts($1,1) g(s);
$$ language sql immutable;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'function unnest1(anyarray)\nreturns setof anyelement as $$\nselect $1[s] from gene' at line 1")

-----------
QUERY:


create or replace function unnest2(anyarray)
returns setof anyelement as $$
select $1[s1][s2] from generate_subscripts($1,1) g1(s1),
                   generate_subscripts($1,2) g2(s2);
$$ language sql immutable;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'function unnest2(anyarray)\nreturns setof anyelement as $$\nselect $1[s1][s2] from' at line 1")

-----------
QUERY:


select * from unnest1(array[1,2,3]);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(array[1,2,3])' at line 1")

-----------
QUERY:

select * from unnest2(array[[1,2,3],[4,5,6]]);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(array[[1,2,3],[4,5,6]])' at line 1")

-----------
QUERY:


drop function unnest1(anyarray);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(anyarray)' at line 1")

-----------
QUERY:

drop function unnest2(anyarray);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(anyarray)' at line 1")

-----------
QUERY:


select array_fill(null::integer, array[3,3],array[2,2]);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::integer, array[3,3],array[2,2])' at line 1")

-----------
QUERY:

select array_fill(null::integer, array[3,3]);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::integer, array[3,3])' at line 1")

-----------
QUERY:

select array_fill(null::text, array[3,3],array[2,2]);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::text, array[3,3],array[2,2])' at line 1")

-----------
QUERY:

select array_fill(null::text, array[3,3]);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::text, array[3,3])' at line 1")

-----------
QUERY:

select array_fill(7, array[3,3],array[2,2]);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[3,3],array[2,2])' at line 1")

-----------
QUERY:

select array_fill(7, array[3,3]);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[3,3])' at line 1")

-----------
QUERY:

select array_fill('juhu'::text, array[3,3],array[2,2]);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::text, array[3,3],array[2,2])' at line 1")

-----------
QUERY:

select array_fill('juhu'::text, array[3,3]);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::text, array[3,3])' at line 1")

-----------
QUERY:

select a, a = '{}' as is_eq, array_dims(a)
  from (select array_fill(42, array[0]) as a) ss;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[0]) as a) ss' at line 2")

-----------
QUERY:

select a, a = '{}' as is_eq, array_dims(a)
  from (select array_fill(42, '{}') as a) ss;
RESULT:
	ERROR - (1305, 'FUNCTION test.array_fill does not exist')

-----------
QUERY:

select a, a = '{}' as is_eq, array_dims(a)
  from (select array_fill(42, '{}', '{}') as a) ss;
RESULT:
	ERROR - (1305, 'FUNCTION test.array_fill does not exist')

-----------
QUERY:

-- raise exception
select array_fill(1, null, array[2,2]);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[2,2])' at line 2")

-----------
QUERY:

select array_fill(1, array[2,2], null);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[2,2], null)' at line 1")

-----------
QUERY:

select array_fill(1, array[2,2], '{}');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[2,2], '{}')' at line 1")

-----------
QUERY:

select array_fill(1, array[3,3], array[1,1,1]);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[3,3], array[1,1,1])' at line 1")

-----------
QUERY:

select array_fill(1, array[1,2,null]);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[1,2,null])' at line 1")

-----------
QUERY:

select array_fill(1, array[[1,2],[3,4]]);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[[1,2],[3,4]])' at line 1")

-----------
QUERY:


select string_to_array('1|2|3', '|');
RESULT:
	ERROR - (1305, 'FUNCTION test.string_to_array does not exist')

-----------
QUERY:

select string_to_array('1|2|3|', '|');
RESULT:
	ERROR - (1305, 'FUNCTION test.string_to_array does not exist')

-----------
QUERY:

select string_to_array('1||2|3||', '||');
RESULT:
	ERROR - (1305, 'FUNCTION test.string_to_array does not exist')

-----------
QUERY:

select string_to_array('1|2|3', '');
RESULT:
	ERROR - (1305, 'FUNCTION test.string_to_array does not exist')

-----------
QUERY:

select string_to_array('', '|');
RESULT:
	ERROR - (1305, 'FUNCTION test.string_to_array does not exist')

-----------
QUERY:

select string_to_array('1|2|3', NULL);
RESULT:
	ERROR - (1305, 'FUNCTION test.string_to_array does not exist')

-----------
QUERY:

select string_to_array(NULL, '|') IS NULL;
RESULT:
	ERROR - (1305, 'FUNCTION test.string_to_array does not exist')

-----------
QUERY:

select string_to_array('abc', '');
RESULT:
	ERROR - (1305, 'FUNCTION test.string_to_array does not exist')

-----------
QUERY:

select string_to_array('abc', '', 'abc');
RESULT:
	ERROR - (1305, 'FUNCTION test.string_to_array does not exist')

-----------
QUERY:

select string_to_array('abc', ',');
RESULT:
	ERROR - (1305, 'FUNCTION test.string_to_array does not exist')

-----------
QUERY:

select string_to_array('abc', ',', 'abc');
RESULT:
	ERROR - (1305, 'FUNCTION test.string_to_array does not exist')

-----------
QUERY:

select string_to_array('1,2,3,4,,6', ',');
RESULT:
	ERROR - (1305, 'FUNCTION test.string_to_array does not exist')

-----------
QUERY:

select string_to_array('1,2,3,4,,6', ',', '');
RESULT:
	ERROR - (1305, 'FUNCTION test.string_to_array does not exist')

-----------
QUERY:

select string_to_array('1,2,3,4,*,6', ',', '*');
RESULT:
	ERROR - (1305, 'FUNCTION test.string_to_array does not exist')

-----------
QUERY:


select v, v is null as "is null" from string_to_table('1|2|3', '|') g(v);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '('1|2|3', '|') g(v)' at line 1")

-----------
QUERY:

select v, v is null as "is null" from string_to_table('1|2|3|', '|') g(v);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '('1|2|3|', '|') g(v)' at line 1")

-----------
QUERY:

select v, v is null as "is null" from string_to_table('1||2|3||', '||') g(v);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '('1||2|3||', '||') g(v)' at line 1")

-----------
QUERY:

select v, v is null as "is null" from string_to_table('1|2|3', '') g(v);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '('1|2|3', '') g(v)' at line 1")

-----------
QUERY:

select v, v is null as "is null" from string_to_table('', '|') g(v);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '('', '|') g(v)' at line 1")

-----------
QUERY:

select v, v is null as "is null" from string_to_table('1|2|3', NULL) g(v);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '('1|2|3', NULL) g(v)' at line 1")

-----------
QUERY:

select v, v is null as "is null" from string_to_table(NULL, '|') g(v);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(NULL, '|') g(v)' at line 1")

-----------
QUERY:

select v, v is null as "is null" from string_to_table('abc', '') g(v);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '('abc', '') g(v)' at line 1")

-----------
QUERY:

select v, v is null as "is null" from string_to_table('abc', '', 'abc') g(v);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '('abc', '', 'abc') g(v)' at line 1")

-----------
QUERY:

select v, v is null as "is null" from string_to_table('abc', ',') g(v);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '('abc', ',') g(v)' at line 1")

-----------
QUERY:

select v, v is null as "is null" from string_to_table('abc', ',', 'abc') g(v);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '('abc', ',', 'abc') g(v)' at line 1")

-----------
QUERY:

select v, v is null as "is null" from string_to_table('1,2,3,4,,6', ',') g(v);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '('1,2,3,4,,6', ',') g(v)' at line 1")

-----------
QUERY:

select v, v is null as "is null" from string_to_table('1,2,3,4,,6', ',', '') g(v);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '('1,2,3,4,,6', ',', '') g(v)' at line 1")

-----------
QUERY:

select v, v is null as "is null" from string_to_table('1,2,3,4,*,6', ',', '*') g(v);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '('1,2,3,4,*,6', ',', '*') g(v)' at line 1")

-----------
QUERY:


select array_to_string(NULL::int4[], ',') IS NULL;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::int4[], ',') IS NULL' at line 1")

-----------
QUERY:

select array_to_string('{}'::int4[], ',');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::int4[], ',')' at line 1")

-----------
QUERY:

select array_to_string(array[1,2,3,4,NULL,6], ',');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[1,2,3,4,NULL,6], ',')' at line 1")

-----------
QUERY:

select array_to_string(array[1,2,3,4,NULL,6], ',', '*');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[1,2,3,4,NULL,6], ',', '*')' at line 1")

-----------
QUERY:

select array_to_string(array[1,2,3,4,NULL,6], NULL);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[1,2,3,4,NULL,6], NULL)' at line 1")

-----------
QUERY:

select array_to_string(array[1,2,3,4,NULL,6], ',', NULL);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[1,2,3,4,NULL,6], ',', NULL)' at line 1")

-----------
QUERY:


select array_to_string(string_to_array('1|2|3', '|'), '|');
RESULT:
	ERROR - (1305, 'FUNCTION test.array_to_string does not exist')

-----------
QUERY:


select array_length(array[1,2,3], 1);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[1,2,3], 1)' at line 1")

-----------
QUERY:

select array_length(array[[1,2,3], [4,5,6]], 0);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[[1,2,3], [4,5,6]], 0)' at line 1")

-----------
QUERY:

select array_length(array[[1,2,3], [4,5,6]], 1);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[[1,2,3], [4,5,6]], 1)' at line 1")

-----------
QUERY:

select array_length(array[[1,2,3], [4,5,6]], 2);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[[1,2,3], [4,5,6]], 2)' at line 1")

-----------
QUERY:

select array_length(array[[1,2,3], [4,5,6]], 3);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[[1,2,3], [4,5,6]], 3)' at line 1")

-----------
QUERY:


select cardinality(NULL::int[]);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::int[])' at line 1")

-----------
QUERY:

select cardinality('{}'::int[]);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::int[])' at line 1")

-----------
QUERY:

select cardinality(array[1,2,3]);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[1,2,3])' at line 1")

-----------
QUERY:

select cardinality('[2:4]={5,6,7}'::int[]);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::int[])' at line 1")

-----------
QUERY:

select cardinality('{{1,2}}'::int[]);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::int[])' at line 1")

-----------
QUERY:

select cardinality('{{1,2},{3,4},{5,6}}'::int[]);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::int[])' at line 1")

-----------
QUERY:

select cardinality('{{{1,9},{5,6}},{{2,3},{3,4}}}'::int[]);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::int[])' at line 1")

-----------
QUERY:


-- array_agg(anynonarray)
select array_agg(unique1) from (select unique1 from tenk1 where unique1 < 15 order by unique1) ss;
RESULT:
	ERROR - (1146, "Table 'test.tenk1' doesn't exist")

-----------
QUERY:

select array_agg(ten) from (select ten from tenk1 where unique1 < 15 order by unique1) ss;
RESULT:
	ERROR - (1146, "Table 'test.tenk1' doesn't exist")

-----------
QUERY:

select array_agg(nullif(ten, 4)) from (select ten from tenk1 where unique1 < 15 order by unique1) ss;
RESULT:
	ERROR - (1146, "Table 'test.tenk1' doesn't exist")

-----------
QUERY:

select array_agg(unique1) from tenk1 where unique1 < -15;
RESULT:
	ERROR - (1146, "Table 'test.tenk1' doesn't exist")

-----------
QUERY:


-- array_agg(anyarray)
select array_agg(ar)
  from (values ('{1,2}'::int[]), ('{3,4}'::int[])) v(ar);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '('{1,2}'::int[]), ('{3,4}'::int[])) v(ar)' at line 3")

-----------
QUERY:

select array_agg(distinct ar order by ar desc)
  from (select array[i / 2] from generate_series(1,10) a(i)) b(ar);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'distinct ar order by ar desc)\n  from (select array[i / 2] from generate_series(1' at line 1")

-----------
QUERY:

select array_agg(ar)
  from (select array_agg(array[i, i+1, i-1])
        from generate_series(1,2) a(i)) b(ar);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[i, i+1, i-1])\n        from generate_series(1,2) a(i)) b(ar)' at line 2")

-----------
QUERY:

select array_agg(array[i+1.2, i+1.3, i+1.4]) from generate_series(1,3) g(i);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[i+1.2, i+1.3, i+1.4]) from generate_series(1,3) g(i)' at line 1")

-----------
QUERY:

select array_agg(array['Hello', i::text]) from generate_series(9,11) g(i);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '['Hello', i::text]) from generate_series(9,11) g(i)' at line 1")

-----------
QUERY:

select array_agg(array[i, nullif(i, 3), i+1]) from generate_series(1,4) g(i);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[i, nullif(i, 3), i+1]) from generate_series(1,4) g(i)' at line 1")

-----------
QUERY:

-- errors
select array_agg('{}'::int[]) from generate_series(1,2);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::int[]) from generate_series(1,2)' at line 2")

-----------
QUERY:

select array_agg(null::int[]) from generate_series(1,2);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::int[]) from generate_series(1,2)' at line 1")

-----------
QUERY:

select array_agg(ar)
  from (values ('{1,2}'::int[]), ('{3}'::int[])) v(ar);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '('{1,2}'::int[]), ('{3}'::int[])) v(ar)' at line 2")

-----------
QUERY:


select unnest(array[1,2,3]);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[1,2,3])' at line 1")

-----------
QUERY:

select * from unnest(array[1,2,3]);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(array[1,2,3])' at line 1")

-----------
QUERY:

select unnest(array[1,2,3,4.5]::float8[]);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[1,2,3,4.5]::float8[])' at line 1")

-----------
QUERY:

select unnest(array[1,2,3,4.5]::numeric[]);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[1,2,3,4.5]::numeric[])' at line 1")

-----------
QUERY:

select unnest(array[1,2,3,null,4,null,null,5,6]);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[1,2,3,null,4,null,null,5,6])' at line 1")

-----------
QUERY:

select unnest(array[1,2,3,null,4,null,null,5,6]::text[]);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[1,2,3,null,4,null,null,5,6]::text[])' at line 1")

-----------
QUERY:

select abs(unnest(array[1,2,null,-3]));
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[1,2,null,-3]))' at line 1")

-----------
QUERY:

select array_remove(array[1,2,2,3], 2);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[1,2,2,3], 2)' at line 1")

-----------
QUERY:

select array_remove(array[1,2,2,3], 5);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[1,2,2,3], 5)' at line 1")

-----------
QUERY:

select array_remove(array[1,NULL,NULL,3], NULL);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[1,NULL,NULL,3], NULL)' at line 1")

-----------
QUERY:

select array_remove(array['A','CC','D','C','RR'], 'RR');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '['A','CC','D','C','RR'], 'RR')' at line 1")

-----------
QUERY:

select array_remove(array[1.0, 2.1, 3.3], 1);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[1.0, 2.1, 3.3], 1)' at line 1")

-----------
QUERY:

select array_remove('{{1,2,2},{1,4,3}}', 2);
RESULT:
	ERROR - (1305, 'FUNCTION test.array_remove does not exist')

-----------
QUERY:
 -- not allowed
select array_remove(array['X','X','X'], 'X') = '{}';
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '['X','X','X'], 'X') = '{}'' at line 2")

-----------
QUERY:

select array_replace(array[1,2,5,4],5,3);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[1,2,5,4],5,3)' at line 1")

-----------
QUERY:

select array_replace(array[1,2,5,4],5,NULL);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[1,2,5,4],5,NULL)' at line 1")

-----------
QUERY:

select array_replace(array[1,2,NULL,4,NULL],NULL,5);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[1,2,NULL,4,NULL],NULL,5)' at line 1")

-----------
QUERY:

select array_replace(array['A','B','DD','B'],'B','CC');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '['A','B','DD','B'],'B','CC')' at line 1")

-----------
QUERY:

select array_replace(array[1,NULL,3],NULL,NULL);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[1,NULL,3],NULL,NULL)' at line 1")

-----------
QUERY:

select array_replace(array['AB',NULL,'CDE'],NULL,'12');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '['AB',NULL,'CDE'],NULL,'12')' at line 1")

-----------
QUERY:


-- array(select array-value ...)
select array(select array[i,i/2] from generate_series(1,5) i);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(select array[i,i/2] from generate_series(1,5) i)' at line 2")

-----------
QUERY:

select array(select array['Hello', i::text] from generate_series(9,11) i);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(select array['Hello', i::text] from generate_series(9,11) i)' at line 1")

-----------
QUERY:


-- Insert/update on a column that is array of composite

create temp table t1 (f1 int8_tbl[]);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'temp table t1 (f1 int8_tbl[])' at line 3")

-----------
QUERY:

insert into t1 (f1[5].q1) values(42);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[5].q1) values(42)' at line 1")

-----------
QUERY:

select * from t1;
RESULT:
	ERROR - (1146, "Table 'test.t1' doesn't exist")

-----------
QUERY:

update t1 set f1[5].q2 = 43;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[5].q2 = 43' at line 1")

-----------
QUERY:

select * from t1;
RESULT:
	ERROR - (1146, "Table 'test.t1' doesn't exist")

-----------
QUERY:


-- Check that arrays of composites are safely detoasted when needed

create temp table src (f1 text);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'temp table src (f1 text)' at line 3")

-----------
QUERY:

insert into src
  select string_agg(random()::text,'') from generate_series(1,10000);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '()::text,'') from generate_series(1,10000)' at line 2")

-----------
QUERY:

create type textandtext as (c1 text, c2 text);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'type textandtext as (c1 text, c2 text)' at line 1")

-----------
QUERY:

create temp table dest (f1 textandtext[]);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'temp table dest (f1 textandtext[])' at line 1")

-----------
QUERY:

insert into dest select array[row(f1,f1)::textandtext] from src;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[row(f1,f1)::textandtext] from src' at line 1")

-----------
QUERY:

select length(fipshash((f1[1]).c2)) from dest;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[1]).c2)) from dest' at line 1")

-----------
QUERY:

delete from src;
RESULT:
	ERROR - (1146, "Table 'test.src' doesn't exist")

-----------
QUERY:

select length(fipshash((f1[1]).c2)) from dest;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[1]).c2)) from dest' at line 1")

-----------
QUERY:

truncate table src;
RESULT:
	ERROR - (1146, "Table 'test.src' doesn't exist")

-----------
QUERY:

drop table src;
RESULT:
	ERROR - (1051, "Unknown table 'test.src'")

-----------
QUERY:

select length(fipshash((f1[1]).c2)) from dest;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[1]).c2)) from dest' at line 1")

-----------
QUERY:

drop table dest;
RESULT:
	ERROR - (1051, "Unknown table 'test.dest'")

-----------
QUERY:

drop type textandtext;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'type textandtext' at line 1")

-----------
QUERY:


-- Tests for polymorphic-array form of width_bucket()

-- this exercises the varwidth and float8 code paths
SELECT
    op,
    width_bucket(op::numeric, ARRAY[1, 3, 5, 10.0]::numeric[]) AS wb_n1,
    width_bucket(op::numeric, ARRAY[0, 5.5, 9.99]::numeric[]) AS wb_n2,
    width_bucket(op::numeric, ARRAY[-6, -5, 2.0]::numeric[]) AS wb_n3,
    width_bucket(op::float8, ARRAY[1, 3, 5, 10.0]::float8[]) AS wb_f1,
    width_bucket(op::float8, ARRAY[0, 5.5, 9.99]::float8[]) AS wb_f2,
    width_bucket(op::float8, ARRAY[-6, -5, 2.0]::float8[]) AS wb_f3
FROM (VALUES
  (-5.2),
  (-0.0000000001),
  (0.000000000001),
  (1),
  (1.99999999999999),
  (2),
  (2.00000000000001),
  (3),
  (4),
  (4.5),
  (5),
  (5.5),
  (6),
  (7),
  (8),
  (9),
  (9.99999999999999),
  (10),
  (10.0000000000001)
) v(op);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::numeric, ARRAY[1, 3, 5, 10.0]::numeric[]) AS wb_n1,\n    width_bucket(op::numer' at line 6")

-----------
QUERY:


-- ensure float8 path handles NaN properly
SELECT
    op,
    width_bucket(op, ARRAY[1, 3, 9, 'NaN', 'NaN']::float8[]) AS wb
FROM (VALUES
  (-5.2::float8),
  (4::float8),
  (77::float8),
  ('NaN'::float8)
) v(op);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[1, 3, 9, 'NaN', 'NaN']::float8[]) AS wb\nFROM (VALUES\n  (-5.2::float8),\n  (4::fl' at line 4")

-----------
QUERY:


-- these exercise the generic fixed-width code path
SELECT
    op,
    width_bucket(op, ARRAY[1, 3, 5, 10]) AS wb_1
FROM generate_series(0,11) as op;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[1, 3, 5, 10]) AS wb_1\nFROM generate_series(0,11) as op' at line 4")

-----------
QUERY:


SELECT width_bucket(now(),
                    array['yesterday', 'today', 'tomorrow']::timestamptz[]);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '['yesterday', 'today', 'tomorrow']::timestamptz[])' at line 2")

-----------
QUERY:


-- corner cases
SELECT width_bucket(5, ARRAY[3]);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[3])' at line 2")

-----------
QUERY:

SELECT width_bucket(5, '{}');
RESULT:
	ERROR - (1305, 'FUNCTION test.width_bucket does not exist')

-----------
QUERY:


-- error cases
SELECT width_bucket('5'::text, ARRAY[3, 4]::integer[]);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::text, ARRAY[3, 4]::integer[])' at line 2")

-----------
QUERY:

SELECT width_bucket(5, ARRAY[3, 4, NULL]);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[3, 4, NULL])' at line 1")

-----------
QUERY:

SELECT width_bucket(5, ARRAY[ARRAY[1, 2], ARRAY[3, 4]]);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[ARRAY[1, 2], ARRAY[3, 4]])' at line 1")

-----------
QUERY:


-- trim_array

SELECT arr, trim_array(arr, 2)
FROM
(VALUES ('{1,2,3,4,5,6}'::bigint[]),
        ('{1,2}'),
        ('[10:16]={1,2,3,4,5,6,7}'),
        ('[-15:-10]={1,2,3,4,5,6}'),
        ('{{1,10},{2,20},{3,30},{4,40}}')) v(arr);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '('{1,2,3,4,5,6}'::bigint[]),\n        ('{1,2}'),\n        ('[10:16]={1,2,3,4,5,6,7' at line 5")

-----------
QUERY:


SELECT trim_array(ARRAY[1, 2, 3], -1);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[1, 2, 3], -1)' at line 1")

-----------
QUERY:
 -- fail
SELECT trim_array(ARRAY[1, 2, 3], 10);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[1, 2, 3], 10)' at line 2")

-----------
QUERY:
 -- fail
SELECT trim_array(ARRAY[]::int[], 1);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[]::int[], 1)' at line 2")

-----------
QUERY:
 -- fail

-- array_shuffle
SELECT array_shuffle('{1,2,3,4,5,6}'::int[]) <@ '{1,2,3,4,5,6}';
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::int[]) <@ '{1,2,3,4,5,6}'' at line 4")

-----------
QUERY:

SELECT array_shuffle('{1,2,3,4,5,6}'::int[]) @> '{1,2,3,4,5,6}';
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::int[]) @> '{1,2,3,4,5,6}'' at line 1")

-----------
QUERY:

SELECT array_dims(array_shuffle('[-1:2][2:3]={{1,2},{3,NULL},{5,6},{7,8}}'::int[]));
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::int[]))' at line 1")

-----------
QUERY:

SELECT array_dims(array_shuffle('{{{1,2},{3,NULL}},{{5,6},{7,8}},{{9,10},{11,12}}}'::int[]));
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::int[]))' at line 1")

-----------
QUERY:


-- array_sample
SELECT array_sample('{1,2,3,4,5,6}'::int[], 3) <@ '{1,2,3,4,5,6}';
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::int[], 3) <@ '{1,2,3,4,5,6}'' at line 2")

-----------
QUERY:

SELECT array_length(array_sample('{1,2,3,4,5,6}'::int[], 3), 1);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::int[], 3), 1)' at line 1")

-----------
QUERY:

SELECT array_dims(array_sample('[-1:2][2:3]={{1,2},{3,NULL},{5,6},{7,8}}'::int[], 3));
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::int[], 3))' at line 1")

-----------
QUERY:

SELECT array_dims(array_sample('{{{1,2},{3,NULL}},{{5,6},{7,8}},{{9,10},{11,12}}}'::int[], 2));
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::int[], 2))' at line 1")

-----------
QUERY:

SELECT array_sample('{1,2,3,4,5,6}'::int[], -1);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::int[], -1)' at line 1")

-----------
QUERY:
 -- fail
SELECT array_sample('{1,2,3,4,5,6}'::int[], 7);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::int[], 7)' at line 2")
