
-----------
QUERY:
/*
 * This test is for ICU collations.
 */

/* skip test if not UTF8 server encoding or no ICU collations installed */
SELECT getdatabaseencoding() <> 'UTF8' OR
       (SELECT count(*) FROM pg_collation WHERE collprovider = 'i' AND collname <> 'unicode') = 0
       AS skip_test \gset
-- \if :skip_test
-- \quit
-- \endif

SET client_encoding TO UTF8;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '\\gset\n-- \\if :skip_test\n-- \\quit\n-- \\endif\n\nSET client_encoding TO UTF8' at line 8")

-----------
QUERY:


CREATE SCHEMA collate_tests;
RESULT:
	[]

-----------
QUERY:

SET search_path = collate_tests;
RESULT:
	ERROR - (1193, "Unknown system variable 'search_path'")

-----------
QUERY:



CREATE TABLE collate_test1 (
    a int,
    b text COLLATE "en-x-icu" NOT NULL
);
RESULT:
	ERROR - (1273, "Unknown collation: 'en-x-icu'")

-----------
QUERY:


-- \d collate_test1

CREATE TABLE collate_test_fail (
    a int,
    b text COLLATE "ja_JP.eucjp-x-icu"
);
RESULT:
	ERROR - (1273, "Unknown collation: 'ja_JP.eucjp-x-icu'")

-----------
QUERY:


CREATE TABLE collate_test_fail (
    a int,
    b text COLLATE "foo-x-icu"
);
RESULT:
	ERROR - (1273, "Unknown collation: 'foo-x-icu'")

-----------
QUERY:


CREATE TABLE collate_test_fail (
    a int COLLATE "en-x-icu",
    b text
);
RESULT:
	ERROR - (1273, "Unknown collation: 'en-x-icu'")

-----------
QUERY:


CREATE TABLE collate_test_like (
    LIKE collate_test1
);
RESULT:
	ERROR - (1146, "Table 'test.collate_test1' doesn't exist")

-----------
QUERY:


-- \d collate_test_like

CREATE TABLE collate_test2 (
    a int,
    b text COLLATE "sv-x-icu"
);
RESULT:
	ERROR - (1273, "Unknown collation: 'sv-x-icu'")

-----------
QUERY:


CREATE TABLE collate_test3 (
    a int,
    b text COLLATE "C"
);
RESULT:
	ERROR - (1273, "Unknown collation: 'C'")

-----------
QUERY:


INSERT INTO collate_test1 VALUES (1, 'abc'), (2, 'äbc'), (3, 'bbc'), (4, 'ABC');
RESULT:
	ERROR - (1146, "Table 'test.collate_test1' doesn't exist")

-----------
QUERY:

INSERT INTO collate_test2 SELECT * FROM collate_test1;
RESULT:
	ERROR - (1146, "Table 'test.collate_test2' doesn't exist")

-----------
QUERY:

INSERT INTO collate_test3 SELECT * FROM collate_test1;
RESULT:
	ERROR - (1146, "Table 'test.collate_test3' doesn't exist")

-----------
QUERY:


SELECT * FROM collate_test1 WHERE b >= 'bbc';
RESULT:
	ERROR - (1146, "Table 'test.collate_test1' doesn't exist")

-----------
QUERY:

SELECT * FROM collate_test2 WHERE b >= 'bbc';
RESULT:
	ERROR - (1146, "Table 'test.collate_test2' doesn't exist")

-----------
QUERY:

SELECT * FROM collate_test3 WHERE b >= 'bbc';
RESULT:
	ERROR - (1146, "Table 'test.collate_test3' doesn't exist")

-----------
QUERY:

SELECT * FROM collate_test3 WHERE b >= 'BBC';
RESULT:
	ERROR - (1146, "Table 'test.collate_test3' doesn't exist")

-----------
QUERY:


SELECT * FROM collate_test1 WHERE b COLLATE "C" >= 'bbc';
RESULT:
	ERROR - (1273, "Unknown collation: 'C'")

-----------
QUERY:

SELECT * FROM collate_test1 WHERE b >= 'bbc' COLLATE "C";
RESULT:
	ERROR - (1273, "Unknown collation: 'C'")

-----------
QUERY:

SELECT * FROM collate_test1 WHERE b COLLATE "C" >= 'bbc' COLLATE "C";
RESULT:
	ERROR - (1273, "Unknown collation: 'C'")

-----------
QUERY:

SELECT * FROM collate_test1 WHERE b COLLATE "C" >= 'bbc' COLLATE "en-x-icu";
RESULT:
	ERROR - (1273, "Unknown collation: 'C'")

-----------
QUERY:



CREATE DOMAIN testdomain_sv AS text COLLATE "sv-x-icu";
RESULT:
	ERROR - (1064, 'You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near \'DOMAIN testdomain_sv AS text COLLATE "sv-x-icu"\' at line 1')

-----------
QUERY:

CREATE DOMAIN testdomain_i AS int COLLATE "sv-x-icu";
RESULT:
	ERROR - (1064, 'You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near \'DOMAIN testdomain_i AS int COLLATE "sv-x-icu"\' at line 1')

-----------
QUERY:
 -- fails
CREATE TABLE collate_test4 (
    a int,
    b testdomain_sv
);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'testdomain_sv\n)' at line 4")

-----------
QUERY:

INSERT INTO collate_test4 SELECT * FROM collate_test1;
RESULT:
	ERROR - (1146, "Table 'test.collate_test4' doesn't exist")

-----------
QUERY:

SELECT a, b FROM collate_test4 ORDER BY b;
RESULT:
	ERROR - (1146, "Table 'test.collate_test4' doesn't exist")

-----------
QUERY:


CREATE TABLE collate_test5 (
    a int,
    b testdomain_sv COLLATE "en-x-icu"
);
RESULT:
	ERROR - (1064, 'You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near \'testdomain_sv COLLATE "en-x-icu"\n)\' at line 3')

-----------
QUERY:

INSERT INTO collate_test5 SELECT * FROM collate_test1;
RESULT:
	ERROR - (1146, "Table 'test.collate_test5' doesn't exist")

-----------
QUERY:

SELECT a, b FROM collate_test5 ORDER BY b;
RESULT:
	ERROR - (1146, "Table 'test.collate_test5' doesn't exist")

-----------
QUERY:



SELECT a, b FROM collate_test1 ORDER BY b;
RESULT:
	ERROR - (1146, "Table 'test.collate_test1' doesn't exist")

-----------
QUERY:

SELECT a, b FROM collate_test2 ORDER BY b;
RESULT:
	ERROR - (1146, "Table 'test.collate_test2' doesn't exist")

-----------
QUERY:

SELECT a, b FROM collate_test3 ORDER BY b;
RESULT:
	ERROR - (1146, "Table 'test.collate_test3' doesn't exist")

-----------
QUERY:


SELECT a, b FROM collate_test1 ORDER BY b COLLATE "C";
RESULT:
	ERROR - (1273, "Unknown collation: 'C'")

-----------
QUERY:


-- star expansion
SELECT * FROM collate_test1 ORDER BY b;
RESULT:
	ERROR - (1146, "Table 'test.collate_test1' doesn't exist")

-----------
QUERY:

SELECT * FROM collate_test2 ORDER BY b;
RESULT:
	ERROR - (1146, "Table 'test.collate_test2' doesn't exist")

-----------
QUERY:

SELECT * FROM collate_test3 ORDER BY b;
RESULT:
	ERROR - (1146, "Table 'test.collate_test3' doesn't exist")

-----------
QUERY:


-- constant expression folding
SELECT 'bbc' COLLATE "en-x-icu" > 'äbc' COLLATE "en-x-icu" AS "true";
RESULT:
	ERROR - (1273, "Unknown collation: 'en-x-icu'")

-----------
QUERY:

SELECT 'bbc' COLLATE "sv-x-icu" > 'äbc' COLLATE "sv-x-icu" AS "false";
RESULT:
	ERROR - (1273, "Unknown collation: 'sv-x-icu'")

-----------
QUERY:


-- upper/lower

CREATE TABLE collate_test10 (
    a int,
    x text COLLATE "en-x-icu",
    y text COLLATE "tr-x-icu"
);
RESULT:
	ERROR - (1273, "Unknown collation: 'en-x-icu'")

-----------
QUERY:


INSERT INTO collate_test10 VALUES (1, 'hij', 'hij'), (2, 'HIJ', 'HIJ');
RESULT:
	ERROR - (1146, "Table 'test.collate_test10' doesn't exist")

-----------
QUERY:


SELECT a, lower(x), lower(y), upper(x), upper(y), initcap(x), initcap(y) FROM collate_test10;
RESULT:
	ERROR - (1146, "Table 'test.collate_test10' doesn't exist")

-----------
QUERY:

SELECT a, lower(x COLLATE "C"), lower(y COLLATE "C") FROM collate_test10;
RESULT:
	ERROR - (1273, "Unknown collation: 'C'")

-----------
QUERY:


SELECT a, x, y FROM collate_test10 ORDER BY lower(y), a;
RESULT:
	ERROR - (1146, "Table 'test.collate_test10' doesn't exist")

-----------
QUERY:


-- LIKE/ILIKE

SELECT * FROM collate_test1 WHERE b LIKE 'abc';
RESULT:
	ERROR - (1146, "Table 'test.collate_test1' doesn't exist")

-----------
QUERY:

SELECT * FROM collate_test1 WHERE b LIKE 'abc%';
RESULT:
	ERROR - (1146, "Table 'test.collate_test1' doesn't exist")

-----------
QUERY:

SELECT * FROM collate_test1 WHERE b LIKE '%bc%';
RESULT:
	ERROR - (1146, "Table 'test.collate_test1' doesn't exist")

-----------
QUERY:

SELECT * FROM collate_test1 WHERE b ILIKE 'abc';
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'ILIKE 'abc'' at line 1")

-----------
QUERY:

SELECT * FROM collate_test1 WHERE b ILIKE 'abc%';
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'ILIKE 'abc%'' at line 1")

-----------
QUERY:

SELECT * FROM collate_test1 WHERE b ILIKE '%bc%';
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'ILIKE '%bc%'' at line 1")

-----------
QUERY:


SELECT 'Türkiye' COLLATE "en-x-icu" ILIKE '%KI%' AS "true";
RESULT:
	ERROR - (1273, "Unknown collation: 'en-x-icu'")

-----------
QUERY:

SELECT 'Türkiye' COLLATE "tr-x-icu" ILIKE '%KI%' AS "false";
RESULT:
	ERROR - (1273, "Unknown collation: 'tr-x-icu'")

-----------
QUERY:


SELECT 'bıt' ILIKE 'BIT' COLLATE "en-x-icu" AS "false";
RESULT:
	ERROR - (1064, 'You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near \'\'BIT\' COLLATE "en-x-icu" AS "false"\' at line 1')

-----------
QUERY:

SELECT 'bıt' ILIKE 'BIT' COLLATE "tr-x-icu" AS "true";
RESULT:
	ERROR - (1064, 'You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near \'\'BIT\' COLLATE "tr-x-icu" AS "true"\' at line 1')

-----------
QUERY:


-- The following actually exercises the selectivity estimation for ILIKE.
SELECT relname FROM pg_class WHERE relname ILIKE 'abc%';
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'ILIKE 'abc%'' at line 2")

-----------
QUERY:


-- regular expressions

SELECT * FROM collate_test1 WHERE b ~ '^abc$';
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '~ '^abc$'' at line 3")

-----------
QUERY:

SELECT * FROM collate_test1 WHERE b ~ '^abc';
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '~ '^abc'' at line 1")

-----------
QUERY:

SELECT * FROM collate_test1 WHERE b ~ 'bc';
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '~ 'bc'' at line 1")

-----------
QUERY:

SELECT * FROM collate_test1 WHERE b ~* '^abc$';
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '~* '^abc$'' at line 1")

-----------
QUERY:

SELECT * FROM collate_test1 WHERE b ~* '^abc';
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '~* '^abc'' at line 1")

-----------
QUERY:

SELECT * FROM collate_test1 WHERE b ~* 'bc';
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '~* 'bc'' at line 1")

-----------
QUERY:


CREATE TABLE collate_test6 (
    a int,
    b text COLLATE "en-x-icu"
);
RESULT:
	ERROR - (1273, "Unknown collation: 'en-x-icu'")

-----------
QUERY:

INSERT INTO collate_test6 VALUES (1, 'abc'), (2, 'ABC'), (3, '123'), (4, 'ab1'),
                                 (5, 'a1!'), (6, 'a c'), (7, '!.;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ''!.' at line 2")

-----------
QUERY:
'), (8, '   '),
                                 (9, 'äbç'), (10, 'ÄBÇ');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ''), (8, '   '),\n                                 (9, 'äbç'), (10, 'ÄBÇ')' at line 1")

-----------
QUERY:

SELECT b,
       b ~ '^[[:alpha:]]+$' AS is_alpha,
       b ~ '^[[:upper:]]+$' AS is_upper,
       b ~ '^[[:lower:]]+$' AS is_lower,
       b ~ '^[[:digit:]]+$' AS is_digit,
       b ~ '^[[:alnum:]]+$' AS is_alnum,
       b ~ '^[[:graph:]]+$' AS is_graph,
       b ~ '^[[:print:]]+$' AS is_print,
       b ~ '^[[:punct:]]+$' AS is_punct,
       b ~ '^[[:space:]]+$' AS is_space
FROM collate_test6;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '~ '^[[:alpha:]]+$' AS is_alpha,\n       b ~ '^[[:upper:]]+$' AS is_upper,\n       ' at line 2")

-----------
QUERY:


SELECT 'Türkiye' COLLATE "en-x-icu" ~* 'KI' AS "true";
RESULT:
	ERROR - (1273, "Unknown collation: 'en-x-icu'")

-----------
QUERY:

SELECT 'Türkiye' COLLATE "tr-x-icu" ~* 'KI' AS "true";
RESULT:
	ERROR - (1273, "Unknown collation: 'tr-x-icu'")

-----------
QUERY:
  -- true with ICU

SELECT 'bıt' ~* 'BIT' COLLATE "en-x-icu" AS "false";
RESULT:
	ERROR - (1064, 'You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near \'~* \'BIT\' COLLATE "en-x-icu" AS "false"\' at line 3')

-----------
QUERY:

SELECT 'bıt' ~* 'BIT' COLLATE "tr-x-icu" AS "false";
RESULT:
	ERROR - (1064, 'You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near \'~* \'BIT\' COLLATE "tr-x-icu" AS "false"\' at line 1')

-----------
QUERY:
  -- false with ICU

-- The following actually exercises the selectivity estimation for ~*.
SELECT relname FROM pg_class WHERE relname ~* '^abc';
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '~* '^abc'' at line 4")

-----------
QUERY:



/* not run by default because it requires tr_TR system locale
-- to_char

SET lc_time TO 'tr_TR';
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '/* not run by default because it requires tr_TR system locale\n-- to_char\n\nSET lc' at line 1")

-----------
QUERY:

SELECT to_char(date '2010-04-01', 'DD TMMON YYYY');
RESULT:
	ERROR - (1305, 'FUNCTION test.to_char does not exist')

-----------
QUERY:

SELECT to_char(date '2010-04-01', 'DD TMMON YYYY' COLLATE "tr-x-icu");
RESULT:
	ERROR - (1273, "Unknown collation: 'tr-x-icu'")

-----------
QUERY:

*/


-- backwards parsing

CREATE VIEW collview1 AS SELECT * FROM collate_test1 WHERE b COLLATE "C" >= 'bbc';
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '*/\n\n\n-- backwards parsing\n\nCREATE VIEW collview1 AS SELECT * FROM collate_test1 ' at line 1")

-----------
QUERY:

CREATE VIEW collview2 AS SELECT a, b FROM collate_test1 ORDER BY b COLLATE "C";
RESULT:
	ERROR - (1273, "Unknown collation: 'C'")

-----------
QUERY:

CREATE VIEW collview3 AS SELECT a, lower((x || x) COLLATE "C") FROM collate_test10;
RESULT:
	ERROR - (1273, "Unknown collation: 'C'")

-----------
QUERY:


SELECT table_name, view_definition FROM information_schema.views
  WHERE table_name LIKE 'collview%' ORDER BY 1;
RESULT:
	()

-----------
QUERY:



-- collation propagation in various expression types

SELECT a, coalesce(b, 'foo') FROM collate_test1 ORDER BY 2;
RESULT:
	ERROR - (1146, "Table 'test.collate_test1' doesn't exist")

-----------
QUERY:

SELECT a, coalesce(b, 'foo') FROM collate_test2 ORDER BY 2;
RESULT:
	ERROR - (1146, "Table 'test.collate_test2' doesn't exist")

-----------
QUERY:

SELECT a, coalesce(b, 'foo') FROM collate_test3 ORDER BY 2;
RESULT:
	ERROR - (1146, "Table 'test.collate_test3' doesn't exist")

-----------
QUERY:

SELECT a, lower(coalesce(x, 'foo')), lower(coalesce(y, 'foo')) FROM collate_test10;
RESULT:
	ERROR - (1146, "Table 'test.collate_test10' doesn't exist")

-----------
QUERY:


SELECT a, b, greatest(b, 'CCC') FROM collate_test1 ORDER BY 3;
RESULT:
	ERROR - (1146, "Table 'test.collate_test1' doesn't exist")

-----------
QUERY:

SELECT a, b, greatest(b, 'CCC') FROM collate_test2 ORDER BY 3;
RESULT:
	ERROR - (1146, "Table 'test.collate_test2' doesn't exist")

-----------
QUERY:

SELECT a, b, greatest(b, 'CCC') FROM collate_test3 ORDER BY 3;
RESULT:
	ERROR - (1146, "Table 'test.collate_test3' doesn't exist")

-----------
QUERY:

SELECT a, x, y, lower(greatest(x, 'foo')), lower(greatest(y, 'foo')) FROM collate_test10;
RESULT:
	ERROR - (1146, "Table 'test.collate_test10' doesn't exist")

-----------
QUERY:


SELECT a, nullif(b, 'abc') FROM collate_test1 ORDER BY 2;
RESULT:
	ERROR - (1146, "Table 'test.collate_test1' doesn't exist")

-----------
QUERY:

SELECT a, nullif(b, 'abc') FROM collate_test2 ORDER BY 2;
RESULT:
	ERROR - (1146, "Table 'test.collate_test2' doesn't exist")

-----------
QUERY:

SELECT a, nullif(b, 'abc') FROM collate_test3 ORDER BY 2;
RESULT:
	ERROR - (1146, "Table 'test.collate_test3' doesn't exist")

-----------
QUERY:

SELECT a, lower(nullif(x, 'foo')), lower(nullif(y, 'foo')) FROM collate_test10;
RESULT:
	ERROR - (1146, "Table 'test.collate_test10' doesn't exist")

-----------
QUERY:


SELECT a, CASE b WHEN 'abc' THEN 'abcd' ELSE b END FROM collate_test1 ORDER BY 2;
RESULT:
	ERROR - (1146, "Table 'test.collate_test1' doesn't exist")

-----------
QUERY:

SELECT a, CASE b WHEN 'abc' THEN 'abcd' ELSE b END FROM collate_test2 ORDER BY 2;
RESULT:
	ERROR - (1146, "Table 'test.collate_test2' doesn't exist")

-----------
QUERY:

SELECT a, CASE b WHEN 'abc' THEN 'abcd' ELSE b END FROM collate_test3 ORDER BY 2;
RESULT:
	ERROR - (1146, "Table 'test.collate_test3' doesn't exist")

-----------
QUERY:


CREATE DOMAIN testdomain AS text;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'DOMAIN testdomain AS text' at line 1")

-----------
QUERY:

SELECT a, b::testdomain FROM collate_test1 ORDER BY 2;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::testdomain FROM collate_test1 ORDER BY 2' at line 1")

-----------
QUERY:

SELECT a, b::testdomain FROM collate_test2 ORDER BY 2;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::testdomain FROM collate_test2 ORDER BY 2' at line 1")

-----------
QUERY:

SELECT a, b::testdomain FROM collate_test3 ORDER BY 2;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::testdomain FROM collate_test3 ORDER BY 2' at line 1")

-----------
QUERY:

SELECT a, b::testdomain_sv FROM collate_test3 ORDER BY 2;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::testdomain_sv FROM collate_test3 ORDER BY 2' at line 1")

-----------
QUERY:

SELECT a, lower(x::testdomain), lower(y::testdomain) FROM collate_test10;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::testdomain), lower(y::testdomain) FROM collate_test10' at line 1")

-----------
QUERY:


SELECT min(b), max(b) FROM collate_test1;
RESULT:
	ERROR - (1146, "Table 'test.collate_test1' doesn't exist")

-----------
QUERY:

SELECT min(b), max(b) FROM collate_test2;
RESULT:
	ERROR - (1146, "Table 'test.collate_test2' doesn't exist")

-----------
QUERY:

SELECT min(b), max(b) FROM collate_test3;
RESULT:
	ERROR - (1146, "Table 'test.collate_test3' doesn't exist")

-----------
QUERY:


SELECT array_agg(b ORDER BY b) FROM collate_test1;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'ORDER BY b) FROM collate_test1' at line 1")

-----------
QUERY:

SELECT array_agg(b ORDER BY b) FROM collate_test2;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'ORDER BY b) FROM collate_test2' at line 1")

-----------
QUERY:

SELECT array_agg(b ORDER BY b) FROM collate_test3;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'ORDER BY b) FROM collate_test3' at line 1")

-----------
QUERY:


SELECT a, b FROM collate_test1 UNION ALL SELECT a, b FROM collate_test1 ORDER BY 2;
RESULT:
	ERROR - (1146, "Table 'test.collate_test1' doesn't exist")

-----------
QUERY:

SELECT a, b FROM collate_test2 UNION SELECT a, b FROM collate_test2 ORDER BY 2;
RESULT:
	ERROR - (1146, "Table 'test.collate_test2' doesn't exist")

-----------
QUERY:

SELECT a, b FROM collate_test3 WHERE a < 4 INTERSECT SELECT a, b FROM collate_test3 WHERE a > 1 ORDER BY 2;
RESULT:
	ERROR - (1146, "Table 'test.collate_test3' doesn't exist")

-----------
QUERY:

SELECT a, b FROM collate_test3 EXCEPT SELECT a, b FROM collate_test3 WHERE a < 2 ORDER BY 2;
RESULT:
	ERROR - (1146, "Table 'test.collate_test3' doesn't exist")

-----------
QUERY:


SELECT a, b FROM collate_test1 UNION ALL SELECT a, b FROM collate_test3 ORDER BY 2;
RESULT:
	ERROR - (1146, "Table 'test.collate_test1' doesn't exist")

-----------
QUERY:
 -- fail
SELECT a, b FROM collate_test1 UNION ALL SELECT a, b FROM collate_test3;
RESULT:
	ERROR - (1146, "Table 'test.collate_test1' doesn't exist")

-----------
QUERY:
 -- ok
SELECT a, b FROM collate_test1 UNION SELECT a, b FROM collate_test3 ORDER BY 2;
RESULT:
	ERROR - (1146, "Table 'test.collate_test1' doesn't exist")

-----------
QUERY:
 -- fail
SELECT a, b COLLATE "C" FROM collate_test1 UNION SELECT a, b FROM collate_test3 ORDER BY 2;
RESULT:
	ERROR - (1273, "Unknown collation: 'C'")

-----------
QUERY:
 -- ok
SELECT a, b FROM collate_test1 INTERSECT SELECT a, b FROM collate_test3 ORDER BY 2;
RESULT:
	ERROR - (1146, "Table 'test.collate_test1' doesn't exist")

-----------
QUERY:
 -- fail
SELECT a, b FROM collate_test1 EXCEPT SELECT a, b FROM collate_test3 ORDER BY 2;
RESULT:
	ERROR - (1146, "Table 'test.collate_test1' doesn't exist")

-----------
QUERY:
 -- fail

CREATE TABLE test_u AS SELECT a, b FROM collate_test1 UNION ALL SELECT a, b FROM collate_test3;
RESULT:
	ERROR - (1146, "Table 'test.collate_test1' doesn't exist")

-----------
QUERY:
 -- fail

-- ideally this would be a parse-time error, but for now it must be run-time:
select x < y from collate_test10;
RESULT:
	ERROR - (1146, "Table 'test.collate_test10' doesn't exist")

-----------
QUERY:
 -- fail
select x || y from collate_test10;
RESULT:
	ERROR - (1146, "Table 'test.collate_test10' doesn't exist")

-----------
QUERY:
 -- ok, because || is not collation aware
select x, y from collate_test10 order by x || y;
RESULT:
	ERROR - (1146, "Table 'test.collate_test10' doesn't exist")

-----------
QUERY:
 -- not so ok

-- collation mismatch between recursive and non-recursive term
WITH RECURSIVE foo(x) AS
   (SELECT x FROM (VALUES('a' COLLATE "en-x-icu"),('b')) t(x)
   UNION ALL
   SELECT (x || 'c') COLLATE "de-x-icu" FROM foo WHERE length(x) < 10)
SELECT * FROM foo;
RESULT:
	ERROR - (1064, 'You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near \'(\'a\' COLLATE "en-x-icu"),(\'b\')) t(x)\n   UNION ALL\n   SELECT (x || \'c\') COLLATE "\' at line 5')

-----------
QUERY:



-- casting

SELECT CAST('42' AS text COLLATE "C");
RESULT:
	ERROR - (1064, 'You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near \'text COLLATE "C")\' at line 3')

-----------
QUERY:


SELECT a, CAST(b AS varchar) FROM collate_test1 ORDER BY 2;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'varchar) FROM collate_test1 ORDER BY 2' at line 1")

-----------
QUERY:

SELECT a, CAST(b AS varchar) FROM collate_test2 ORDER BY 2;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'varchar) FROM collate_test2 ORDER BY 2' at line 1")

-----------
QUERY:

SELECT a, CAST(b AS varchar) FROM collate_test3 ORDER BY 2;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'varchar) FROM collate_test3 ORDER BY 2' at line 1")

-----------
QUERY:



-- propagation of collation in SQL functions (inlined and non-inlined cases)
-- and plpgsql functions too

CREATE FUNCTION mylt (text, text) RETURNS boolean LANGUAGE sql
    AS $$ select $1 < $2 $$;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ', text) RETURNS boolean LANGUAGE sql\n    AS $$ select $1 < $2 $$' at line 4")

-----------
QUERY:


CREATE FUNCTION mylt_noninline (text, text) RETURNS boolean LANGUAGE sql
    AS $$ select $1 < $2 limit 1 $$;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ', text) RETURNS boolean LANGUAGE sql\n    AS $$ select $1 < $2 limit 1 $$' at line 1")

-----------
QUERY:


CREATE FUNCTION mylt_plpgsql (text, text) RETURNS boolean LANGUAGE plpgsql
    AS $$ begin return $1 < $2; end $$;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ', text) RETURNS boolean LANGUAGE plpgsql\n    AS $$ begin return $1 < $2; end $$' at line 1")

-----------
QUERY:


SELECT a.b AS a, b.b AS b, a.b < b.b AS lt,
       mylt(a.b, b.b), mylt_noninline(a.b, b.b), mylt_plpgsql(a.b, b.b)
FROM collate_test1 a, collate_test1 b
ORDER BY a.b, b.b;
RESULT:
	ERROR - (1146, "Table 'test.collate_test1' doesn't exist")

-----------
QUERY:


SELECT a.b AS a, b.b AS b, a.b < b.b COLLATE "C" AS lt,
       mylt(a.b, b.b COLLATE "C"), mylt_noninline(a.b, b.b COLLATE "C"),
       mylt_plpgsql(a.b, b.b COLLATE "C")
FROM collate_test1 a, collate_test1 b
ORDER BY a.b, b.b;
RESULT:
	ERROR - (1273, "Unknown collation: 'C'")

-----------
QUERY:



-- collation override in plpgsql

CREATE FUNCTION mylt2 (x text, y text) RETURNS boolean LANGUAGE plpgsql AS $$
declare
  xx text := x;
  yy text := y;
begin
  return xx < yy;
end
$$;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'plpgsql AS $$\ndeclare\n  xx text := x;\n  yy text := y;\nbegin\n  return xx < yy;\nen' at line 3")

-----------
QUERY:


SELECT mylt2('a', 'B' collate "en-x-icu") as t, mylt2('a', 'B' collate "C") as f;
RESULT:
	ERROR - (1273, "Unknown collation: 'en-x-icu'")

-----------
QUERY:


CREATE OR REPLACE FUNCTION
  mylt2 (x text, y text) RETURNS boolean LANGUAGE plpgsql AS $$
declare
  xx text COLLATE "POSIX" := x;
  yy text := y;
begin
  return xx < yy;
end
$$;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'FUNCTION\n  mylt2 (x text, y text) RETURNS boolean LANGUAGE plpgsql AS $$\ndeclare' at line 1")

-----------
QUERY:


SELECT mylt2('a', 'B') as f;
RESULT:
	ERROR - (1305, 'FUNCTION test.mylt2 does not exist')

-----------
QUERY:

SELECT mylt2('a', 'B' collate "C") as fail;
RESULT:
	ERROR - (1273, "Unknown collation: 'C'")

-----------
QUERY:
 -- conflicting collations
SELECT mylt2('a', 'B' collate "POSIX") as f;
RESULT:
	ERROR - (1273, "Unknown collation: 'POSIX'")

-----------
QUERY:



-- polymorphism

SELECT * FROM unnest((SELECT array_agg(b ORDER BY b) FROM collate_test1)) ORDER BY 1;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '((SELECT array_agg(b ORDER BY b) FROM collate_test1)) ORDER BY 1' at line 3")

-----------
QUERY:

SELECT * FROM unnest((SELECT array_agg(b ORDER BY b) FROM collate_test2)) ORDER BY 1;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '((SELECT array_agg(b ORDER BY b) FROM collate_test2)) ORDER BY 1' at line 1")

-----------
QUERY:

SELECT * FROM unnest((SELECT array_agg(b ORDER BY b) FROM collate_test3)) ORDER BY 1;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '((SELECT array_agg(b ORDER BY b) FROM collate_test3)) ORDER BY 1' at line 1")

-----------
QUERY:


CREATE FUNCTION dup (anyelement) RETURNS anyelement
    AS 'select $1' LANGUAGE sql;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ') RETURNS anyelement\n    AS 'select $1' LANGUAGE sql' at line 1")

-----------
QUERY:


SELECT a, dup(b) FROM collate_test1 ORDER BY 2;
RESULT:
	ERROR - (1146, "Table 'test.collate_test1' doesn't exist")

-----------
QUERY:

SELECT a, dup(b) FROM collate_test2 ORDER BY 2;
RESULT:
	ERROR - (1146, "Table 'test.collate_test2' doesn't exist")

-----------
QUERY:

SELECT a, dup(b) FROM collate_test3 ORDER BY 2;
RESULT:
	ERROR - (1146, "Table 'test.collate_test3' doesn't exist")

-----------
QUERY:



-- indexes

CREATE INDEX collate_test1_idx1 ON collate_test1 (b);
RESULT:
	ERROR - (1146, "Table 'test.collate_test1' doesn't exist")

-----------
QUERY:

CREATE INDEX collate_test1_idx2 ON collate_test1 (b COLLATE "C");
RESULT:
	ERROR - (1064, 'You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near \'COLLATE "C")\' at line 1')

-----------
QUERY:

CREATE INDEX collate_test1_idx3 ON collate_test1 ((b COLLATE "C"));
RESULT:
	ERROR - (1273, "Unknown collation: 'C'")

-----------
QUERY:
 -- this is different grammatically
CREATE INDEX collate_test1_idx4 ON collate_test1 (((b||'foo') COLLATE "POSIX"));
RESULT:
	ERROR - (1273, "Unknown collation: 'POSIX'")

-----------
QUERY:


CREATE INDEX collate_test1_idx5 ON collate_test1 (a COLLATE "C");
RESULT:
	ERROR - (1064, 'You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near \'COLLATE "C")\' at line 1')

-----------
QUERY:
 -- fail
CREATE INDEX collate_test1_idx6 ON collate_test1 ((a COLLATE "C"));
RESULT:
	ERROR - (1273, "Unknown collation: 'C'")

-----------
QUERY:
 -- fail

SELECT relname, pg_get_indexdef(oid) FROM pg_class WHERE relname LIKE 'collate_test%_idx%' ORDER BY 1;
RESULT:
	ERROR - (1146, "Table 'test.pg_class' doesn't exist")

-----------
QUERY:


set enable_seqscan = off;
RESULT:
	ERROR - (1193, "Unknown system variable 'enable_seqscan'")

-----------
QUERY:

explain (costs off)
select * from collate_test1 where b ilike 'abc';
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off)\nselect * from collate_test1 where b ilike 'abc'' at line 1")

-----------
QUERY:

select * from collate_test1 where b ilike 'abc';
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'ilike 'abc'' at line 1")

-----------
QUERY:

explain (costs off)
select * from collate_test1 where b ilike 'ABC';
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off)\nselect * from collate_test1 where b ilike 'ABC'' at line 1")

-----------
QUERY:

select * from collate_test1 where b ilike 'ABC';
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'ilike 'ABC'' at line 1")

-----------
QUERY:

reset enable_seqscan;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'enable_seqscan' at line 1")

-----------
QUERY:



-- schema manipulation commands

CREATE ROLE regress_test_role;
RESULT:
	[]

-----------
QUERY:

CREATE SCHEMA test_schema;
RESULT:
	[]

-----------
QUERY:


-- We need to do this this way to cope with varying names for encodings:
SET client_min_messages TO WARNING;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'TO WARNING' at line 2")

-----------
QUERY:

SET icu_validation_level = disabled;
RESULT:
	ERROR - (1193, "Unknown system variable 'icu_validation_level'")

-----------
QUERY:


do $$
BEGIN
  EXECUTE 'CREATE COLLATION test0 (provider = icu, locale = ' ||
          quote_literal((SELECT CASE WHEN datlocprovider='i' THEN datlocale ELSE datcollate END FROM pg_database WHERE datname = current_database())) || ');';
END
$$;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'EXECUTE 'CREATE COLLATION test0 (provider = icu, locale = ' ||\n          quote_l' at line 3")

-----------
QUERY:

CREATE COLLATION test0 FROM "C";
RESULT:
	ERROR - (1064, 'You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near \'COLLATION test0 FROM "C"\' at line 1')

-----------
QUERY:
 -- fail, duplicate name
do $$
BEGIN
  EXECUTE 'CREATE COLLATION test1 (provider = icu, locale = ' ||
          quote_literal((SELECT CASE WHEN datlocprovider='i' THEN datlocale ELSE datcollate END FROM pg_database WHERE datname = current_database())) || ');';
END
$$;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'EXECUTE 'CREATE COLLATION test1 (provider = icu, locale = ' ||\n          quote_l' at line 4")

-----------
QUERY:


RESET icu_validation_level;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'icu_validation_level' at line 1")

-----------
QUERY:

RESET client_min_messages;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'client_min_messages' at line 1")

-----------
QUERY:


CREATE COLLATION test3 (provider = icu, lc_collate = 'en_US.utf8');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'COLLATION test3 (provider = icu, lc_collate = 'en_US.utf8')' at line 1")

-----------
QUERY:
 -- fail, needs /* REPLACED */ ''locale/* REPLACED */ ''
SET icu_validation_level = ERROR;
RESULT:
	ERROR - (1193, "Unknown system variable 'icu_validation_level'")

-----------
QUERY:

CREATE COLLATION testx (provider = icu, locale = 'nonsense-nowhere');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'COLLATION testx (provider = icu, locale = 'nonsense-nowhere')' at line 1")

-----------
QUERY:
 -- fails
CREATE COLLATION testx (provider = icu, locale = '@colStrength=primary;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'COLLATION testx (provider = icu, locale = '@colStrength=primary' at line 2")

-----------
QUERY:
nonsense=yes');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'nonsense=yes')' at line 1")

-----------
QUERY:
 -- fails
RESET icu_validation_level;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'icu_validation_level' at line 2")

-----------
QUERY:

CREATE COLLATION testx (provider = icu, locale = '@colStrength=primary;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'COLLATION testx (provider = icu, locale = '@colStrength=primary' at line 1")

-----------
QUERY:
nonsense=yes');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'nonsense=yes')' at line 1")

-----------
QUERY:
 DROP COLLATION testx;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'COLLATION testx' at line 1")

-----------
QUERY:

CREATE COLLATION testx (provider = icu, locale = 'nonsense-nowhere');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'COLLATION testx (provider = icu, locale = 'nonsense-nowhere')' at line 1")

-----------
QUERY:
 DROP COLLATION testx;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'COLLATION testx' at line 1")

-----------
QUERY:


CREATE COLLATION test4 FROM nonsense;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'COLLATION test4 FROM nonsense' at line 1")

-----------
QUERY:

CREATE COLLATION test5 FROM test0;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'COLLATION test5 FROM test0' at line 1")

-----------
QUERY:


SELECT collname FROM pg_collation WHERE collname LIKE 'test%' ORDER BY 1;
RESULT:
	ERROR - (1146, "Table 'test.pg_collation' doesn't exist")

-----------
QUERY:


ALTER COLLATION test1 RENAME TO test11;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'COLLATION test1 RENAME TO test11' at line 1")

-----------
QUERY:

ALTER COLLATION test0 RENAME TO test11;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'COLLATION test0 RENAME TO test11' at line 1")

-----------
QUERY:
 -- fail
ALTER COLLATION test1 RENAME TO test22;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'COLLATION test1 RENAME TO test22' at line 2")

-----------
QUERY:
 -- fail

ALTER COLLATION test11 OWNER TO regress_test_role;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'COLLATION test11 OWNER TO regress_test_role' at line 3")

-----------
QUERY:

ALTER COLLATION test11 OWNER TO nonsense;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'COLLATION test11 OWNER TO nonsense' at line 1")

-----------
QUERY:

ALTER COLLATION test11 SET SCHEMA test_schema;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'COLLATION test11 SET SCHEMA test_schema' at line 1")

-----------
QUERY:


COMMENT ON COLLATION test0 IS 'US English';
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'COMMENT ON COLLATION test0 IS 'US English'' at line 1")

-----------
QUERY:


SELECT collname, nspname, obj_description(pg_collation.oid, 'pg_collation')
    FROM pg_collation JOIN pg_namespace ON (collnamespace = pg_namespace.oid)
    WHERE collname LIKE 'test%'
    ORDER BY 1;
RESULT:
	ERROR - (1146, "Table 'test.pg_collation' doesn't exist")

-----------
QUERY:


DROP COLLATION test0, test_schema.test11, test5;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'COLLATION test0, test_schema.test11, test5' at line 1")

-----------
QUERY:

DROP COLLATION test0;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'COLLATION test0' at line 1")

-----------
QUERY:
 -- fail
DROP COLLATION IF EXISTS test0;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'COLLATION IF EXISTS test0' at line 2")

-----------
QUERY:


SELECT collname FROM pg_collation WHERE collname LIKE 'test%';
RESULT:
	ERROR - (1146, "Table 'test.pg_collation' doesn't exist")

-----------
QUERY:


DROP SCHEMA test_schema;
RESULT:
	[]

-----------
QUERY:

DROP ROLE regress_test_role;
RESULT:
	[]

-----------
QUERY:



-- ALTER

ALTER COLLATION "en-x-icu" REFRESH VERSION;
RESULT:
	ERROR - (1064, 'You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near \'COLLATION "en-x-icu" REFRESH VERSION\' at line 3')

-----------
QUERY:


-- also test for database while we are here
SELECT current_database() AS datname \gset
ALTER DATABASE :"datname" REFRESH COLLATION VERSION;
RESULT:
	ERROR - (1064, 'You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near \'\\gset\nALTER DATABASE :"datname" REFRESH COLLATION VERSION\' at line 2')

-----------
QUERY:



-- dependencies

CREATE COLLATION test0 FROM "C";
RESULT:
	ERROR - (1064, 'You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near \'COLLATION test0 FROM "C"\' at line 3')

-----------
QUERY:


CREATE TABLE collate_dep_test1 (a int, b text COLLATE test0);
RESULT:
	ERROR - (1273, "Unknown collation: 'test0'")

-----------
QUERY:

CREATE DOMAIN collate_dep_dom1 AS text COLLATE test0;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'DOMAIN collate_dep_dom1 AS text COLLATE test0' at line 1")

-----------
QUERY:

CREATE TYPE collate_dep_test2 AS (x int, y text COLLATE test0);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'TYPE collate_dep_test2 AS (x int, y text COLLATE test0)' at line 1")

-----------
QUERY:

CREATE VIEW collate_dep_test3 AS SELECT text 'foo' COLLATE test0 AS foo;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'COLLATE test0 AS foo' at line 1")

-----------
QUERY:

CREATE TABLE collate_dep_test4t (a int, b text);
RESULT:
	[]

-----------
QUERY:

CREATE INDEX collate_dep_test4i ON collate_dep_test4t (b COLLATE test0);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'COLLATE test0)' at line 1")

-----------
QUERY:


DROP COLLATION test0 RESTRICT;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'COLLATION test0 RESTRICT' at line 1")

-----------
QUERY:
 -- fail
DROP COLLATION test0 CASCADE;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'COLLATION test0 CASCADE' at line 2")

-----------
QUERY:


-- \d collate_dep_test1
-- \d collate_dep_test2

DROP TABLE collate_dep_test1, collate_dep_test4t;
RESULT:
	ERROR - (1051, "Unknown table 'test.collate_dep_test1'")

-----------
QUERY:

DROP TYPE collate_dep_test2;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'TYPE collate_dep_test2' at line 1")

-----------
QUERY:


-- test range types and collations

create type textrange_c as range(subtype=text, collation="C");
RESULT:
	ERROR - (1064, 'You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near \'type textrange_c as range(subtype=text, collation="C")\' at line 3')

-----------
QUERY:

create type textrange_en_us as range(subtype=text, collation="en-x-icu");
RESULT:
	ERROR - (1064, 'You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near \'type textrange_en_us as range(subtype=text, collation="en-x-icu")\' at line 1')

-----------
QUERY:


select textrange_c('A','Z') @> 'b'::text;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '@> 'b'::text' at line 1")

-----------
QUERY:

select textrange_en_us('A','Z') @> 'b'::text;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '@> 'b'::text' at line 1")

-----------
QUERY:


drop type textrange_c;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'type textrange_c' at line 1")

-----------
QUERY:

drop type textrange_en_us;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'type textrange_en_us' at line 1")

-----------
QUERY:



-- standard collations

SELECT * FROM collate_test2 ORDER BY b COLLATE UCS_BASIC;
RESULT:
	ERROR - (1273, "Unknown collation: 'UCS_BASIC'")

-----------
QUERY:

SELECT * FROM collate_test2 ORDER BY b COLLATE UNICODE;
RESULT:
	ERROR - (1273, "Unknown collation: 'UNICODE'")

-----------
QUERY:



-- test ICU collation customization

-- test the attributes handled by icu_set_collation_attributes()

SET client_min_messages=WARNING;
RESULT:
	ERROR - (1193, "Unknown system variable 'client_min_messages'")

-----------
QUERY:

CREATE COLLATION testcoll_ignore_accents (provider = icu, locale = '@colStrength=primary;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'COLLATION testcoll_ignore_accents (provider = icu, locale = '@colStrength=primar' at line 1")

-----------
QUERY:
colCaseLevel=yes');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'colCaseLevel=yes')' at line 1")

-----------
QUERY:

RESET client_min_messages;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'client_min_messages' at line 1")

-----------
QUERY:

SELECT 'aaá' > 'AAA' COLLATE "und-x-icu", 'aaá' < 'AAA' COLLATE testcoll_ignore_accents;
RESULT:
	ERROR - (1273, "Unknown collation: 'und-x-icu'")

-----------
QUERY:


SET client_min_messages=WARNING;
RESULT:
	ERROR - (1193, "Unknown system variable 'client_min_messages'")

-----------
QUERY:

CREATE COLLATION testcoll_backwards (provider = icu, locale = '@colBackwards=yes');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'COLLATION testcoll_backwards (provider = icu, locale = '@colBackwards=yes')' at line 1")

-----------
QUERY:

RESET client_min_messages;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'client_min_messages' at line 1")

-----------
QUERY:

SELECT 'coté' < 'côte' COLLATE "und-x-icu", 'coté' > 'côte' COLLATE testcoll_backwards;
RESULT:
	ERROR - (1273, "Unknown collation: 'und-x-icu'")

-----------
QUERY:


CREATE COLLATION testcoll_lower_first (provider = icu, locale = '@colCaseFirst=lower');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'COLLATION testcoll_lower_first (provider = icu, locale = '@colCaseFirst=lower')' at line 1")

-----------
QUERY:

CREATE COLLATION testcoll_upper_first (provider = icu, locale = '@colCaseFirst=upper');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'COLLATION testcoll_upper_first (provider = icu, locale = '@colCaseFirst=upper')' at line 1")

-----------
QUERY:

SELECT 'aaa' < 'AAA' COLLATE testcoll_lower_first, 'aaa' > 'AAA' COLLATE testcoll_upper_first;
RESULT:
	ERROR - (1273, "Unknown collation: 'testcoll_lower_first'")

-----------
QUERY:


CREATE COLLATION testcoll_shifted (provider = icu, locale = '@colAlternate=shifted');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'COLLATION testcoll_shifted (provider = icu, locale = '@colAlternate=shifted')' at line 1")

-----------
QUERY:

SELECT 'de-luge' < 'deanza' COLLATE "und-x-icu", 'de-luge' > 'deanza' COLLATE testcoll_shifted;
RESULT:
	ERROR - (1273, "Unknown collation: 'und-x-icu'")

-----------
QUERY:


SET client_min_messages=WARNING;
RESULT:
	ERROR - (1193, "Unknown system variable 'client_min_messages'")

-----------
QUERY:

CREATE COLLATION testcoll_numeric (provider = icu, locale = '@colNumeric=yes');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'COLLATION testcoll_numeric (provider = icu, locale = '@colNumeric=yes')' at line 1")

-----------
QUERY:

RESET client_min_messages;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'client_min_messages' at line 1")

-----------
QUERY:

SELECT 'A-21' > 'A-123' COLLATE "und-x-icu", 'A-21' < 'A-123' COLLATE testcoll_numeric;
RESULT:
	ERROR - (1273, "Unknown collation: 'und-x-icu'")

-----------
QUERY:


CREATE COLLATION testcoll_error1 (provider = icu, locale = '@colNumeric=lower');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'COLLATION testcoll_error1 (provider = icu, locale = '@colNumeric=lower')' at line 1")

-----------
QUERY:


-- test that attributes not handled by icu_set_collation_attributes()
-- (handled by ucol_open() directly) also work
CREATE COLLATION testcoll_de_phonebook (provider = icu, locale = 'de@collation=phonebook');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'COLLATION testcoll_de_phonebook (provider = icu, locale = 'de@collation=phoneboo' at line 3")

-----------
QUERY:

SELECT 'Goldmann' < 'Götz' COLLATE "de-x-icu", 'Goldmann' > 'Götz' COLLATE testcoll_de_phonebook;
RESULT:
	ERROR - (1273, "Unknown collation: 'de-x-icu'")

-----------
QUERY:



-- rules

CREATE COLLATION testcoll_rules1 (provider = icu, locale = '', rules = '&a < g');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'COLLATION testcoll_rules1 (provider = icu, locale = '', rules = '&a < g')' at line 3")

-----------
QUERY:

CREATE TABLE test7 (a text);
RESULT:
	[]

-----------
QUERY:

-- example from https://unicode-org.github.io/icu/userguide/collation/customization/#syntax
INSERT INTO test7 VALUES ('Abernathy'), ('apple'), ('bird'), ('Boston'), ('Graham'), ('green');
RESULT:
	[]

-----------
QUERY:

SELECT * FROM test7 ORDER BY a COLLATE "en-x-icu";
RESULT:
	ERROR - (1273, "Unknown collation: 'en-x-icu'")

-----------
QUERY:

SELECT * FROM test7 ORDER BY a COLLATE testcoll_rules1;
RESULT:
	ERROR - (1273, "Unknown collation: 'testcoll_rules1'")

-----------
QUERY:

DROP TABLE test7;
RESULT:
	[]

-----------
QUERY:


CREATE COLLATION testcoll_rulesx (provider = icu, locale = '', rules = '!!wrong!!');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'COLLATION testcoll_rulesx (provider = icu, locale = '', rules = '!!wrong!!')' at line 1")

-----------
QUERY:



-- nondeterministic collations

CREATE COLLATION ctest_det (provider = icu, locale = '', deterministic = true);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'COLLATION ctest_det (provider = icu, locale = '', deterministic = true)' at line 3")

-----------
QUERY:

CREATE COLLATION ctest_nondet (provider = icu, locale = '', deterministic = false);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'COLLATION ctest_nondet (provider = icu, locale = '', deterministic = false)' at line 1")

-----------
QUERY:


CREATE TABLE test6 (a int, b text);
RESULT:
	[]

-----------
QUERY:

-- same string in different normal forms
INSERT INTO test6 VALUES (1, U&'\00E4bc');
RESULT:
	ERROR - (1054, "Unknown column 'U' in 'field list'")

-----------
QUERY:

INSERT INTO test6 VALUES (2, U&'\0061\0308bc');
RESULT:
	ERROR - (1054, "Unknown column 'U' in 'field list'")

-----------
QUERY:

SELECT * FROM test6;
RESULT:
	()

-----------
QUERY:

SELECT * FROM test6 WHERE b = 'äbc' COLLATE ctest_det;
RESULT:
	ERROR - (1273, "Unknown collation: 'ctest_det'")

-----------
QUERY:

SELECT * FROM test6 WHERE b = 'äbc' COLLATE ctest_nondet;
RESULT:
	ERROR - (1273, "Unknown collation: 'ctest_nondet'")

-----------
QUERY:


-- same with arrays
CREATE TABLE test6a (a int, b text[]);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[])' at line 2")

-----------
QUERY:

INSERT INTO test6a VALUES (1, ARRAY[U&'\00E4bc']);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[U&'\\00E4bc'])' at line 1")

-----------
QUERY:

INSERT INTO test6a VALUES (2, ARRAY[U&'\0061\0308bc']);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[U&'\\0061\\0308bc'])' at line 1")

-----------
QUERY:

SELECT * FROM test6a;
RESULT:
	ERROR - (1146, "Table 'test.test6a' doesn't exist")

-----------
QUERY:

SELECT * FROM test6a WHERE b = ARRAY['äbc'] COLLATE ctest_det;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '['äbc'] COLLATE ctest_det' at line 1")

-----------
QUERY:

SELECT * FROM test6a WHERE b = ARRAY['äbc'] COLLATE ctest_nondet;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '['äbc'] COLLATE ctest_nondet' at line 1")

-----------
QUERY:


CREATE COLLATION case_sensitive (provider = icu, locale = '');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'COLLATION case_sensitive (provider = icu, locale = '')' at line 1")

-----------
QUERY:

CREATE COLLATION case_insensitive (provider = icu, locale = '@colStrength=secondary', deterministic = false);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'COLLATION case_insensitive (provider = icu, locale = '@colStrength=secondary', d' at line 1")

-----------
QUERY:


SELECT 'abc' <= 'ABC' COLLATE case_sensitive, 'abc' >= 'ABC' COLLATE case_sensitive;
RESULT:
	ERROR - (1273, "Unknown collation: 'case_sensitive'")

-----------
QUERY:

SELECT 'abc' <= 'ABC' COLLATE case_insensitive, 'abc' >= 'ABC' COLLATE case_insensitive;
RESULT:
	ERROR - (1273, "Unknown collation: 'case_insensitive'")

-----------
QUERY:


-- test language tags
CREATE COLLATION lt_insensitive (provider = icu, locale = 'en-u-ks-level1', deterministic = false);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'COLLATION lt_insensitive (provider = icu, locale = 'en-u-ks-level1', determinist' at line 2")

-----------
QUERY:

SELECT 'aBcD' COLLATE lt_insensitive = 'AbCd' COLLATE lt_insensitive;
RESULT:
	ERROR - (1273, "Unknown collation: 'lt_insensitive'")

-----------
QUERY:

CREATE COLLATION lt_upperfirst (provider = icu, locale = 'und-u-kf-upper');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'COLLATION lt_upperfirst (provider = icu, locale = 'und-u-kf-upper')' at line 1")

-----------
QUERY:

SELECT 'Z' COLLATE lt_upperfirst < 'z' COLLATE lt_upperfirst;
RESULT:
	ERROR - (1273, "Unknown collation: 'lt_upperfirst'")

-----------
QUERY:


CREATE TABLE test1cs (x text COLLATE case_sensitive);
RESULT:
	ERROR - (1273, "Unknown collation: 'case_sensitive'")

-----------
QUERY:

CREATE TABLE test2cs (x text COLLATE case_sensitive);
RESULT:
	ERROR - (1273, "Unknown collation: 'case_sensitive'")

-----------
QUERY:

CREATE TABLE test3cs (x text COLLATE case_sensitive);
RESULT:
	ERROR - (1273, "Unknown collation: 'case_sensitive'")

-----------
QUERY:

INSERT INTO test1cs VALUES ('abc'), ('def'), ('ghi');
RESULT:
	ERROR - (1146, "Table 'test.test1cs' doesn't exist")

-----------
QUERY:

INSERT INTO test2cs VALUES ('ABC'), ('ghi');
RESULT:
	ERROR - (1146, "Table 'test.test2cs' doesn't exist")

-----------
QUERY:

INSERT INTO test3cs VALUES ('abc'), ('ABC'), ('def'), ('ghi');
RESULT:
	ERROR - (1146, "Table 'test.test3cs' doesn't exist")

-----------
QUERY:


SELECT x FROM test3cs WHERE x = 'abc';
RESULT:
	ERROR - (1146, "Table 'test.test3cs' doesn't exist")

-----------
QUERY:

SELECT x FROM test3cs WHERE x <> 'abc';
RESULT:
	ERROR - (1146, "Table 'test.test3cs' doesn't exist")

-----------
QUERY:

SELECT x FROM test3cs WHERE x LIKE 'a%';
RESULT:
	ERROR - (1146, "Table 'test.test3cs' doesn't exist")

-----------
QUERY:

SELECT x FROM test3cs WHERE x ILIKE 'a%';
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'ILIKE 'a%'' at line 1")

-----------
QUERY:

SELECT x FROM test3cs WHERE x SIMILAR TO 'a%';
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'SIMILAR TO 'a%'' at line 1")

-----------
QUERY:

SELECT x FROM test3cs WHERE x ~ 'a';
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '~ 'a'' at line 1")

-----------
QUERY:

SELECT x FROM test1cs UNION SELECT x FROM test2cs ORDER BY x;
RESULT:
	ERROR - (1146, "Table 'test.test1cs' doesn't exist")

-----------
QUERY:

SELECT x FROM test2cs UNION SELECT x FROM test1cs ORDER BY x;
RESULT:
	ERROR - (1146, "Table 'test.test2cs' doesn't exist")

-----------
QUERY:

SELECT x FROM test1cs INTERSECT SELECT x FROM test2cs;
RESULT:
	ERROR - (1146, "Table 'test.test1cs' doesn't exist")

-----------
QUERY:

SELECT x FROM test2cs INTERSECT SELECT x FROM test1cs;
RESULT:
	ERROR - (1146, "Table 'test.test2cs' doesn't exist")

-----------
QUERY:

SELECT x FROM test1cs EXCEPT SELECT x FROM test2cs;
RESULT:
	ERROR - (1146, "Table 'test.test1cs' doesn't exist")

-----------
QUERY:

SELECT x FROM test2cs EXCEPT SELECT x FROM test1cs;
RESULT:
	ERROR - (1146, "Table 'test.test2cs' doesn't exist")

-----------
QUERY:

SELECT DISTINCT x FROM test3cs ORDER BY x;
RESULT:
	ERROR - (1146, "Table 'test.test3cs' doesn't exist")

-----------
QUERY:

SELECT count(DISTINCT x) FROM test3cs;
RESULT:
	ERROR - (1146, "Table 'test.test3cs' doesn't exist")

-----------
QUERY:

SELECT x, count(*) FROM test3cs GROUP BY x ORDER BY x;
RESULT:
	ERROR - (1146, "Table 'test.test3cs' doesn't exist")

-----------
QUERY:

SELECT x, row_number() OVER (ORDER BY x), rank() OVER (ORDER BY x) FROM test3cs ORDER BY x;
RESULT:
	ERROR - (1146, "Table 'test.test3cs' doesn't exist")

-----------
QUERY:

CREATE UNIQUE INDEX ON test1cs (x);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'ON test1cs (x)' at line 1")

-----------
QUERY:
  -- ok
INSERT INTO test1cs VALUES ('ABC');
RESULT:
	ERROR - (1146, "Table 'test.test1cs' doesn't exist")

-----------
QUERY:
  -- ok
CREATE UNIQUE INDEX ON test3cs (x);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'ON test3cs (x)' at line 2")

-----------
QUERY:
  -- ok
SELECT string_to_array('ABC,DEF,GHI' COLLATE case_sensitive, ',', 'abc');
RESULT:
	ERROR - (1273, "Unknown collation: 'case_sensitive'")

-----------
QUERY:

SELECT string_to_array('ABCDEFGHI' COLLATE case_sensitive, NULL, 'b');
RESULT:
	ERROR - (1273, "Unknown collation: 'case_sensitive'")

-----------
QUERY:


CREATE TABLE test1ci (x text COLLATE case_insensitive);
RESULT:
	ERROR - (1273, "Unknown collation: 'case_insensitive'")

-----------
QUERY:

CREATE TABLE test2ci (x text COLLATE case_insensitive);
RESULT:
	ERROR - (1273, "Unknown collation: 'case_insensitive'")

-----------
QUERY:

CREATE TABLE test3ci (x text COLLATE case_insensitive);
RESULT:
	ERROR - (1273, "Unknown collation: 'case_insensitive'")

-----------
QUERY:

CREATE INDEX ON test3ci (x text_pattern_ops);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'ON test3ci (x text_pattern_ops)' at line 1")

-----------
QUERY:
  -- error
INSERT INTO test1ci VALUES ('abc'), ('def'), ('ghi');
RESULT:
	ERROR - (1146, "Table 'test.test1ci' doesn't exist")

-----------
QUERY:

INSERT INTO test2ci VALUES ('ABC'), ('ghi');
RESULT:
	ERROR - (1146, "Table 'test.test2ci' doesn't exist")

-----------
QUERY:

INSERT INTO test3ci VALUES ('abc'), ('ABC'), ('def'), ('ghi');
RESULT:
	ERROR - (1146, "Table 'test.test3ci' doesn't exist")

-----------
QUERY:


SELECT x FROM test3ci WHERE x = 'abc';
RESULT:
	ERROR - (1146, "Table 'test.test3ci' doesn't exist")

-----------
QUERY:

SELECT x FROM test3ci WHERE x <> 'abc';
RESULT:
	ERROR - (1146, "Table 'test.test3ci' doesn't exist")

-----------
QUERY:

SELECT x FROM test3ci WHERE x LIKE 'a%';
RESULT:
	ERROR - (1146, "Table 'test.test3ci' doesn't exist")

-----------
QUERY:

SELECT x FROM test3ci WHERE x ILIKE 'a%';
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'ILIKE 'a%'' at line 1")

-----------
QUERY:

SELECT x FROM test3ci WHERE x SIMILAR TO 'a%';
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'SIMILAR TO 'a%'' at line 1")

-----------
QUERY:

SELECT x FROM test3ci WHERE x ~ 'a';
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '~ 'a'' at line 1")

-----------
QUERY:

SELECT x FROM test1ci UNION SELECT x FROM test2ci ORDER BY x;
RESULT:
	ERROR - (1146, "Table 'test.test1ci' doesn't exist")

-----------
QUERY:

SELECT x FROM test2ci UNION SELECT x FROM test1ci ORDER BY x;
RESULT:
	ERROR - (1146, "Table 'test.test2ci' doesn't exist")

-----------
QUERY:

SELECT x FROM test1ci INTERSECT SELECT x FROM test2ci ORDER BY x;
RESULT:
	ERROR - (1146, "Table 'test.test1ci' doesn't exist")

-----------
QUERY:

SELECT x FROM test2ci INTERSECT SELECT x FROM test1ci ORDER BY x;
RESULT:
	ERROR - (1146, "Table 'test.test2ci' doesn't exist")

-----------
QUERY:

SELECT x FROM test1ci EXCEPT SELECT x FROM test2ci;
RESULT:
	ERROR - (1146, "Table 'test.test1ci' doesn't exist")

-----------
QUERY:

SELECT x FROM test2ci EXCEPT SELECT x FROM test1ci;
RESULT:
	ERROR - (1146, "Table 'test.test2ci' doesn't exist")

-----------
QUERY:

SELECT DISTINCT x FROM test3ci ORDER BY x;
RESULT:
	ERROR - (1146, "Table 'test.test3ci' doesn't exist")

-----------
QUERY:

SELECT count(DISTINCT x) FROM test3ci;
RESULT:
	ERROR - (1146, "Table 'test.test3ci' doesn't exist")

-----------
QUERY:

SELECT x, count(*) FROM test3ci GROUP BY x ORDER BY x;
RESULT:
	ERROR - (1146, "Table 'test.test3ci' doesn't exist")

-----------
QUERY:

SELECT x, row_number() OVER (ORDER BY x), rank() OVER (ORDER BY x) FROM test3ci ORDER BY x;
RESULT:
	ERROR - (1146, "Table 'test.test3ci' doesn't exist")

-----------
QUERY:

CREATE UNIQUE INDEX ON test1ci (x);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'ON test1ci (x)' at line 1")

-----------
QUERY:
  -- ok
INSERT INTO test1ci VALUES ('ABC');
RESULT:
	ERROR - (1146, "Table 'test.test1ci' doesn't exist")

-----------
QUERY:
  -- error
CREATE UNIQUE INDEX ON test3ci (x);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'ON test3ci (x)' at line 2")

-----------
QUERY:
  -- error
SELECT string_to_array('ABC,DEF,GHI' COLLATE case_insensitive, ',', 'abc');
RESULT:
	ERROR - (1273, "Unknown collation: 'case_insensitive'")

-----------
QUERY:

SELECT string_to_array('ABCDEFGHI' COLLATE case_insensitive, NULL, 'b');
RESULT:
	ERROR - (1273, "Unknown collation: 'case_insensitive'")

-----------
QUERY:


-- bpchar
CREATE TABLE test1bpci (x char(3) COLLATE case_insensitive);
RESULT:
	ERROR - (1273, "Unknown collation: 'case_insensitive'")

-----------
QUERY:

CREATE TABLE test2bpci (x char(3) COLLATE case_insensitive);
RESULT:
	ERROR - (1273, "Unknown collation: 'case_insensitive'")

-----------
QUERY:

CREATE TABLE test3bpci (x char(3) COLLATE case_insensitive);
RESULT:
	ERROR - (1273, "Unknown collation: 'case_insensitive'")

-----------
QUERY:

CREATE INDEX ON test3bpci (x bpchar_pattern_ops);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'ON test3bpci (x bpchar_pattern_ops)' at line 1")

-----------
QUERY:
  -- error
INSERT INTO test1bpci VALUES ('abc'), ('def'), ('ghi');
RESULT:
	ERROR - (1146, "Table 'test.test1bpci' doesn't exist")

-----------
QUERY:

INSERT INTO test2bpci VALUES ('ABC'), ('ghi');
RESULT:
	ERROR - (1146, "Table 'test.test2bpci' doesn't exist")

-----------
QUERY:

INSERT INTO test3bpci VALUES ('abc'), ('ABC'), ('def'), ('ghi');
RESULT:
	ERROR - (1146, "Table 'test.test3bpci' doesn't exist")

-----------
QUERY:


SELECT x FROM test3bpci WHERE x = 'abc';
RESULT:
	ERROR - (1146, "Table 'test.test3bpci' doesn't exist")

-----------
QUERY:

SELECT x FROM test3bpci WHERE x <> 'abc';
RESULT:
	ERROR - (1146, "Table 'test.test3bpci' doesn't exist")

-----------
QUERY:

SELECT x FROM test3bpci WHERE x LIKE 'a%';
RESULT:
	ERROR - (1146, "Table 'test.test3bpci' doesn't exist")

-----------
QUERY:

SELECT x FROM test3bpci WHERE x ILIKE 'a%';
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'ILIKE 'a%'' at line 1")

-----------
QUERY:

SELECT x FROM test3bpci WHERE x SIMILAR TO 'a%';
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'SIMILAR TO 'a%'' at line 1")

-----------
QUERY:

SELECT x FROM test3bpci WHERE x ~ 'a';
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '~ 'a'' at line 1")

-----------
QUERY:

SELECT x FROM test1bpci UNION SELECT x FROM test2bpci ORDER BY x;
RESULT:
	ERROR - (1146, "Table 'test.test1bpci' doesn't exist")

-----------
QUERY:

SELECT x FROM test2bpci UNION SELECT x FROM test1bpci ORDER BY x;
RESULT:
	ERROR - (1146, "Table 'test.test2bpci' doesn't exist")

-----------
QUERY:

SELECT x FROM test1bpci INTERSECT SELECT x FROM test2bpci ORDER BY x;
RESULT:
	ERROR - (1146, "Table 'test.test1bpci' doesn't exist")

-----------
QUERY:

SELECT x FROM test2bpci INTERSECT SELECT x FROM test1bpci ORDER BY x;
RESULT:
	ERROR - (1146, "Table 'test.test2bpci' doesn't exist")

-----------
QUERY:

SELECT x FROM test1bpci EXCEPT SELECT x FROM test2bpci;
RESULT:
	ERROR - (1146, "Table 'test.test1bpci' doesn't exist")

-----------
QUERY:

SELECT x FROM test2bpci EXCEPT SELECT x FROM test1bpci;
RESULT:
	ERROR - (1146, "Table 'test.test2bpci' doesn't exist")

-----------
QUERY:

SELECT DISTINCT x FROM test3bpci ORDER BY x;
RESULT:
	ERROR - (1146, "Table 'test.test3bpci' doesn't exist")

-----------
QUERY:

SELECT count(DISTINCT x) FROM test3bpci;
RESULT:
	ERROR - (1146, "Table 'test.test3bpci' doesn't exist")

-----------
QUERY:

SELECT x, count(*) FROM test3bpci GROUP BY x ORDER BY x;
RESULT:
	ERROR - (1146, "Table 'test.test3bpci' doesn't exist")

-----------
QUERY:

SELECT x, row_number() OVER (ORDER BY x), rank() OVER (ORDER BY x) FROM test3bpci ORDER BY x;
RESULT:
	ERROR - (1146, "Table 'test.test3bpci' doesn't exist")

-----------
QUERY:

CREATE UNIQUE INDEX ON test1bpci (x);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'ON test1bpci (x)' at line 1")

-----------
QUERY:
  -- ok
INSERT INTO test1bpci VALUES ('ABC');
RESULT:
	ERROR - (1146, "Table 'test.test1bpci' doesn't exist")

-----------
QUERY:
  -- error
CREATE UNIQUE INDEX ON test3bpci (x);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'ON test3bpci (x)' at line 2")

-----------
QUERY:
  -- error
SELECT string_to_array('ABC,DEF,GHI'::char(11) COLLATE case_insensitive, ',', 'abc');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::char(11) COLLATE case_insensitive, ',', 'abc')' at line 2")

-----------
QUERY:

SELECT string_to_array('ABCDEFGHI'::char(9) COLLATE case_insensitive, NULL, 'b');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::char(9) COLLATE case_insensitive, NULL, 'b')' at line 1")

-----------
QUERY:


-- This tests the issue described in match_pattern_prefix().  In the
-- absence of that check, the case_insensitive tests below would
-- return no rows where they should logically return one.
CREATE TABLE test4c (x text COLLATE "C");
RESULT:
	ERROR - (1273, "Unknown collation: 'C'")

-----------
QUERY:

INSERT INTO test4c VALUES ('abc');
RESULT:
	ERROR - (1146, "Table 'test.test4c' doesn't exist")

-----------
QUERY:

CREATE INDEX ON test4c (x);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'ON test4c (x)' at line 1")

-----------
QUERY:

SET enable_seqscan = off;
RESULT:
	ERROR - (1193, "Unknown system variable 'enable_seqscan'")

-----------
QUERY:

SELECT x FROM test4c WHERE x LIKE 'ABC' COLLATE case_sensitive;
RESULT:
	ERROR - (1273, "Unknown collation: 'case_sensitive'")

-----------
QUERY:
  -- ok, no rows
SELECT x FROM test4c WHERE x LIKE 'ABC%' COLLATE case_sensitive;
RESULT:
	ERROR - (1273, "Unknown collation: 'case_sensitive'")

-----------
QUERY:
  -- ok, no rows
SELECT x FROM test4c WHERE x LIKE 'ABC' COLLATE case_insensitive;
RESULT:
	ERROR - (1273, "Unknown collation: 'case_insensitive'")

-----------
QUERY:
  -- error
SELECT x FROM test4c WHERE x LIKE 'ABC%' COLLATE case_insensitive;
RESULT:
	ERROR - (1273, "Unknown collation: 'case_insensitive'")

-----------
QUERY:
  -- error
RESET enable_seqscan;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'enable_seqscan' at line 2")

-----------
QUERY:


-- Unicode special case: different variants of Greek lower case sigma.
-- A naive implementation like citext that just does lower(x) =
-- lower(y) will do the wrong thing here, because lower(/* REPLACED */ ''Σ/* REPLACED */ '') is /* REPLACED */ ''σ/* REPLACED */ ''
-- but upper(/* REPLACED */ ''ς/* REPLACED */ '') is /* REPLACED */ ''Σ/* REPLACED */ ''.
SELECT 'ὀδυσσεύς' = 'ὈΔΥΣΣΕΎΣ' COLLATE case_sensitive;
RESULT:
	ERROR - (1273, "Unknown collation: 'case_sensitive'")

-----------
QUERY:

SELECT 'ὀδυσσεύς' = 'ὈΔΥΣΣΕΎΣ' COLLATE case_insensitive;
RESULT:
	ERROR - (1273, "Unknown collation: 'case_insensitive'")

-----------
QUERY:


-- name vs. text comparison operators
SELECT relname FROM pg_class WHERE relname = 'PG_CLASS'::text COLLATE case_insensitive;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::text COLLATE case_insensitive' at line 2")

-----------
QUERY:

SELECT relname FROM pg_class WHERE 'PG_CLASS'::text = relname COLLATE case_insensitive;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::text = relname COLLATE case_insensitive' at line 1")

-----------
QUERY:


SELECT typname FROM pg_type WHERE typname LIKE 'int_' AND typname <> 'INT2'::text
  COLLATE case_insensitive ORDER BY typname;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::text\n  COLLATE case_insensitive ORDER BY typname' at line 1")

-----------
QUERY:

SELECT typname FROM pg_type WHERE typname LIKE 'int_' AND 'INT2'::text <> typname
  COLLATE case_insensitive ORDER BY typname;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::text <> typname\n  COLLATE case_insensitive ORDER BY typname' at line 1")

-----------
QUERY:


-- test case adapted from subselect.sql
CREATE TEMP TABLE outer_text (f1 text COLLATE case_insensitive, f2 text);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'TEMP TABLE outer_text (f1 text COLLATE case_insensitive, f2 text)' at line 2")

-----------
QUERY:

INSERT INTO outer_text VALUES ('a', 'a');
RESULT:
	ERROR - (1146, "Table 'test.outer_text' doesn't exist")

-----------
QUERY:

INSERT INTO outer_text VALUES ('b', 'a');
RESULT:
	ERROR - (1146, "Table 'test.outer_text' doesn't exist")

-----------
QUERY:

INSERT INTO outer_text VALUES ('A', NULL);
RESULT:
	ERROR - (1146, "Table 'test.outer_text' doesn't exist")

-----------
QUERY:

INSERT INTO outer_text VALUES ('B', NULL);
RESULT:
	ERROR - (1146, "Table 'test.outer_text' doesn't exist")

-----------
QUERY:


CREATE TEMP TABLE inner_text (c1 text COLLATE case_insensitive, c2 text);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'TEMP TABLE inner_text (c1 text COLLATE case_insensitive, c2 text)' at line 1")

-----------
QUERY:

INSERT INTO inner_text VALUES ('a', NULL);
RESULT:
	ERROR - (1146, "Table 'test.inner_text' doesn't exist")

-----------
QUERY:


SELECT * FROM outer_text WHERE (f1, f2) NOT IN (SELECT * FROM inner_text);
RESULT:
	ERROR - (1146, "Table 'test.outer_text' doesn't exist")

-----------
QUERY:


-- accents
SET client_min_messages=WARNING;
RESULT:
	ERROR - (1193, "Unknown system variable 'client_min_messages'")

-----------
QUERY:

CREATE COLLATION ignore_accents (provider = icu, locale = '@colStrength=primary;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'COLLATION ignore_accents (provider = icu, locale = '@colStrength=primary' at line 1")

-----------
QUERY:
colCaseLevel=yes', deterministic = false);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'colCaseLevel=yes', deterministic = false)' at line 1")

-----------
QUERY:

RESET client_min_messages;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'client_min_messages' at line 1")

-----------
QUERY:


CREATE TABLE test4 (a int, b text);
RESULT:
	[]

-----------
QUERY:

INSERT INTO test4 VALUES (1, 'cote'), (2, 'côte'), (3, 'coté'), (4, 'côté');
RESULT:
	[]

-----------
QUERY:

SELECT * FROM test4 WHERE b = 'cote';
RESULT:
	((1, 'cote'), (2, 'côte'), (3, 'coté'), (4, 'côté'))

-----------
QUERY:

SELECT * FROM test4 WHERE b = 'cote' COLLATE ignore_accents;
RESULT:
	ERROR - (1273, "Unknown collation: 'ignore_accents'")

-----------
QUERY:

SELECT * FROM test4 WHERE b = 'Cote' COLLATE ignore_accents;
RESULT:
	ERROR - (1273, "Unknown collation: 'ignore_accents'")

-----------
QUERY:
  -- still case-sensitive
SELECT * FROM test4 WHERE b = 'Cote' COLLATE case_insensitive;
RESULT:
	ERROR - (1273, "Unknown collation: 'case_insensitive'")

-----------
QUERY:


-- foreign keys (should use collation of primary key)

-- PK is case-sensitive, FK is case-insensitive
CREATE TABLE test10pk (x text COLLATE case_sensitive PRIMARY KEY);
RESULT:
	ERROR - (1273, "Unknown collation: 'case_sensitive'")

-----------
QUERY:

INSERT INTO test10pk VALUES ('abc'), ('def'), ('ghi');
RESULT:
	ERROR - (1146, "Table 'test.test10pk' doesn't exist")

-----------
QUERY:

CREATE TABLE test10fk (x text COLLATE case_insensitive REFERENCES test10pk (x) ON UPDATE CASCADE ON DELETE CASCADE);
RESULT:
	ERROR - (1273, "Unknown collation: 'case_insensitive'")

-----------
QUERY:

INSERT INTO test10fk VALUES ('abc');
RESULT:
	ERROR - (1146, "Table 'test.test10fk' doesn't exist")

-----------
QUERY:
  -- ok
INSERT INTO test10fk VALUES ('ABC');
RESULT:
	ERROR - (1146, "Table 'test.test10fk' doesn't exist")

-----------
QUERY:
  -- error
INSERT INTO test10fk VALUES ('xyz');
RESULT:
	ERROR - (1146, "Table 'test.test10fk' doesn't exist")

-----------
QUERY:
  -- error
SELECT * FROM test10pk;
RESULT:
	ERROR - (1146, "Table 'test.test10pk' doesn't exist")

-----------
QUERY:

SELECT * FROM test10fk;
RESULT:
	ERROR - (1146, "Table 'test.test10fk' doesn't exist")

-----------
QUERY:

-- restrict update even though the values are /* REPLACED */ ''equal/* REPLACED */ '' in the FK table
UPDATE test10fk SET x = 'ABC' WHERE x = 'abc';
RESULT:
	ERROR - (1146, "Table 'test.test10fk' doesn't exist")

-----------
QUERY:
  -- error
SELECT * FROM test10fk;
RESULT:
	ERROR - (1146, "Table 'test.test10fk' doesn't exist")

-----------
QUERY:

DELETE FROM test10pk WHERE x = 'abc';
RESULT:
	ERROR - (1146, "Table 'test.test10pk' doesn't exist")

-----------
QUERY:

SELECT * FROM test10pk;
RESULT:
	ERROR - (1146, "Table 'test.test10pk' doesn't exist")

-----------
QUERY:

SELECT * FROM test10fk;
RESULT:
	ERROR - (1146, "Table 'test.test10fk' doesn't exist")

-----------
QUERY:


-- PK is case-insensitive, FK is case-sensitive
CREATE TABLE test11pk (x text COLLATE case_insensitive PRIMARY KEY);
RESULT:
	ERROR - (1273, "Unknown collation: 'case_insensitive'")

-----------
QUERY:

INSERT INTO test11pk VALUES ('abc'), ('def'), ('ghi');
RESULT:
	ERROR - (1146, "Table 'test.test11pk' doesn't exist")

-----------
QUERY:

CREATE TABLE test11fk (x text COLLATE case_sensitive REFERENCES test11pk (x) ON UPDATE CASCADE ON DELETE CASCADE);
RESULT:
	ERROR - (1273, "Unknown collation: 'case_sensitive'")

-----------
QUERY:

INSERT INTO test11fk VALUES ('abc');
RESULT:
	ERROR - (1146, "Table 'test.test11fk' doesn't exist")

-----------
QUERY:
  -- ok
INSERT INTO test11fk VALUES ('ABC');
RESULT:
	ERROR - (1146, "Table 'test.test11fk' doesn't exist")

-----------
QUERY:
  -- ok
INSERT INTO test11fk VALUES ('xyz');
RESULT:
	ERROR - (1146, "Table 'test.test11fk' doesn't exist")

-----------
QUERY:
  -- error
SELECT * FROM test11pk;
RESULT:
	ERROR - (1146, "Table 'test.test11pk' doesn't exist")

-----------
QUERY:

SELECT * FROM test11fk;
RESULT:
	ERROR - (1146, "Table 'test.test11fk' doesn't exist")

-----------
QUERY:

-- cascade update even though the values are /* REPLACED */ ''equal/* REPLACED */ '' in the PK table
UPDATE test11pk SET x = 'ABC' WHERE x = 'abc';
RESULT:
	ERROR - (1146, "Table 'test.test11pk' doesn't exist")

-----------
QUERY:

SELECT * FROM test11fk;
RESULT:
	ERROR - (1146, "Table 'test.test11fk' doesn't exist")

-----------
QUERY:

DELETE FROM test11pk WHERE x = 'abc';
RESULT:
	ERROR - (1146, "Table 'test.test11pk' doesn't exist")

-----------
QUERY:

SELECT * FROM test11pk;
RESULT:
	ERROR - (1146, "Table 'test.test11pk' doesn't exist")

-----------
QUERY:

SELECT * FROM test11fk;
RESULT:
	ERROR - (1146, "Table 'test.test11fk' doesn't exist")

-----------
QUERY:


-- partitioning
CREATE TABLE test20 (a int, b text COLLATE case_insensitive) PARTITION BY LIST (b);
RESULT:
	ERROR - (1273, "Unknown collation: 'case_insensitive'")

-----------
QUERY:

CREATE TABLE test20_1 PARTITION OF test20 FOR VALUES IN ('abc');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'OF test20 FOR VALUES IN ('abc')' at line 1")

-----------
QUERY:

INSERT INTO test20 VALUES (1, 'abc');
RESULT:
	ERROR - (1146, "Table 'test.test20' doesn't exist")

-----------
QUERY:

INSERT INTO test20 VALUES (2, 'ABC');
RESULT:
	ERROR - (1146, "Table 'test.test20' doesn't exist")

-----------
QUERY:

SELECT * FROM test20_1;
RESULT:
	ERROR - (1146, "Table 'test.test20_1' doesn't exist")

-----------
QUERY:


CREATE TABLE test21 (a int, b text COLLATE case_insensitive) PARTITION BY RANGE (b);
RESULT:
	ERROR - (1273, "Unknown collation: 'case_insensitive'")

-----------
QUERY:

CREATE TABLE test21_1 PARTITION OF test21 FOR VALUES FROM ('ABC') TO ('DEF');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'OF test21 FOR VALUES FROM ('ABC') TO ('DEF')' at line 1")

-----------
QUERY:

INSERT INTO test21 VALUES (1, 'abc');
RESULT:
	ERROR - (1146, "Table 'test.test21' doesn't exist")

-----------
QUERY:

INSERT INTO test21 VALUES (2, 'ABC');
RESULT:
	ERROR - (1146, "Table 'test.test21' doesn't exist")

-----------
QUERY:

SELECT * FROM test21_1;
RESULT:
	ERROR - (1146, "Table 'test.test21_1' doesn't exist")

-----------
QUERY:


CREATE TABLE test22 (a int, b text COLLATE case_sensitive) PARTITION BY HASH (b);
RESULT:
	ERROR - (1273, "Unknown collation: 'case_sensitive'")

-----------
QUERY:

CREATE TABLE test22_0 PARTITION OF test22 FOR VALUES WITH (MODULUS 2, REMAINDER 0);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'OF test22 FOR VALUES WITH (MODULUS 2, REMAINDER 0)' at line 1")

-----------
QUERY:

CREATE TABLE test22_1 PARTITION OF test22 FOR VALUES WITH (MODULUS 2, REMAINDER 1);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'OF test22 FOR VALUES WITH (MODULUS 2, REMAINDER 1)' at line 1")

-----------
QUERY:

INSERT INTO test22 VALUES (1, 'def');
RESULT:
	ERROR - (1146, "Table 'test.test22' doesn't exist")

-----------
QUERY:

INSERT INTO test22 VALUES (2, 'DEF');
RESULT:
	ERROR - (1146, "Table 'test.test22' doesn't exist")

-----------
QUERY:

-- they end up in different partitions
SELECT (SELECT count(*) FROM test22_0) = (SELECT count(*) FROM test22_1);
RESULT:
	ERROR - (1146, "Table 'test.test22_0' doesn't exist")

-----------
QUERY:


-- same with arrays
CREATE TABLE test22a (a int, b text[] COLLATE case_sensitive) PARTITION BY HASH (b);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[] COLLATE case_sensitive) PARTITION BY HASH (b)' at line 2")

-----------
QUERY:

CREATE TABLE test22a_0 PARTITION OF test22a FOR VALUES WITH (MODULUS 2, REMAINDER 0);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'OF test22a FOR VALUES WITH (MODULUS 2, REMAINDER 0)' at line 1")

-----------
QUERY:

CREATE TABLE test22a_1 PARTITION OF test22a FOR VALUES WITH (MODULUS 2, REMAINDER 1);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'OF test22a FOR VALUES WITH (MODULUS 2, REMAINDER 1)' at line 1")

-----------
QUERY:

INSERT INTO test22a VALUES (1, ARRAY['def']);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '['def'])' at line 1")

-----------
QUERY:

INSERT INTO test22a VALUES (2, ARRAY['DEF']);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '['DEF'])' at line 1")

-----------
QUERY:

-- they end up in different partitions
SELECT (SELECT count(*) FROM test22a_0) = (SELECT count(*) FROM test22a_1);
RESULT:
	ERROR - (1146, "Table 'test.test22a_0' doesn't exist")

-----------
QUERY:


CREATE TABLE test23 (a int, b text COLLATE case_insensitive) PARTITION BY HASH (b);
RESULT:
	ERROR - (1273, "Unknown collation: 'case_insensitive'")

-----------
QUERY:

CREATE TABLE test23_0 PARTITION OF test23 FOR VALUES WITH (MODULUS 2, REMAINDER 0);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'OF test23 FOR VALUES WITH (MODULUS 2, REMAINDER 0)' at line 1")

-----------
QUERY:

CREATE TABLE test23_1 PARTITION OF test23 FOR VALUES WITH (MODULUS 2, REMAINDER 1);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'OF test23 FOR VALUES WITH (MODULUS 2, REMAINDER 1)' at line 1")

-----------
QUERY:

INSERT INTO test23 VALUES (1, 'def');
RESULT:
	ERROR - (1146, "Table 'test.test23' doesn't exist")

-----------
QUERY:

INSERT INTO test23 VALUES (2, 'DEF');
RESULT:
	ERROR - (1146, "Table 'test.test23' doesn't exist")

-----------
QUERY:

-- they end up in the same partition (but it/* REPLACED */ ''s platform-dependent which one)
SELECT (SELECT count(*) FROM test23_0) <> (SELECT count(*) FROM test23_1);
RESULT:
	ERROR - (1146, "Table 'test.test23_0' doesn't exist")

-----------
QUERY:


-- same with arrays
CREATE TABLE test23a (a int, b text[] COLLATE case_insensitive) PARTITION BY HASH (b);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[] COLLATE case_insensitive) PARTITION BY HASH (b)' at line 2")

-----------
QUERY:

CREATE TABLE test23a_0 PARTITION OF test23a FOR VALUES WITH (MODULUS 2, REMAINDER 0);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'OF test23a FOR VALUES WITH (MODULUS 2, REMAINDER 0)' at line 1")

-----------
QUERY:

CREATE TABLE test23a_1 PARTITION OF test23a FOR VALUES WITH (MODULUS 2, REMAINDER 1);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'OF test23a FOR VALUES WITH (MODULUS 2, REMAINDER 1)' at line 1")

-----------
QUERY:

INSERT INTO test23a VALUES (1, ARRAY['def']);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '['def'])' at line 1")

-----------
QUERY:

INSERT INTO test23a VALUES (2, ARRAY['DEF']);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '['DEF'])' at line 1")

-----------
QUERY:

-- they end up in the same partition (but it/* REPLACED */ ''s platform-dependent which one)
SELECT (SELECT count(*) FROM test23a_0) <> (SELECT count(*) FROM test23a_1);
RESULT:
	ERROR - (1146, "Table 'test.test23a_0' doesn't exist")

-----------
QUERY:


CREATE TABLE test30 (a int, b char(3) COLLATE case_insensitive) PARTITION BY LIST (b);
RESULT:
	ERROR - (1273, "Unknown collation: 'case_insensitive'")

-----------
QUERY:

CREATE TABLE test30_1 PARTITION OF test30 FOR VALUES IN ('abc');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'OF test30 FOR VALUES IN ('abc')' at line 1")

-----------
QUERY:

INSERT INTO test30 VALUES (1, 'abc');
RESULT:
	ERROR - (1146, "Table 'test.test30' doesn't exist")

-----------
QUERY:

INSERT INTO test30 VALUES (2, 'ABC');
RESULT:
	ERROR - (1146, "Table 'test.test30' doesn't exist")

-----------
QUERY:

SELECT * FROM test30_1;
RESULT:
	ERROR - (1146, "Table 'test.test30_1' doesn't exist")

-----------
QUERY:


CREATE TABLE test31 (a int, b char(3) COLLATE case_insensitive) PARTITION BY RANGE (b);
RESULT:
	ERROR - (1273, "Unknown collation: 'case_insensitive'")

-----------
QUERY:

CREATE TABLE test31_1 PARTITION OF test31 FOR VALUES FROM ('ABC') TO ('DEF');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'OF test31 FOR VALUES FROM ('ABC') TO ('DEF')' at line 1")

-----------
QUERY:

INSERT INTO test31 VALUES (1, 'abc');
RESULT:
	ERROR - (1146, "Table 'test.test31' doesn't exist")

-----------
QUERY:

INSERT INTO test31 VALUES (2, 'ABC');
RESULT:
	ERROR - (1146, "Table 'test.test31' doesn't exist")

-----------
QUERY:

SELECT * FROM test31_1;
RESULT:
	ERROR - (1146, "Table 'test.test31_1' doesn't exist")

-----------
QUERY:


CREATE TABLE test32 (a int, b char(3) COLLATE case_sensitive) PARTITION BY HASH (b);
RESULT:
	ERROR - (1273, "Unknown collation: 'case_sensitive'")

-----------
QUERY:

CREATE TABLE test32_0 PARTITION OF test32 FOR VALUES WITH (MODULUS 2, REMAINDER 0);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'OF test32 FOR VALUES WITH (MODULUS 2, REMAINDER 0)' at line 1")

-----------
QUERY:

CREATE TABLE test32_1 PARTITION OF test32 FOR VALUES WITH (MODULUS 2, REMAINDER 1);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'OF test32 FOR VALUES WITH (MODULUS 2, REMAINDER 1)' at line 1")

-----------
QUERY:

INSERT INTO test32 VALUES (1, 'def');
RESULT:
	ERROR - (1146, "Table 'test.test32' doesn't exist")

-----------
QUERY:

INSERT INTO test32 VALUES (2, 'DEF');
RESULT:
	ERROR - (1146, "Table 'test.test32' doesn't exist")

-----------
QUERY:

-- they end up in different partitions
SELECT (SELECT count(*) FROM test32_0) = (SELECT count(*) FROM test32_1);
RESULT:
	ERROR - (1146, "Table 'test.test32_0' doesn't exist")

-----------
QUERY:


CREATE TABLE test33 (a int, b char(3) COLLATE case_insensitive) PARTITION BY HASH (b);
RESULT:
	ERROR - (1273, "Unknown collation: 'case_insensitive'")

-----------
QUERY:

CREATE TABLE test33_0 PARTITION OF test33 FOR VALUES WITH (MODULUS 2, REMAINDER 0);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'OF test33 FOR VALUES WITH (MODULUS 2, REMAINDER 0)' at line 1")

-----------
QUERY:

CREATE TABLE test33_1 PARTITION OF test33 FOR VALUES WITH (MODULUS 2, REMAINDER 1);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'OF test33 FOR VALUES WITH (MODULUS 2, REMAINDER 1)' at line 1")

-----------
QUERY:

INSERT INTO test33 VALUES (1, 'def');
RESULT:
	ERROR - (1146, "Table 'test.test33' doesn't exist")

-----------
QUERY:

INSERT INTO test33 VALUES (2, 'DEF');
RESULT:
	ERROR - (1146, "Table 'test.test33' doesn't exist")

-----------
QUERY:

-- they end up in the same partition (but it/* REPLACED */ ''s platform-dependent which one)
SELECT (SELECT count(*) FROM test33_0) <> (SELECT count(*) FROM test33_1);
RESULT:
	ERROR - (1146, "Table 'test.test33_0' doesn't exist")

-----------
QUERY:



-- cleanup
RESET search_path;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'search_path' at line 2")

-----------
QUERY:

SET client_min_messages TO warning;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'TO warning' at line 1")

-----------
QUERY:

DROP SCHEMA collate_tests CASCADE;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'CASCADE' at line 1")

-----------
QUERY:

RESET client_min_messages;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'client_min_messages' at line 1")

-----------
QUERY:


-- leave a collation for pg_upgrade test
CREATE COLLATION coll_icu_upgrade FROM "und-x-icu";
RESULT:
	ERROR - (1064, 'You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near \'COLLATION coll_icu_upgrade FROM "und-x-icu"\' at line 2')
