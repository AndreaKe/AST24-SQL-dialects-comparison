
-----------
QUERY:
--
-- Enum tests
--

CREATE TYPE rainbow AS ENUM ('red', 'orange', 'yellow', 'green', 'blue', 'purple');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'TYPE rainbow AS ENUM ('red', 'orange', 'yellow', 'green', 'blue', 'purple')' at line 5")

-----------
QUERY:


--
-- Did it create the right number of rows?
--
SELECT COUNT(*) FROM pg_enum WHERE enumtypid = 'rainbow'::regtype;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::regtype' at line 4")

-----------
QUERY:


--
-- I/O functions
--
SELECT 'red'::rainbow;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::rainbow' at line 4")

-----------
QUERY:

SELECT 'mauve'::rainbow;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::rainbow' at line 1")

-----------
QUERY:


-- Also try it with non-error-throwing API
SELECT pg_input_is_valid('red', 'rainbow');
RESULT:
	ERROR - (1305, 'FUNCTION test.pg_input_is_valid does not exist')

-----------
QUERY:

SELECT pg_input_is_valid('mauve', 'rainbow');
RESULT:
	ERROR - (1305, 'FUNCTION test.pg_input_is_valid does not exist')

-----------
QUERY:

SELECT * FROM pg_input_error_info('mauve', 'rainbow');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '('mauve', 'rainbow')' at line 1")

-----------
QUERY:

\x
SELECT * FROM pg_input_error_info(repeat('too_long', 32), 'rainbow');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '\\x\nSELECT * FROM pg_input_error_info(repeat('too_long', 32), 'rainbow')' at line 1")

-----------
QUERY:

\x

--
-- adding new values
--

CREATE TYPE planets AS ENUM ( 'venus', 'earth', 'mars' );
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '\\x\n\n--\n-- adding new values\n--\n\nCREATE TYPE planets AS ENUM ( 'venus', 'earth', ' at line 1")

-----------
QUERY:


SELECT enumlabel, enumsortorder
FROM pg_enum
WHERE enumtypid = 'planets'::regtype
ORDER BY 2;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::regtype\nORDER BY 2' at line 3")

-----------
QUERY:


ALTER TYPE planets ADD VALUE 'uranus';
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'TYPE planets ADD VALUE 'uranus'' at line 1")

-----------
QUERY:


SELECT enumlabel, enumsortorder
FROM pg_enum
WHERE enumtypid = 'planets'::regtype
ORDER BY 2;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::regtype\nORDER BY 2' at line 3")

-----------
QUERY:


ALTER TYPE planets ADD VALUE 'mercury' BEFORE 'venus';
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'TYPE planets ADD VALUE 'mercury' BEFORE 'venus'' at line 1")

-----------
QUERY:

ALTER TYPE planets ADD VALUE 'saturn' BEFORE 'uranus';
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'TYPE planets ADD VALUE 'saturn' BEFORE 'uranus'' at line 1")

-----------
QUERY:

ALTER TYPE planets ADD VALUE 'jupiter' AFTER 'mars';
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'TYPE planets ADD VALUE 'jupiter' AFTER 'mars'' at line 1")

-----------
QUERY:

ALTER TYPE planets ADD VALUE 'neptune' AFTER 'uranus';
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'TYPE planets ADD VALUE 'neptune' AFTER 'uranus'' at line 1")

-----------
QUERY:


SELECT enumlabel, enumsortorder
FROM pg_enum
WHERE enumtypid = 'planets'::regtype
ORDER BY 2;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::regtype\nORDER BY 2' at line 3")

-----------
QUERY:


SELECT enumlabel, enumsortorder
FROM pg_enum
WHERE enumtypid = 'planets'::regtype
ORDER BY enumlabel::planets;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::regtype\nORDER BY enumlabel::planets' at line 3")

-----------
QUERY:


-- errors for adding labels
ALTER TYPE planets ADD VALUE
  'plutoplutoplutoplutoplutoplutoplutoplutoplutoplutoplutoplutoplutopluto';
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'TYPE planets ADD VALUE\n  'plutoplutoplutoplutoplutoplutoplutoplutoplutoplutoplut' at line 2")

-----------
QUERY:


ALTER TYPE planets ADD VALUE 'pluto' AFTER 'zeus';
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'TYPE planets ADD VALUE 'pluto' AFTER 'zeus'' at line 1")

-----------
QUERY:


-- if not exists tests

--  existing value gives error
ALTER TYPE planets ADD VALUE 'mercury';
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'TYPE planets ADD VALUE 'mercury'' at line 4")

-----------
QUERY:


-- unless IF NOT EXISTS is specified
ALTER TYPE planets ADD VALUE IF NOT EXISTS 'mercury';
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'TYPE planets ADD VALUE IF NOT EXISTS 'mercury'' at line 2")

-----------
QUERY:


-- should be neptune, not mercury
SELECT enum_last(NULL::planets);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::planets)' at line 2")

-----------
QUERY:


ALTER TYPE planets ADD VALUE IF NOT EXISTS 'pluto';
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'TYPE planets ADD VALUE IF NOT EXISTS 'pluto'' at line 1")

-----------
QUERY:


-- should be pluto, i.e. the new value
SELECT enum_last(NULL::planets);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::planets)' at line 2")

-----------
QUERY:


--
-- Test inserting so many values that we have to renumber
--

create type insenum as enum ('L1', 'L2');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'type insenum as enum ('L1', 'L2')' at line 5")

-----------
QUERY:


alter type insenum add value 'i1' before 'L2';
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'type insenum add value 'i1' before 'L2'' at line 1")

-----------
QUERY:

alter type insenum add value 'i2' before 'L2';
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'type insenum add value 'i2' before 'L2'' at line 1")

-----------
QUERY:

alter type insenum add value 'i3' before 'L2';
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'type insenum add value 'i3' before 'L2'' at line 1")

-----------
QUERY:

alter type insenum add value 'i4' before 'L2';
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'type insenum add value 'i4' before 'L2'' at line 1")

-----------
QUERY:

alter type insenum add value 'i5' before 'L2';
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'type insenum add value 'i5' before 'L2'' at line 1")

-----------
QUERY:

alter type insenum add value 'i6' before 'L2';
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'type insenum add value 'i6' before 'L2'' at line 1")

-----------
QUERY:

alter type insenum add value 'i7' before 'L2';
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'type insenum add value 'i7' before 'L2'' at line 1")

-----------
QUERY:

alter type insenum add value 'i8' before 'L2';
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'type insenum add value 'i8' before 'L2'' at line 1")

-----------
QUERY:

alter type insenum add value 'i9' before 'L2';
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'type insenum add value 'i9' before 'L2'' at line 1")

-----------
QUERY:

alter type insenum add value 'i10' before 'L2';
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'type insenum add value 'i10' before 'L2'' at line 1")

-----------
QUERY:

alter type insenum add value 'i11' before 'L2';
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'type insenum add value 'i11' before 'L2'' at line 1")

-----------
QUERY:

alter type insenum add value 'i12' before 'L2';
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'type insenum add value 'i12' before 'L2'' at line 1")

-----------
QUERY:

alter type insenum add value 'i13' before 'L2';
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'type insenum add value 'i13' before 'L2'' at line 1")

-----------
QUERY:

alter type insenum add value 'i14' before 'L2';
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'type insenum add value 'i14' before 'L2'' at line 1")

-----------
QUERY:

alter type insenum add value 'i15' before 'L2';
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'type insenum add value 'i15' before 'L2'' at line 1")

-----------
QUERY:

alter type insenum add value 'i16' before 'L2';
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'type insenum add value 'i16' before 'L2'' at line 1")

-----------
QUERY:

alter type insenum add value 'i17' before 'L2';
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'type insenum add value 'i17' before 'L2'' at line 1")

-----------
QUERY:

alter type insenum add value 'i18' before 'L2';
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'type insenum add value 'i18' before 'L2'' at line 1")

-----------
QUERY:

alter type insenum add value 'i19' before 'L2';
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'type insenum add value 'i19' before 'L2'' at line 1")

-----------
QUERY:

alter type insenum add value 'i20' before 'L2';
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'type insenum add value 'i20' before 'L2'' at line 1")

-----------
QUERY:

alter type insenum add value 'i21' before 'L2';
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'type insenum add value 'i21' before 'L2'' at line 1")

-----------
QUERY:

alter type insenum add value 'i22' before 'L2';
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'type insenum add value 'i22' before 'L2'' at line 1")

-----------
QUERY:

alter type insenum add value 'i23' before 'L2';
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'type insenum add value 'i23' before 'L2'' at line 1")

-----------
QUERY:

alter type insenum add value 'i24' before 'L2';
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'type insenum add value 'i24' before 'L2'' at line 1")

-----------
QUERY:

alter type insenum add value 'i25' before 'L2';
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'type insenum add value 'i25' before 'L2'' at line 1")

-----------
QUERY:

alter type insenum add value 'i26' before 'L2';
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'type insenum add value 'i26' before 'L2'' at line 1")

-----------
QUERY:

alter type insenum add value 'i27' before 'L2';
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'type insenum add value 'i27' before 'L2'' at line 1")

-----------
QUERY:

alter type insenum add value 'i28' before 'L2';
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'type insenum add value 'i28' before 'L2'' at line 1")

-----------
QUERY:

alter type insenum add value 'i29' before 'L2';
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'type insenum add value 'i29' before 'L2'' at line 1")

-----------
QUERY:

alter type insenum add value 'i30' before 'L2';
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'type insenum add value 'i30' before 'L2'' at line 1")

-----------
QUERY:


-- The exact values of enumsortorder will now depend on the local properties
-- of float4, but in any reasonable implementation we should get at least
-- 20 splits before having to renumber /* REPLACED */, so only hide values > 20.

SELECT enumlabel,
       case when enumsortorder > 20 then null else enumsortorder end as so
FROM pg_enum
WHERE enumtypid = 'insenum'::regtype
ORDER BY enumsortorder;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::regtype\nORDER BY enumsortorder' at line 8")

-----------
QUERY:


--
-- Basic table creation, row selection
--
CREATE TABLE enumtest (col rainbow);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'rainbow)' at line 4")

-----------
QUERY:

INSERT INTO enumtest values ('red'), ('orange'), ('yellow'), ('green');
RESULT:
	ERROR - (1146, "Table 'test.enumtest' doesn't exist")

-----------
QUERY:

COPY enumtest FROM stdin;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'COPY enumtest FROM stdin' at line 1")

-----------
QUERY:

blue
purple
\.
SELECT * FROM enumtest;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'blue\npurple\n\\.\nSELECT * FROM enumtest' at line 1")

-----------
QUERY:


--
-- Operators, no index
--
SELECT * FROM enumtest WHERE col = 'orange';
RESULT:
	ERROR - (1146, "Table 'test.enumtest' doesn't exist")

-----------
QUERY:

SELECT * FROM enumtest WHERE col <> 'orange' ORDER BY col;
RESULT:
	ERROR - (1146, "Table 'test.enumtest' doesn't exist")

-----------
QUERY:

SELECT * FROM enumtest WHERE col > 'yellow' ORDER BY col;
RESULT:
	ERROR - (1146, "Table 'test.enumtest' doesn't exist")

-----------
QUERY:

SELECT * FROM enumtest WHERE col >= 'yellow' ORDER BY col;
RESULT:
	ERROR - (1146, "Table 'test.enumtest' doesn't exist")

-----------
QUERY:

SELECT * FROM enumtest WHERE col < 'green' ORDER BY col;
RESULT:
	ERROR - (1146, "Table 'test.enumtest' doesn't exist")

-----------
QUERY:

SELECT * FROM enumtest WHERE col <= 'green' ORDER BY col;
RESULT:
	ERROR - (1146, "Table 'test.enumtest' doesn't exist")

-----------
QUERY:


--
-- Cast to/from text
--
SELECT 'red'::rainbow::text || 'hithere';
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::rainbow::text || 'hithere'' at line 4")

-----------
QUERY:

SELECT 'red'::text::rainbow = 'red'::rainbow;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::text::rainbow = 'red'::rainbow' at line 1")

-----------
QUERY:


--
-- Aggregates
--
SELECT min(col) FROM enumtest;
RESULT:
	ERROR - (1146, "Table 'test.enumtest' doesn't exist")

-----------
QUERY:

SELECT max(col) FROM enumtest;
RESULT:
	ERROR - (1146, "Table 'test.enumtest' doesn't exist")

-----------
QUERY:

SELECT max(col) FROM enumtest WHERE col < 'green';
RESULT:
	ERROR - (1146, "Table 'test.enumtest' doesn't exist")

-----------
QUERY:


--
-- Index tests, force use of index
--
SET enable_seqscan = off;
RESULT:
	ERROR - (1193, "Unknown system variable 'enable_seqscan'")

-----------
QUERY:

SET enable_bitmapscan = off;
RESULT:
	ERROR - (1193, "Unknown system variable 'enable_bitmapscan'")

-----------
QUERY:


--
-- Btree index / opclass with the various operators
--
CREATE UNIQUE INDEX enumtest_btree ON enumtest USING btree (col);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'USING btree (col)' at line 4")

-----------
QUERY:

SELECT * FROM enumtest WHERE col = 'orange';
RESULT:
	ERROR - (1146, "Table 'test.enumtest' doesn't exist")

-----------
QUERY:

SELECT * FROM enumtest WHERE col <> 'orange' ORDER BY col;
RESULT:
	ERROR - (1146, "Table 'test.enumtest' doesn't exist")

-----------
QUERY:

SELECT * FROM enumtest WHERE col > 'yellow' ORDER BY col;
RESULT:
	ERROR - (1146, "Table 'test.enumtest' doesn't exist")

-----------
QUERY:

SELECT * FROM enumtest WHERE col >= 'yellow' ORDER BY col;
RESULT:
	ERROR - (1146, "Table 'test.enumtest' doesn't exist")

-----------
QUERY:

SELECT * FROM enumtest WHERE col < 'green' ORDER BY col;
RESULT:
	ERROR - (1146, "Table 'test.enumtest' doesn't exist")

-----------
QUERY:

SELECT * FROM enumtest WHERE col <= 'green' ORDER BY col;
RESULT:
	ERROR - (1146, "Table 'test.enumtest' doesn't exist")

-----------
QUERY:

SELECT min(col) FROM enumtest;
RESULT:
	ERROR - (1146, "Table 'test.enumtest' doesn't exist")

-----------
QUERY:

SELECT max(col) FROM enumtest;
RESULT:
	ERROR - (1146, "Table 'test.enumtest' doesn't exist")

-----------
QUERY:

SELECT max(col) FROM enumtest WHERE col < 'green';
RESULT:
	ERROR - (1146, "Table 'test.enumtest' doesn't exist")

-----------
QUERY:

DROP INDEX enumtest_btree;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '' at line 1")

-----------
QUERY:


--
-- Hash index / opclass with the = operator
--
CREATE INDEX enumtest_hash ON enumtest USING hash (col);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'USING hash (col)' at line 4")

-----------
QUERY:

SELECT * FROM enumtest WHERE col = 'orange';
RESULT:
	ERROR - (1146, "Table 'test.enumtest' doesn't exist")

-----------
QUERY:

DROP INDEX enumtest_hash;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '' at line 1")

-----------
QUERY:


--
-- End index tests
--
RESET enable_seqscan;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'enable_seqscan' at line 4")

-----------
QUERY:

RESET enable_bitmapscan;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'enable_bitmapscan' at line 1")

-----------
QUERY:


--
-- Domains over enums
--
CREATE DOMAIN rgb AS rainbow CHECK (VALUE IN ('red', 'green', 'blue'));
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'DOMAIN rgb AS rainbow CHECK (VALUE IN ('red', 'green', 'blue'))' at line 4")

-----------
QUERY:

SELECT 'red'::rgb;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::rgb' at line 1")

-----------
QUERY:

SELECT 'purple'::rgb;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::rgb' at line 1")

-----------
QUERY:

SELECT 'purple'::rainbow::rgb;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::rainbow::rgb' at line 1")

-----------
QUERY:

DROP DOMAIN rgb;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'DOMAIN rgb' at line 1")

-----------
QUERY:


--
-- Arrays
--
SELECT '{red,green,blue}'::rainbow[];
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::rainbow[]' at line 4")

-----------
QUERY:

SELECT ('{red,green,blue}'::rainbow[])[2];
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::rainbow[])[2]' at line 1")

-----------
QUERY:

SELECT 'red' = ANY ('{red,green,blue}'::rainbow[]);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ''{red,green,blue}'::rainbow[])' at line 1")

-----------
QUERY:

SELECT 'yellow' = ANY ('{red,green,blue}'::rainbow[]);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ''{red,green,blue}'::rainbow[])' at line 1")

-----------
QUERY:

SELECT 'red' = ALL ('{red,green,blue}'::rainbow[]);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ''{red,green,blue}'::rainbow[])' at line 1")

-----------
QUERY:

SELECT 'red' = ALL ('{red,red}'::rainbow[]);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ''{red,red}'::rainbow[])' at line 1")

-----------
QUERY:


--
-- Support functions
--
SELECT enum_first(NULL::rainbow);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::rainbow)' at line 4")

-----------
QUERY:

SELECT enum_last('green'::rainbow);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::rainbow)' at line 1")

-----------
QUERY:

SELECT enum_range(NULL::rainbow);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::rainbow)' at line 1")

-----------
QUERY:

SELECT enum_range('orange'::rainbow, 'green'::rainbow);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::rainbow, 'green'::rainbow)' at line 1")

-----------
QUERY:

SELECT enum_range(NULL, 'green'::rainbow);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::rainbow)' at line 1")

-----------
QUERY:

SELECT enum_range('orange'::rainbow, NULL);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::rainbow, NULL)' at line 1")

-----------
QUERY:

SELECT enum_range(NULL::rainbow, NULL);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::rainbow, NULL)' at line 1")

-----------
QUERY:


--
-- User functions, can/* REPLACED */''t test perl/python etc here since may not be compiled.
--
CREATE FUNCTION echo_me(anyenum) RETURNS text AS $$
BEGIN
RETURN $1::text || 'omg';
END
$$ LANGUAGE plpgsql;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ') RETURNS text AS $$\nBEGIN\nRETURN $1::text || 'omg';\nEND\n$$ LANGUAGE plpgsql' at line 4")

-----------
QUERY:

SELECT echo_me('red'::rainbow);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::rainbow)' at line 1")

-----------
QUERY:

--
-- Concrete function should override generic one
--
CREATE FUNCTION echo_me(rainbow) RETURNS text AS $$
BEGIN
RETURN $1::text || 'wtf';
END
$$ LANGUAGE plpgsql;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ') RETURNS text AS $$\nBEGIN\nRETURN $1::text || 'wtf';\nEND\n$$ LANGUAGE plpgsql' at line 4")

-----------
QUERY:

SELECT echo_me('red'::rainbow);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::rainbow)' at line 1")

-----------
QUERY:

--
-- If we drop the original generic one, we don/* REPLACED */''t have to qualify the type
-- anymore, since there/* REPLACED */''s only one match
--
DROP FUNCTION echo_me(anyenum);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(anyenum)' at line 5")

-----------
QUERY:

SELECT echo_me('red');
RESULT:
	ERROR - (1305, 'FUNCTION test.echo_me does not exist')

-----------
QUERY:

DROP FUNCTION echo_me(rainbow);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(rainbow)' at line 1")

-----------
QUERY:


--
-- RI triggers on enum types
--
CREATE TABLE enumtest_parent (id rainbow PRIMARY KEY);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'rainbow PRIMARY KEY)' at line 4")

-----------
QUERY:

CREATE TABLE enumtest_child (parent rainbow REFERENCES enumtest_parent);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'rainbow REFERENCES enumtest_parent)' at line 1")

-----------
QUERY:

INSERT INTO enumtest_parent VALUES ('red');
RESULT:
	ERROR - (1146, "Table 'test.enumtest_parent' doesn't exist")

-----------
QUERY:

INSERT INTO enumtest_child VALUES ('red');
RESULT:
	ERROR - (1146, "Table 'test.enumtest_child' doesn't exist")

-----------
QUERY:

INSERT INTO enumtest_child VALUES ('blue');
RESULT:
	ERROR - (1146, "Table 'test.enumtest_child' doesn't exist")

-----------
QUERY:
  -- fail
DELETE FROM enumtest_parent;
RESULT:
	ERROR - (1146, "Table 'test.enumtest_parent' doesn't exist")

-----------
QUERY:
  -- fail
--
-- cross-type RI should fail
--
CREATE TYPE bogus AS ENUM('good', 'bad', 'ugly');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'TYPE bogus AS ENUM('good', 'bad', 'ugly')' at line 5")

-----------
QUERY:

CREATE TABLE enumtest_bogus_child(parent bogus REFERENCES enumtest_parent);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'bogus REFERENCES enumtest_parent)' at line 1")

-----------
QUERY:

DROP TYPE bogus;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'TYPE bogus' at line 1")

-----------
QUERY:


-- check renaming a value
ALTER TYPE rainbow RENAME VALUE 'red' TO 'crimson';
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'TYPE rainbow RENAME VALUE 'red' TO 'crimson'' at line 2")

-----------
QUERY:

SELECT enumlabel, enumsortorder
FROM pg_enum
WHERE enumtypid = 'rainbow'::regtype
ORDER BY 2;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::regtype\nORDER BY 2' at line 3")

-----------
QUERY:

-- check that renaming a non-existent value fails
ALTER TYPE rainbow RENAME VALUE 'red' TO 'crimson';
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'TYPE rainbow RENAME VALUE 'red' TO 'crimson'' at line 2")

-----------
QUERY:

-- check that renaming to an existent value fails
ALTER TYPE rainbow RENAME VALUE 'blue' TO 'green';
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'TYPE rainbow RENAME VALUE 'blue' TO 'green'' at line 2")

-----------
QUERY:


--
-- check transactional behaviour of ALTER TYPE ... ADD VALUE
--
CREATE TYPE bogus AS ENUM('good');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'TYPE bogus AS ENUM('good')' at line 4")

-----------
QUERY:


-- check that we can add new values to existing enums in a transaction
-- but we can/* REPLACED */''t use them
BEGIN;
RESULT:
	[]

-----------
QUERY:

ALTER TYPE bogus ADD VALUE 'new';
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'TYPE bogus ADD VALUE 'new'' at line 1")

-----------
QUERY:

SAVEPOINT x;
RESULT:
	[]

-----------
QUERY:

SELECT 'new'::bogus;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::bogus' at line 1")

-----------
QUERY:
  -- unsafe
ROLLBACK TO x;
RESULT:
	[]

-----------
QUERY:

SELECT enum_first(null::bogus);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::bogus)' at line 1")

-----------
QUERY:
  -- safe
SELECT enum_last(null::bogus);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::bogus)' at line 2")

-----------
QUERY:
  -- unsafe
ROLLBACK TO x;
RESULT:
	[]

-----------
QUERY:

SELECT enum_range(null::bogus);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::bogus)' at line 1")

-----------
QUERY:
  -- unsafe
ROLLBACK TO x;
RESULT:
	[]

-----------
QUERY:

COMMIT;
RESULT:
	[]

-----------
QUERY:

SELECT 'new'::bogus;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::bogus' at line 1")

-----------
QUERY:
  -- now safe
SELECT enumlabel, enumsortorder
FROM pg_enum
WHERE enumtypid = 'bogus'::regtype
ORDER BY 2;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::regtype\nORDER BY 2' at line 4")

-----------
QUERY:


-- check that we recognize the case where the enum already existed but was
-- modified in the current txn /* REPLACED */, this should not be considered safe
BEGIN;
RESULT:
	[]

-----------
QUERY:

ALTER TYPE bogus RENAME TO bogon;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'TYPE bogus RENAME TO bogon' at line 1")

-----------
QUERY:

ALTER TYPE bogon ADD VALUE 'bad';
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'TYPE bogon ADD VALUE 'bad'' at line 1")

-----------
QUERY:

SELECT 'bad'::bogon;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::bogon' at line 1")

-----------
QUERY:

ROLLBACK;
RESULT:
	[]

-----------
QUERY:


-- but a renamed value is safe to use later in same transaction
BEGIN;
RESULT:
	[]

-----------
QUERY:

ALTER TYPE bogus RENAME VALUE 'good' to 'bad';
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'TYPE bogus RENAME VALUE 'good' to 'bad'' at line 1")

-----------
QUERY:

SELECT 'bad'::bogus;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::bogus' at line 1")

-----------
QUERY:

ROLLBACK;
RESULT:
	[]

-----------
QUERY:


DROP TYPE bogus;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'TYPE bogus' at line 1")

-----------
QUERY:


-- check that values created during CREATE TYPE can be used in any case
BEGIN;
RESULT:
	[]

-----------
QUERY:

CREATE TYPE bogus AS ENUM('good','bad','ugly');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'TYPE bogus AS ENUM('good','bad','ugly')' at line 1")

-----------
QUERY:

ALTER TYPE bogus RENAME TO bogon;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'TYPE bogus RENAME TO bogon' at line 1")

-----------
QUERY:

select enum_range(null::bogon);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::bogon)' at line 1")

-----------
QUERY:

ROLLBACK;
RESULT:
	[]

-----------
QUERY:


-- ideally, we/* REPLACED */''d allow this usage /* REPLACED */, but it requires keeping track of whether
-- the enum type was created in the current transaction, which is expensive
BEGIN;
RESULT:
	[]

-----------
QUERY:

CREATE TYPE bogus AS ENUM('good');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'TYPE bogus AS ENUM('good')' at line 1")

-----------
QUERY:

ALTER TYPE bogus RENAME TO bogon;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'TYPE bogus RENAME TO bogon' at line 1")

-----------
QUERY:

ALTER TYPE bogon ADD VALUE 'bad';
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'TYPE bogon ADD VALUE 'bad'' at line 1")

-----------
QUERY:

ALTER TYPE bogon ADD VALUE 'ugly';
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'TYPE bogon ADD VALUE 'ugly'' at line 1")

-----------
QUERY:

select enum_range(null::bogon);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::bogon)' at line 1")

-----------
QUERY:
  -- fails
ROLLBACK;
RESULT:
	[]

-----------
QUERY:


--
-- Cleanup
--
DROP TABLE enumtest_child;
RESULT:
	ERROR - (1051, "Unknown table 'test.enumtest_child'")

-----------
QUERY:

DROP TABLE enumtest_parent;
RESULT:
	ERROR - (1051, "Unknown table 'test.enumtest_parent'")

-----------
QUERY:

DROP TABLE enumtest;
RESULT:
	ERROR - (1051, "Unknown table 'test.enumtest'")

-----------
QUERY:

DROP TYPE rainbow;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'TYPE rainbow' at line 1")

-----------
QUERY:


--
-- Verify properly cleaned up
--
SELECT COUNT(*) FROM pg_type WHERE typname = 'rainbow';
RESULT:
	ERROR - (1146, "Table 'test.pg_type' doesn't exist")

-----------
QUERY:

SELECT * FROM pg_enum WHERE NOT EXISTS
  (SELECT 1 FROM pg_type WHERE pg_type.oid = enumtypid);
RESULT:
	ERROR - (1146, "Table 'test.pg_enum' doesn't exist")
