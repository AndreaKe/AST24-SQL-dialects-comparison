
-----------
QUERY:
--
-- Test inheritance features
--
CREATE TABLE a (aa TEXT);
RESULT:
	[]

-----------
QUERY:

CREATE TABLE b (bb TEXT) INHERITS (a);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'INHERITS (a)' at line 1")

-----------
QUERY:

CREATE TABLE c (cc TEXT) INHERITS (a);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'INHERITS (a)' at line 1")

-----------
QUERY:

CREATE TABLE d (dd TEXT) INHERITS (b,c,a);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'INHERITS (b,c,a)' at line 1")

-----------
QUERY:


INSERT INTO a(aa) VALUES('aaa');
RESULT:
	[]

-----------
QUERY:

INSERT INTO a(aa) VALUES('aaaa');
RESULT:
	[]

-----------
QUERY:

INSERT INTO a(aa) VALUES('aaaaa');
RESULT:
	[]

-----------
QUERY:

INSERT INTO a(aa) VALUES('aaaaaa');
RESULT:
	[]

-----------
QUERY:

INSERT INTO a(aa) VALUES('aaaaaaa');
RESULT:
	[]

-----------
QUERY:

INSERT INTO a(aa) VALUES('aaaaaaaa');
RESULT:
	[]

-----------
QUERY:


INSERT INTO b(aa) VALUES('bbb');
RESULT:
	ERROR - (1146, "Table 'test.b' doesn't exist")

-----------
QUERY:

INSERT INTO b(aa) VALUES('bbbb');
RESULT:
	ERROR - (1146, "Table 'test.b' doesn't exist")

-----------
QUERY:

INSERT INTO b(aa) VALUES('bbbbb');
RESULT:
	ERROR - (1146, "Table 'test.b' doesn't exist")

-----------
QUERY:

INSERT INTO b(aa) VALUES('bbbbbb');
RESULT:
	ERROR - (1146, "Table 'test.b' doesn't exist")

-----------
QUERY:

INSERT INTO b(aa) VALUES('bbbbbbb');
RESULT:
	ERROR - (1146, "Table 'test.b' doesn't exist")

-----------
QUERY:

INSERT INTO b(aa) VALUES('bbbbbbbb');
RESULT:
	ERROR - (1146, "Table 'test.b' doesn't exist")

-----------
QUERY:


INSERT INTO c(aa) VALUES('ccc');
RESULT:
	ERROR - (1146, "Table 'test.c' doesn't exist")

-----------
QUERY:

INSERT INTO c(aa) VALUES('cccc');
RESULT:
	ERROR - (1146, "Table 'test.c' doesn't exist")

-----------
QUERY:

INSERT INTO c(aa) VALUES('ccccc');
RESULT:
	ERROR - (1146, "Table 'test.c' doesn't exist")

-----------
QUERY:

INSERT INTO c(aa) VALUES('cccccc');
RESULT:
	ERROR - (1146, "Table 'test.c' doesn't exist")

-----------
QUERY:

INSERT INTO c(aa) VALUES('ccccccc');
RESULT:
	ERROR - (1146, "Table 'test.c' doesn't exist")

-----------
QUERY:

INSERT INTO c(aa) VALUES('cccccccc');
RESULT:
	ERROR - (1146, "Table 'test.c' doesn't exist")

-----------
QUERY:


INSERT INTO d(aa) VALUES('ddd');
RESULT:
	ERROR - (1146, "Table 'test.d' doesn't exist")

-----------
QUERY:

INSERT INTO d(aa) VALUES('dddd');
RESULT:
	ERROR - (1146, "Table 'test.d' doesn't exist")

-----------
QUERY:

INSERT INTO d(aa) VALUES('ddddd');
RESULT:
	ERROR - (1146, "Table 'test.d' doesn't exist")

-----------
QUERY:

INSERT INTO d(aa) VALUES('dddddd');
RESULT:
	ERROR - (1146, "Table 'test.d' doesn't exist")

-----------
QUERY:

INSERT INTO d(aa) VALUES('ddddddd');
RESULT:
	ERROR - (1146, "Table 'test.d' doesn't exist")

-----------
QUERY:

INSERT INTO d(aa) VALUES('dddddddd');
RESULT:
	ERROR - (1146, "Table 'test.d' doesn't exist")

-----------
QUERY:


SELECT relname, a.* FROM a, pg_class where a.tableoid = pg_class.oid;
RESULT:
	ERROR - (1146, "Table 'test.pg_class' doesn't exist")

-----------
QUERY:

SELECT relname, b.* FROM b, pg_class where b.tableoid = pg_class.oid;
RESULT:
	ERROR - (1146, "Table 'test.b' doesn't exist")

-----------
QUERY:

SELECT relname, c.* FROM c, pg_class where c.tableoid = pg_class.oid;
RESULT:
	ERROR - (1146, "Table 'test.c' doesn't exist")

-----------
QUERY:

SELECT relname, d.* FROM d, pg_class where d.tableoid = pg_class.oid;
RESULT:
	ERROR - (1146, "Table 'test.d' doesn't exist")

-----------
QUERY:

SELECT relname, a.* FROM ONLY a, pg_class where a.tableoid = pg_class.oid;
RESULT:
	ERROR - (1146, "Table 'test.ONLY' doesn't exist")

-----------
QUERY:

SELECT relname, b.* FROM ONLY b, pg_class where b.tableoid = pg_class.oid;
RESULT:
	ERROR - (1146, "Table 'test.ONLY' doesn't exist")

-----------
QUERY:

SELECT relname, c.* FROM ONLY c, pg_class where c.tableoid = pg_class.oid;
RESULT:
	ERROR - (1146, "Table 'test.ONLY' doesn't exist")

-----------
QUERY:

SELECT relname, d.* FROM ONLY d, pg_class where d.tableoid = pg_class.oid;
RESULT:
	ERROR - (1146, "Table 'test.ONLY' doesn't exist")

-----------
QUERY:


UPDATE a SET aa='zzzz' WHERE aa='aaaa';
RESULT:
	[]

-----------
QUERY:

UPDATE ONLY a SET aa='zzzzz' WHERE aa='aaaaa';
RESULT:
	ERROR - (1146, "Table 'test.ONLY' doesn't exist")

-----------
QUERY:

UPDATE b SET aa='zzz' WHERE aa='aaa';
RESULT:
	ERROR - (1146, "Table 'test.b' doesn't exist")

-----------
QUERY:

UPDATE ONLY b SET aa='zzz' WHERE aa='aaa';
RESULT:
	ERROR - (1146, "Table 'test.ONLY' doesn't exist")

-----------
QUERY:

UPDATE a SET aa='zzzzzz' WHERE aa LIKE 'aaa%';
RESULT:
	[]

-----------
QUERY:


SELECT relname, a.* FROM a, pg_class where a.tableoid = pg_class.oid;
RESULT:
	ERROR - (1146, "Table 'test.pg_class' doesn't exist")

-----------
QUERY:

SELECT relname, b.* FROM b, pg_class where b.tableoid = pg_class.oid;
RESULT:
	ERROR - (1146, "Table 'test.b' doesn't exist")

-----------
QUERY:

SELECT relname, c.* FROM c, pg_class where c.tableoid = pg_class.oid;
RESULT:
	ERROR - (1146, "Table 'test.c' doesn't exist")

-----------
QUERY:

SELECT relname, d.* FROM d, pg_class where d.tableoid = pg_class.oid;
RESULT:
	ERROR - (1146, "Table 'test.d' doesn't exist")

-----------
QUERY:

SELECT relname, a.* FROM ONLY a, pg_class where a.tableoid = pg_class.oid;
RESULT:
	ERROR - (1146, "Table 'test.ONLY' doesn't exist")

-----------
QUERY:

SELECT relname, b.* FROM ONLY b, pg_class where b.tableoid = pg_class.oid;
RESULT:
	ERROR - (1146, "Table 'test.ONLY' doesn't exist")

-----------
QUERY:

SELECT relname, c.* FROM ONLY c, pg_class where c.tableoid = pg_class.oid;
RESULT:
	ERROR - (1146, "Table 'test.ONLY' doesn't exist")

-----------
QUERY:

SELECT relname, d.* FROM ONLY d, pg_class where d.tableoid = pg_class.oid;
RESULT:
	ERROR - (1146, "Table 'test.ONLY' doesn't exist")

-----------
QUERY:


UPDATE b SET aa='new';
RESULT:
	ERROR - (1146, "Table 'test.b' doesn't exist")

-----------
QUERY:


SELECT relname, a.* FROM a, pg_class where a.tableoid = pg_class.oid;
RESULT:
	ERROR - (1146, "Table 'test.pg_class' doesn't exist")

-----------
QUERY:

SELECT relname, b.* FROM b, pg_class where b.tableoid = pg_class.oid;
RESULT:
	ERROR - (1146, "Table 'test.b' doesn't exist")

-----------
QUERY:

SELECT relname, c.* FROM c, pg_class where c.tableoid = pg_class.oid;
RESULT:
	ERROR - (1146, "Table 'test.c' doesn't exist")

-----------
QUERY:

SELECT relname, d.* FROM d, pg_class where d.tableoid = pg_class.oid;
RESULT:
	ERROR - (1146, "Table 'test.d' doesn't exist")

-----------
QUERY:

SELECT relname, a.* FROM ONLY a, pg_class where a.tableoid = pg_class.oid;
RESULT:
	ERROR - (1146, "Table 'test.ONLY' doesn't exist")

-----------
QUERY:

SELECT relname, b.* FROM ONLY b, pg_class where b.tableoid = pg_class.oid;
RESULT:
	ERROR - (1146, "Table 'test.ONLY' doesn't exist")

-----------
QUERY:

SELECT relname, c.* FROM ONLY c, pg_class where c.tableoid = pg_class.oid;
RESULT:
	ERROR - (1146, "Table 'test.ONLY' doesn't exist")

-----------
QUERY:

SELECT relname, d.* FROM ONLY d, pg_class where d.tableoid = pg_class.oid;
RESULT:
	ERROR - (1146, "Table 'test.ONLY' doesn't exist")

-----------
QUERY:


UPDATE a SET aa='new';
RESULT:
	[]

-----------
QUERY:


DELETE FROM ONLY c WHERE aa='new';
RESULT:
	ERROR - (1146, "Table 'test.ONLY' doesn't exist")

-----------
QUERY:


SELECT relname, a.* FROM a, pg_class where a.tableoid = pg_class.oid;
RESULT:
	ERROR - (1146, "Table 'test.pg_class' doesn't exist")

-----------
QUERY:

SELECT relname, b.* FROM b, pg_class where b.tableoid = pg_class.oid;
RESULT:
	ERROR - (1146, "Table 'test.b' doesn't exist")

-----------
QUERY:

SELECT relname, c.* FROM c, pg_class where c.tableoid = pg_class.oid;
RESULT:
	ERROR - (1146, "Table 'test.c' doesn't exist")

-----------
QUERY:

SELECT relname, d.* FROM d, pg_class where d.tableoid = pg_class.oid;
RESULT:
	ERROR - (1146, "Table 'test.d' doesn't exist")

-----------
QUERY:

SELECT relname, a.* FROM ONLY a, pg_class where a.tableoid = pg_class.oid;
RESULT:
	ERROR - (1146, "Table 'test.ONLY' doesn't exist")

-----------
QUERY:

SELECT relname, b.* FROM ONLY b, pg_class where b.tableoid = pg_class.oid;
RESULT:
	ERROR - (1146, "Table 'test.ONLY' doesn't exist")

-----------
QUERY:

SELECT relname, c.* FROM ONLY c, pg_class where c.tableoid = pg_class.oid;
RESULT:
	ERROR - (1146, "Table 'test.ONLY' doesn't exist")

-----------
QUERY:

SELECT relname, d.* FROM ONLY d, pg_class where d.tableoid = pg_class.oid;
RESULT:
	ERROR - (1146, "Table 'test.ONLY' doesn't exist")

-----------
QUERY:


DELETE FROM a;
RESULT:
	[]

-----------
QUERY:


SELECT relname, a.* FROM a, pg_class where a.tableoid = pg_class.oid;
RESULT:
	ERROR - (1146, "Table 'test.pg_class' doesn't exist")

-----------
QUERY:

SELECT relname, b.* FROM b, pg_class where b.tableoid = pg_class.oid;
RESULT:
	ERROR - (1146, "Table 'test.b' doesn't exist")

-----------
QUERY:

SELECT relname, c.* FROM c, pg_class where c.tableoid = pg_class.oid;
RESULT:
	ERROR - (1146, "Table 'test.c' doesn't exist")

-----------
QUERY:

SELECT relname, d.* FROM d, pg_class where d.tableoid = pg_class.oid;
RESULT:
	ERROR - (1146, "Table 'test.d' doesn't exist")

-----------
QUERY:

SELECT relname, a.* FROM ONLY a, pg_class where a.tableoid = pg_class.oid;
RESULT:
	ERROR - (1146, "Table 'test.ONLY' doesn't exist")

-----------
QUERY:

SELECT relname, b.* FROM ONLY b, pg_class where b.tableoid = pg_class.oid;
RESULT:
	ERROR - (1146, "Table 'test.ONLY' doesn't exist")

-----------
QUERY:

SELECT relname, c.* FROM ONLY c, pg_class where c.tableoid = pg_class.oid;
RESULT:
	ERROR - (1146, "Table 'test.ONLY' doesn't exist")

-----------
QUERY:

SELECT relname, d.* FROM ONLY d, pg_class where d.tableoid = pg_class.oid;
RESULT:
	ERROR - (1146, "Table 'test.ONLY' doesn't exist")

-----------
QUERY:


-- Confirm PRIMARY KEY adds NOT NULL constraint to child table
CREATE TEMP TABLE z (b TEXT, PRIMARY KEY(aa, b)) inherits (a);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'TEMP TABLE z (b TEXT, PRIMARY KEY(aa, b)) inherits (a)' at line 2")

-----------
QUERY:

INSERT INTO z VALUES (NULL, 'text');
RESULT:
	ERROR - (1146, "Table 'test.z' doesn't exist")

-----------
QUERY:
 -- should fail

-- Check inherited UPDATE with first child excluded
create table some_tab (f1 int, f2 int, f3 int, check (f1 < 10) no inherit);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'no inherit)' at line 4")

-----------
QUERY:

create table some_tab_child () inherits(some_tab);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ') inherits(some_tab)' at line 1")

-----------
QUERY:

insert into some_tab_child select i, i+1, 0 from generate_series(1,1000) i;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(1,1000) i' at line 1")

-----------
QUERY:

create index on some_tab_child(f1, f2);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'on some_tab_child(f1, f2)' at line 1")

-----------
QUERY:

-- while at it, also check that statement-level triggers fire
create function some_tab_stmt_trig_func() returns trigger as
$$begin raise notice 'updating some_tab'; return NULL; end;$$
language plpgsql;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'trigger as\n$$begin raise notice 'updating some_tab'; return NULL; end;$$\nlanguag' at line 2")

-----------
QUERY:

create trigger some_tab_stmt_trig
  before update on some_tab execute function some_tab_stmt_trig_func();
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'execute function some_tab_stmt_trig_func()' at line 2")

-----------
QUERY:


explain (costs off)
update some_tab set f3 = 11 where f1 = 12 and f2 = 13;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off)\nupdate some_tab set f3 = 11 where f1 = 12 and f2 = 13' at line 1")

-----------
QUERY:

update some_tab set f3 = 11 where f1 = 12 and f2 = 13;
RESULT:
	ERROR - (1146, "Table 'test.some_tab' doesn't exist")

-----------
QUERY:


drop table some_tab cascade;
RESULT:
	ERROR - (1051, "Unknown table 'test.some_tab'")

-----------
QUERY:

drop function some_tab_stmt_trig_func();
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '()' at line 1")

-----------
QUERY:


-- Check inherited UPDATE with all children excluded
create table some_tab (a int, b int);
RESULT:
	[]

-----------
QUERY:

create table some_tab_child () inherits (some_tab);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ') inherits (some_tab)' at line 1")

-----------
QUERY:

insert into some_tab_child values(1,2);
RESULT:
	ERROR - (1146, "Table 'test.some_tab_child' doesn't exist")

-----------
QUERY:


explain (verbose, costs off)
update some_tab set a = a + 1 where false;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'verbose, costs off)\nupdate some_tab set a = a + 1 where false' at line 1")

-----------
QUERY:

update some_tab set a = a + 1 where false;
RESULT:
	[]

-----------
QUERY:

explain (verbose, costs off)
update some_tab set a = a + 1 where false returning b, a;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'verbose, costs off)\nupdate some_tab set a = a + 1 where false returning b, a' at line 1")

-----------
QUERY:

update some_tab set a = a + 1 where false returning b, a;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'returning b, a' at line 1")

-----------
QUERY:

table some_tab;
RESULT:
	()

-----------
QUERY:


drop table some_tab cascade;
RESULT:
	[]

-----------
QUERY:


-- Check UPDATE with inherited target and an inherited source table
create temp table foo(f1 int, f2 int);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'temp table foo(f1 int, f2 int)' at line 2")

-----------
QUERY:

create temp table foo2(f3 int) inherits (foo);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'temp table foo2(f3 int) inherits (foo)' at line 1")

-----------
QUERY:

create temp table bar(f1 int, f2 int);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'temp table bar(f1 int, f2 int)' at line 1")

-----------
QUERY:

create temp table bar2(f3 int) inherits (bar);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'temp table bar2(f3 int) inherits (bar)' at line 1")

-----------
QUERY:


insert into foo values(1,1);
RESULT:
	ERROR - (1146, "Table 'test.foo' doesn't exist")

-----------
QUERY:

insert into foo values(3,3);
RESULT:
	ERROR - (1146, "Table 'test.foo' doesn't exist")

-----------
QUERY:

insert into foo2 values(2,2,2);
RESULT:
	ERROR - (1146, "Table 'test.foo2' doesn't exist")

-----------
QUERY:

insert into foo2 values(3,3,3);
RESULT:
	ERROR - (1146, "Table 'test.foo2' doesn't exist")

-----------
QUERY:

insert into bar values(1,1);
RESULT:
	ERROR - (1146, "Table 'test.bar' doesn't exist")

-----------
QUERY:

insert into bar values(2,2);
RESULT:
	ERROR - (1146, "Table 'test.bar' doesn't exist")

-----------
QUERY:

insert into bar values(3,3);
RESULT:
	ERROR - (1146, "Table 'test.bar' doesn't exist")

-----------
QUERY:

insert into bar values(4,4);
RESULT:
	ERROR - (1146, "Table 'test.bar' doesn't exist")

-----------
QUERY:

insert into bar2 values(1,1,1);
RESULT:
	ERROR - (1146, "Table 'test.bar2' doesn't exist")

-----------
QUERY:

insert into bar2 values(2,2,2);
RESULT:
	ERROR - (1146, "Table 'test.bar2' doesn't exist")

-----------
QUERY:

insert into bar2 values(3,3,3);
RESULT:
	ERROR - (1146, "Table 'test.bar2' doesn't exist")

-----------
QUERY:

insert into bar2 values(4,4,4);
RESULT:
	ERROR - (1146, "Table 'test.bar2' doesn't exist")

-----------
QUERY:


update bar set f2 = f2 + 100 where f1 in (select f1 from foo);
RESULT:
	ERROR - (1146, "Table 'test.bar' doesn't exist")

-----------
QUERY:


select tableoid::regclass::text as relname, bar.* from bar order by 1,2;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::regclass::text as relname, bar.* from bar order by 1,2' at line 1")

-----------
QUERY:


-- Check UPDATE with inherited target and an appendrel subquery
update bar set f2 = f2 + 100
from
  ( select f1 from foo union all select f1+3 from foo ) ss
where bar.f1 = ss.f1;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'from\n  ( select f1 from foo union all select f1+3 from foo ) ss\nwhere bar.f1 = s' at line 3")

-----------
QUERY:


select tableoid::regclass::text as relname, bar.* from bar order by 1,2;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::regclass::text as relname, bar.* from bar order by 1,2' at line 1")

-----------
QUERY:


-- Check UPDATE with *partitioned* inherited target and an appendrel subquery
create table some_tab (a int);
RESULT:
	[]

-----------
QUERY:

insert into some_tab values (0);
RESULT:
	[]

-----------
QUERY:

create table some_tab_child () inherits (some_tab);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ') inherits (some_tab)' at line 1")

-----------
QUERY:

insert into some_tab_child values (1);
RESULT:
	ERROR - (1146, "Table 'test.some_tab_child' doesn't exist")

-----------
QUERY:

create table parted_tab (a int, b char) partition by list (a);
RESULT:
	ERROR - (1492, 'For LIST partitions each partition must be defined')

-----------
QUERY:

create table parted_tab_part1 partition of parted_tab for values in (1);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of parted_tab for values in (1)' at line 1")

-----------
QUERY:

create table parted_tab_part2 partition of parted_tab for values in (2);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of parted_tab for values in (2)' at line 1")

-----------
QUERY:

create table parted_tab_part3 partition of parted_tab for values in (3);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of parted_tab for values in (3)' at line 1")

-----------
QUERY:

insert into parted_tab values (1, 'a'), (2, 'a'), (3, 'a');
RESULT:
	ERROR - (1146, "Table 'test.parted_tab' doesn't exist")

-----------
QUERY:


update parted_tab set b = 'b'
from
  (select a from some_tab union all select a+1 from some_tab) ss (a)
where parted_tab.a = ss.a;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'from\n  (select a from some_tab union all select a+1 from some_tab) ss (a)\nwhere ' at line 2")

-----------
QUERY:

select tableoid::regclass::text as relname, parted_tab.* from parted_tab order by 1,2;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::regclass::text as relname, parted_tab.* from parted_tab order by 1,2' at line 1")

-----------
QUERY:


truncate parted_tab;
RESULT:
	ERROR - (1146, "Table 'test.parted_tab' doesn't exist")

-----------
QUERY:

insert into parted_tab values (1, 'a'), (2, 'a'), (3, 'a');
RESULT:
	ERROR - (1146, "Table 'test.parted_tab' doesn't exist")

-----------
QUERY:

update parted_tab set b = 'b'
from
  (select 0 from parted_tab union all select 1 from parted_tab) ss (a)
where parted_tab.a = ss.a;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'from\n  (select 0 from parted_tab union all select 1 from parted_tab) ss (a)\nwher' at line 2")

-----------
QUERY:

select tableoid::regclass::text as relname, parted_tab.* from parted_tab order by 1,2;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::regclass::text as relname, parted_tab.* from parted_tab order by 1,2' at line 1")

-----------
QUERY:


-- modifies partition key, but no rows will actually be updated
explain update parted_tab set a = 2 where false;
RESULT:
	ERROR - (1146, "Table 'test.parted_tab' doesn't exist")

-----------
QUERY:


drop table parted_tab;
RESULT:
	ERROR - (1051, "Unknown table 'test.parted_tab'")

-----------
QUERY:


-- Check UPDATE with multi-level partitioned inherited target
create table mlparted_tab (a int, b char, c text) partition by list (a);
RESULT:
	ERROR - (1492, 'For LIST partitions each partition must be defined')

-----------
QUERY:

create table mlparted_tab_part1 partition of mlparted_tab for values in (1);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of mlparted_tab for values in (1)' at line 1")

-----------
QUERY:

create table mlparted_tab_part2 partition of mlparted_tab for values in (2) partition by list (b);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of mlparted_tab for values in (2) partition by list (b)' at line 1")

-----------
QUERY:

create table mlparted_tab_part3 partition of mlparted_tab for values in (3);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of mlparted_tab for values in (3)' at line 1")

-----------
QUERY:

create table mlparted_tab_part2a partition of mlparted_tab_part2 for values in ('a');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of mlparted_tab_part2 for values in ('a')' at line 1")

-----------
QUERY:

create table mlparted_tab_part2b partition of mlparted_tab_part2 for values in ('b');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of mlparted_tab_part2 for values in ('b')' at line 1")

-----------
QUERY:

insert into mlparted_tab values (1, 'a'), (2, 'a'), (2, 'b'), (3, 'a');
RESULT:
	ERROR - (1146, "Table 'test.mlparted_tab' doesn't exist")

-----------
QUERY:


update mlparted_tab mlp set c = 'xxx'
from
  (select a from some_tab union all select a+1 from some_tab) ss (a)
where (mlp.a = ss.a and mlp.b = 'b') or mlp.a = 3;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'from\n  (select a from some_tab union all select a+1 from some_tab) ss (a)\nwhere ' at line 2")

-----------
QUERY:

select tableoid::regclass::text as relname, mlparted_tab.* from mlparted_tab order by 1,2;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::regclass::text as relname, mlparted_tab.* from mlparted_tab order by 1,2' at line 1")

-----------
QUERY:


drop table mlparted_tab;
RESULT:
	ERROR - (1051, "Unknown table 'test.mlparted_tab'")

-----------
QUERY:

drop table some_tab cascade;
RESULT:
	[]

-----------
QUERY:


/* Test multiple inheritance of column defaults */

CREATE TABLE firstparent (tomorrow date default now()::date + 1);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::date + 1)' at line 3")

-----------
QUERY:

CREATE TABLE secondparent (tomorrow date default  now() :: date  +  1);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ':: date  +  1)' at line 1")

-----------
QUERY:

CREATE TABLE jointchild () INHERITS (firstparent, secondparent);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ') INHERITS (firstparent, secondparent)' at line 1")

-----------
QUERY:
  -- ok
CREATE TABLE thirdparent (tomorrow date default now()::date - 1);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::date - 1)' at line 2")

-----------
QUERY:

CREATE TABLE otherchild () INHERITS (firstparent, thirdparent);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ') INHERITS (firstparent, thirdparent)' at line 1")

-----------
QUERY:
  -- not ok
CREATE TABLE otherchild (tomorrow date default now())
  INHERITS (firstparent, thirdparent);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'INHERITS (firstparent, thirdparent)' at line 3")

-----------
QUERY:
  -- ok, child resolves ambiguous default

DROP TABLE firstparent, secondparent, jointchild, thirdparent, otherchild;
RESULT:
	ERROR - (1051, "Unknown table 'test.firstparent,test.secondparent,test.jointchild,test.thirdparent,test.otherchild'")

-----------
QUERY:


-- Test changing the type of inherited columns
insert into d values('test','one','two','three');
RESULT:
	ERROR - (1146, "Table 'test.d' doesn't exist")

-----------
QUERY:

alter table a alter column aa type integer using bit_length(aa);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'type integer using bit_length(aa)' at line 1")

-----------
QUERY:

select * from d;
RESULT:
	ERROR - (1146, "Table 'test.d' doesn't exist")

-----------
QUERY:


-- The above verified that we can change the type of a multiply-inherited
-- column /* REPLACED */ , but we should reject that if any definition was inherited from
-- an unrelated parent.
create temp table parent1(f1 int, f2 int);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'temp table parent1(f1 int, f2 int)' at line 4")

-----------
QUERY:

create temp table parent2(f1 int, f3 bigint);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'temp table parent2(f1 int, f3 bigint)' at line 1")

-----------
QUERY:

create temp table childtab(f4 int) inherits(parent1, parent2);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'temp table childtab(f4 int) inherits(parent1, parent2)' at line 1")

-----------
QUERY:

alter table parent1 alter column f1 type bigint;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'type bigint' at line 1")

-----------
QUERY:
  -- fail, conflict w/parent2
alter table parent1 alter column f2 type bigint;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'type bigint' at line 2")

-----------
QUERY:
  -- ok

-- Test non-inheritable parent constraints
create table p1(ff1 int);
RESULT:
	[]

-----------
QUERY:

alter table p1 add constraint p1chk check (ff1 > 0) no inherit;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'no inherit' at line 1")

-----------
QUERY:

alter table p1 add constraint p2chk check (ff1 > 10);
RESULT:
	[]

-----------
QUERY:

-- connoinherit should be true for NO INHERIT constraint
select pc.relname, pgc.conname, pgc.contype, pgc.conislocal, pgc.coninhcount, pgc.connoinherit from pg_class as pc inner join pg_constraint as pgc on (pgc.conrelid = pc.oid) where pc.relname = 'p1' order by 1,2;
RESULT:
	ERROR - (1146, "Table 'test.pg_class' doesn't exist")

-----------
QUERY:


-- Test that child does not inherit NO INHERIT constraints
create table c1 () inherits (p1);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ') inherits (p1)' at line 2")

-----------
QUERY:

-- \d p1
-- \d c1

-- Test that child does not override inheritable constraints of the parent
create table c2 (constraint p2chk check (ff1 > 10) no inherit) inherits (p1);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'no inherit) inherits (p1)' at line 5")

-----------
QUERY:
	--fails

drop table p1 cascade;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '--fails\n\ndrop table p1 cascade' at line 1")

-----------
QUERY:


-- Tests for casting between the rowtypes of parent and child
-- tables. See the pgsql-hackers thread beginning Dec. 4/04
create table base (i integer);
RESULT:
	[]

-----------
QUERY:

create table derived () inherits (base);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ') inherits (base)' at line 1")

-----------
QUERY:

create table more_derived (like derived, b int) inherits (derived);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ', b int) inherits (derived)' at line 1")

-----------
QUERY:

insert into derived (i) values (0);
RESULT:
	ERROR - (1146, "Table 'test.derived' doesn't exist")

-----------
QUERY:

select derived::base from derived;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::base from derived' at line 1")

-----------
QUERY:

select NULL::derived::base;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::derived::base' at line 1")

-----------
QUERY:

-- remove redundant conversions.
explain (verbose on, costs off) select row(i, b)::more_derived::derived::base from more_derived;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'verbose on, costs off) select row(i, b)::more_derived::derived::base from more_d' at line 2")

-----------
QUERY:

explain (verbose on, costs off) select (1, 2)::more_derived::derived::base;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'verbose on, costs off) select (1, 2)::more_derived::derived::base' at line 1")

-----------
QUERY:

drop table more_derived;
RESULT:
	ERROR - (1051, "Unknown table 'test.more_derived'")

-----------
QUERY:

drop table derived;
RESULT:
	ERROR - (1051, "Unknown table 'test.derived'")

-----------
QUERY:

drop table base;
RESULT:
	[]

-----------
QUERY:


create table p1(ff1 int);
RESULT:
	ERROR - (1050, "Table 'p1' already exists")

-----------
QUERY:

create table p2(f1 text);
RESULT:
	[]

-----------
QUERY:

create function p2text(p2) returns text as 'select $1.f1' language sql;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ') returns text as 'select $1.f1' language sql' at line 1")

-----------
QUERY:

create table c1(f3 int) inherits(p1,p2);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'inherits(p1,p2)' at line 1")

-----------
QUERY:

insert into c1 values(123456789, 'hi', 42);
RESULT:
	ERROR - (1146, "Table 'test.c1' doesn't exist")

-----------
QUERY:

select p2text(c1.*) from c1;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '*) from c1' at line 1")

-----------
QUERY:

drop function p2text(p2);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(p2)' at line 1")

-----------
QUERY:

drop table c1;
RESULT:
	ERROR - (1051, "Unknown table 'test.c1'")

-----------
QUERY:

drop table p2;
RESULT:
	[]

-----------
QUERY:

drop table p1;
RESULT:
	[]

-----------
QUERY:


CREATE TABLE ac (aa TEXT);
RESULT:
	[]

-----------
QUERY:

alter table ac add constraint ac_check check (aa is not null);
RESULT:
	[]

-----------
QUERY:

CREATE TABLE bc (bb TEXT) INHERITS (ac);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'INHERITS (ac)' at line 1")

-----------
QUERY:

select pc.relname, pgc.conname, pgc.contype, pgc.conislocal, pgc.coninhcount, pg_get_expr(pgc.conbin, pc.oid) as consrc from pg_class as pc inner join pg_constraint as pgc on (pgc.conrelid = pc.oid) where pc.relname in ('ac', 'bc') order by 1,2;
RESULT:
	ERROR - (1146, "Table 'test.pg_class' doesn't exist")

-----------
QUERY:


insert into ac (aa) values (NULL);
RESULT:
	ERROR - (3819, "Check constraint 'ac_check' is violated.")

-----------
QUERY:

insert into bc (aa) values (NULL);
RESULT:
	ERROR - (1146, "Table 'test.bc' doesn't exist")

-----------
QUERY:


alter table bc drop constraint ac_check;
RESULT:
	ERROR - (1146, "Table 'test.bc' doesn't exist")

-----------
QUERY:
  -- fail, disallowed
alter table ac drop constraint ac_check;
RESULT:
	[]

-----------
QUERY:

select pc.relname, pgc.conname, pgc.contype, pgc.conislocal, pgc.coninhcount, pg_get_expr(pgc.conbin, pc.oid) as consrc from pg_class as pc inner join pg_constraint as pgc on (pgc.conrelid = pc.oid) where pc.relname in ('ac', 'bc') order by 1,2;
RESULT:
	ERROR - (1146, "Table 'test.pg_class' doesn't exist")

-----------
QUERY:


-- try the unnamed-constraint case
alter table ac add check (aa is not null);
RESULT:
	[]

-----------
QUERY:

select pc.relname, pgc.conname, pgc.contype, pgc.conislocal, pgc.coninhcount, pg_get_expr(pgc.conbin, pc.oid) as consrc from pg_class as pc inner join pg_constraint as pgc on (pgc.conrelid = pc.oid) where pc.relname in ('ac', 'bc') order by 1,2;
RESULT:
	ERROR - (1146, "Table 'test.pg_class' doesn't exist")

-----------
QUERY:


insert into ac (aa) values (NULL);
RESULT:
	ERROR - (3819, "Check constraint 'ac_chk_1' is violated.")

-----------
QUERY:

insert into bc (aa) values (NULL);
RESULT:
	ERROR - (1146, "Table 'test.bc' doesn't exist")

-----------
QUERY:


alter table bc drop constraint ac_aa_check;
RESULT:
	ERROR - (1146, "Table 'test.bc' doesn't exist")

-----------
QUERY:
  -- fail, disallowed
alter table ac drop constraint ac_aa_check;
RESULT:
	ERROR - (3940, "Constraint 'ac_aa_check' does not exist.")

-----------
QUERY:

select pc.relname, pgc.conname, pgc.contype, pgc.conislocal, pgc.coninhcount, pg_get_expr(pgc.conbin, pc.oid) as consrc from pg_class as pc inner join pg_constraint as pgc on (pgc.conrelid = pc.oid) where pc.relname in ('ac', 'bc') order by 1,2;
RESULT:
	ERROR - (1146, "Table 'test.pg_class' doesn't exist")

-----------
QUERY:


alter table ac add constraint ac_check check (aa is not null);
RESULT:
	[]

-----------
QUERY:

alter table bc no inherit ac;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'no inherit ac' at line 1")

-----------
QUERY:

select pc.relname, pgc.conname, pgc.contype, pgc.conislocal, pgc.coninhcount, pg_get_expr(pgc.conbin, pc.oid) as consrc from pg_class as pc inner join pg_constraint as pgc on (pgc.conrelid = pc.oid) where pc.relname in ('ac', 'bc') order by 1,2;
RESULT:
	ERROR - (1146, "Table 'test.pg_class' doesn't exist")

-----------
QUERY:

alter table bc drop constraint ac_check;
RESULT:
	ERROR - (1146, "Table 'test.bc' doesn't exist")

-----------
QUERY:

select pc.relname, pgc.conname, pgc.contype, pgc.conislocal, pgc.coninhcount, pg_get_expr(pgc.conbin, pc.oid) as consrc from pg_class as pc inner join pg_constraint as pgc on (pgc.conrelid = pc.oid) where pc.relname in ('ac', 'bc') order by 1,2;
RESULT:
	ERROR - (1146, "Table 'test.pg_class' doesn't exist")

-----------
QUERY:

alter table ac drop constraint ac_check;
RESULT:
	[]

-----------
QUERY:

select pc.relname, pgc.conname, pgc.contype, pgc.conislocal, pgc.coninhcount, pg_get_expr(pgc.conbin, pc.oid) as consrc from pg_class as pc inner join pg_constraint as pgc on (pgc.conrelid = pc.oid) where pc.relname in ('ac', 'bc') order by 1,2;
RESULT:
	ERROR - (1146, "Table 'test.pg_class' doesn't exist")

-----------
QUERY:


drop table bc;
RESULT:
	ERROR - (1051, "Unknown table 'test.bc'")

-----------
QUERY:

drop table ac;
RESULT:
	[]

-----------
QUERY:


create table ac (a int constraint check_a check (a <> 0));
RESULT:
	[]

-----------
QUERY:

create table bc (a int constraint check_a check (a <> 0), b int constraint check_b check (b <> 0)) inherits (ac);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'inherits (ac)' at line 1")

-----------
QUERY:

select pc.relname, pgc.conname, pgc.contype, pgc.conislocal, pgc.coninhcount, pg_get_expr(pgc.conbin, pc.oid) as consrc from pg_class as pc inner join pg_constraint as pgc on (pgc.conrelid = pc.oid) where pc.relname in ('ac', 'bc') order by 1,2;
RESULT:
	ERROR - (1146, "Table 'test.pg_class' doesn't exist")

-----------
QUERY:


drop table bc;
RESULT:
	ERROR - (1051, "Unknown table 'test.bc'")

-----------
QUERY:

drop table ac;
RESULT:
	[]

-----------
QUERY:


create table ac (a int constraint check_a check (a <> 0));
RESULT:
	[]

-----------
QUERY:

create table bc (b int constraint check_b check (b <> 0));
RESULT:
	[]

-----------
QUERY:

create table cc (c int constraint check_c check (c <> 0)) inherits (ac, bc);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'inherits (ac, bc)' at line 1")

-----------
QUERY:

select pc.relname, pgc.conname, pgc.contype, pgc.conislocal, pgc.coninhcount, pg_get_expr(pgc.conbin, pc.oid) as consrc from pg_class as pc inner join pg_constraint as pgc on (pgc.conrelid = pc.oid) where pc.relname in ('ac', 'bc', 'cc') order by 1,2;
RESULT:
	ERROR - (1146, "Table 'test.pg_class' doesn't exist")

-----------
QUERY:


alter table cc no inherit bc;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'no inherit bc' at line 1")

-----------
QUERY:

select pc.relname, pgc.conname, pgc.contype, pgc.conislocal, pgc.coninhcount, pg_get_expr(pgc.conbin, pc.oid) as consrc from pg_class as pc inner join pg_constraint as pgc on (pgc.conrelid = pc.oid) where pc.relname in ('ac', 'bc', 'cc') order by 1,2;
RESULT:
	ERROR - (1146, "Table 'test.pg_class' doesn't exist")

-----------
QUERY:


drop table cc;
RESULT:
	ERROR - (1051, "Unknown table 'test.cc'")

-----------
QUERY:

drop table bc;
RESULT:
	[]

-----------
QUERY:

drop table ac;
RESULT:
	[]

-----------
QUERY:


create table p1(f1 int);
RESULT:
	[]

-----------
QUERY:

create table p2(f2 int);
RESULT:
	[]

-----------
QUERY:

create table c1(f3 int) inherits(p1,p2);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'inherits(p1,p2)' at line 1")

-----------
QUERY:

insert into c1 values(1,-1,2);
RESULT:
	ERROR - (1146, "Table 'test.c1' doesn't exist")

-----------
QUERY:

alter table p2 add constraint cc check (f2>0);
RESULT:
	[]

-----------
QUERY:
  -- fail
alter table p2 add check (f2>0);
RESULT:
	[]

-----------
QUERY:
  -- check it without a name, too
delete from c1;
RESULT:
	ERROR - (1146, "Table 'test.c1' doesn't exist")

-----------
QUERY:

insert into c1 values(1,1,2);
RESULT:
	ERROR - (1146, "Table 'test.c1' doesn't exist")

-----------
QUERY:

alter table p2 add check (f2>0);
RESULT:
	[]

-----------
QUERY:

insert into c1 values(1,-1,2);
RESULT:
	ERROR - (1146, "Table 'test.c1' doesn't exist")

-----------
QUERY:
  -- fail
create table c2(f3 int) inherits(p1,p2);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'inherits(p1,p2)' at line 2")

-----------
QUERY:

-- \d c2
create table c3 (f4 int) inherits(c1,c2);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'inherits(c1,c2)' at line 2")

-----------
QUERY:

-- \d c3
drop table p1 cascade;
RESULT:
	[]

-----------
QUERY:

drop table p2 cascade;
RESULT:
	[]

-----------
QUERY:


create table pp1 (f1 int);
RESULT:
	[]

-----------
QUERY:

create table cc1 (f2 text, f3 int) inherits (pp1);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'inherits (pp1)' at line 1")

-----------
QUERY:

alter table pp1 add column a1 int check (a1 > 0);
RESULT:
	[]

-----------
QUERY:

-- \d cc1
create table cc2(f4 float) inherits(pp1,cc1);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'inherits(pp1,cc1)' at line 2")

-----------
QUERY:

-- \d cc2
alter table pp1 add column a2 int check (a2 > 0);
RESULT:
	[]

-----------
QUERY:

-- \d cc2
drop table pp1 cascade;
RESULT:
	[]

-----------
QUERY:


-- Test for renaming in simple multiple inheritance
CREATE TABLE inht1 (a int, b int);
RESULT:
	[]

-----------
QUERY:

CREATE TABLE inhs1 (b int, c int);
RESULT:
	[]

-----------
QUERY:

CREATE TABLE inhts (d int) INHERITS (inht1, inhs1);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'INHERITS (inht1, inhs1)' at line 1")

-----------
QUERY:


ALTER TABLE inht1 RENAME a TO aa;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'TO aa' at line 1")

-----------
QUERY:

ALTER TABLE inht1 RENAME b TO bb;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'TO bb' at line 1")

-----------
QUERY:
                -- to be failed
ALTER TABLE inhts RENAME aa TO aaa;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'TO aaa' at line 2")

-----------
QUERY:
      -- to be failed
ALTER TABLE inhts RENAME d TO dd;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'TO dd' at line 2")

-----------
QUERY:

-- \d+ inhts

DROP TABLE inhts;
RESULT:
	ERROR - (1051, "Unknown table 'test.inhts'")

-----------
QUERY:


-- Test for adding a column to a parent table with complex inheritance
CREATE TABLE inhta ();
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ')' at line 2")

-----------
QUERY:

CREATE TABLE inhtb () INHERITS (inhta);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ') INHERITS (inhta)' at line 1")

-----------
QUERY:

CREATE TABLE inhtc () INHERITS (inhtb);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ') INHERITS (inhtb)' at line 1")

-----------
QUERY:

CREATE TABLE inhtd () INHERITS (inhta, inhtb, inhtc);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ') INHERITS (inhta, inhtb, inhtc)' at line 1")

-----------
QUERY:

ALTER TABLE inhta ADD COLUMN i int;
RESULT:
	ERROR - (1146, "Table 'test.inhta' doesn't exist")

-----------
QUERY:

-- \d+ inhta
DROP TABLE inhta, inhtb, inhtc, inhtd;
RESULT:
	ERROR - (1051, "Unknown table 'test.inhta,test.inhtb,test.inhtc,test.inhtd'")

-----------
QUERY:


-- Test for renaming in diamond inheritance
CREATE TABLE inht2 (x int) INHERITS (inht1);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'INHERITS (inht1)' at line 2")

-----------
QUERY:

CREATE TABLE inht3 (y int) INHERITS (inht1);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'INHERITS (inht1)' at line 1")

-----------
QUERY:

CREATE TABLE inht4 (z int) INHERITS (inht2, inht3);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'INHERITS (inht2, inht3)' at line 1")

-----------
QUERY:


ALTER TABLE inht1 RENAME aa TO aaa;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'TO aaa' at line 1")

-----------
QUERY:

-- \d+ inht4

CREATE TABLE inhts (d int) INHERITS (inht2, inhs1);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'INHERITS (inht2, inhs1)' at line 3")

-----------
QUERY:

ALTER TABLE inht1 RENAME aaa TO aaaa;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'TO aaaa' at line 1")

-----------
QUERY:

ALTER TABLE inht1 RENAME b TO bb;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'TO bb' at line 1")

-----------
QUERY:
                -- to be failed
-- \d+ inhts

WITH RECURSIVE r AS (
  SELECT 'inht1'::regclass AS inhrelid
UNION ALL
  SELECT c.inhrelid FROM pg_inherits c, r WHERE r.inhrelid = c.inhparent
)
SELECT a.attrelid::regclass, a.attname, a.attinhcount, e.expected
  FROM (SELECT inhrelid, count(*) AS expected FROM pg_inherits
        WHERE inhparent IN (SELECT inhrelid FROM r) GROUP BY inhrelid) e
  JOIN pg_attribute a ON e.inhrelid = a.attrelid WHERE NOT attislocal
  ORDER BY a.attrelid::regclass::name, a.attnum;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::regclass AS inhrelid\nUNION ALL\n  SELECT c.inhrelid FROM pg_inherits c, r WHERE' at line 5")

-----------
QUERY:


DROP TABLE inht1, inhs1 CASCADE;
RESULT:
	[]

-----------
QUERY:



-- Test non-inheritable indices [UNIQUE, EXCLUDE] constraints
CREATE TABLE test_constraints (id int, val1 varchar, val2 int, UNIQUE(val1, val2));
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ', val2 int, UNIQUE(val1, val2))' at line 2")

-----------
QUERY:

CREATE TABLE test_constraints_inh () INHERITS (test_constraints);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ') INHERITS (test_constraints)' at line 1")

-----------
QUERY:

-- \d+ test_constraints
ALTER TABLE ONLY test_constraints DROP CONSTRAINT test_constraints_val1_val2_key;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'test_constraints DROP CONSTRAINT test_constraints_val1_val2_key' at line 2")

-----------
QUERY:

-- \d+ test_constraints
-- \d+ test_constraints_inh
DROP TABLE test_constraints_inh;
RESULT:
	ERROR - (1051, "Unknown table 'test.test_constraints_inh'")

-----------
QUERY:

DROP TABLE test_constraints;
RESULT:
	ERROR - (1051, "Unknown table 'test.test_constraints'")

-----------
QUERY:


CREATE TABLE test_ex_constraints (
    c circle,
    EXCLUDE USING gist (c WITH &&)
);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'circle,\n    EXCLUDE USING gist (c WITH &&)\n)' at line 2")

-----------
QUERY:

CREATE TABLE test_ex_constraints_inh () INHERITS (test_ex_constraints);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ') INHERITS (test_ex_constraints)' at line 1")

-----------
QUERY:

-- \d+ test_ex_constraints
ALTER TABLE test_ex_constraints DROP CONSTRAINT test_ex_constraints_c_excl;
RESULT:
	ERROR - (1146, "Table 'test.test_ex_constraints' doesn't exist")

-----------
QUERY:

-- \d+ test_ex_constraints
-- \d+ test_ex_constraints_inh
DROP TABLE test_ex_constraints_inh;
RESULT:
	ERROR - (1051, "Unknown table 'test.test_ex_constraints_inh'")

-----------
QUERY:

DROP TABLE test_ex_constraints;
RESULT:
	ERROR - (1051, "Unknown table 'test.test_ex_constraints'")

-----------
QUERY:


-- Test non-inheritable foreign key constraints
CREATE TABLE test_primary_constraints(id int PRIMARY KEY);
RESULT:
	[]

-----------
QUERY:

CREATE TABLE test_foreign_constraints(id1 int REFERENCES test_primary_constraints(id));
RESULT:
	[]

-----------
QUERY:

CREATE TABLE test_foreign_constraints_inh () INHERITS (test_foreign_constraints);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ') INHERITS (test_foreign_constraints)' at line 1")

-----------
QUERY:

-- \d+ test_primary_constraints
-- \d+ test_foreign_constraints
ALTER TABLE test_foreign_constraints DROP CONSTRAINT test_foreign_constraints_id1_fkey;
RESULT:
	ERROR - (3940, "Constraint 'test_foreign_constraints_id1_fkey' does not exist.")

-----------
QUERY:

-- \d+ test_foreign_constraints
-- \d+ test_foreign_constraints_inh
DROP TABLE test_foreign_constraints_inh;
RESULT:
	ERROR - (1051, "Unknown table 'test.test_foreign_constraints_inh'")

-----------
QUERY:

DROP TABLE test_foreign_constraints;
RESULT:
	[]

-----------
QUERY:

DROP TABLE test_primary_constraints;
RESULT:
	[]

-----------
QUERY:


-- Test foreign key behavior
create table inh_fk_1 (a int primary key);
RESULT:
	[]

-----------
QUERY:

insert into inh_fk_1 values (1), (2), (3);
RESULT:
	[]

-----------
QUERY:

create table inh_fk_2 (x int primary key, y int references inh_fk_1 on delete cascade);
RESULT:
	[]

-----------
QUERY:

insert into inh_fk_2 values (11, 1), (22, 2), (33, 3);
RESULT:
	[]

-----------
QUERY:

create table inh_fk_2_child () inherits (inh_fk_2);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ') inherits (inh_fk_2)' at line 1")

-----------
QUERY:

insert into inh_fk_2_child values (111, 1), (222, 2);
RESULT:
	ERROR - (1146, "Table 'test.inh_fk_2_child' doesn't exist")

-----------
QUERY:

delete from inh_fk_1 where a = 1;
RESULT:
	[]

-----------
QUERY:

select * from inh_fk_1 order by 1;
RESULT:
	((2,), (3,))

-----------
QUERY:

select * from inh_fk_2 order by 1, 2;
RESULT:
	((11, 1), (22, 2), (33, 3))

-----------
QUERY:

drop table inh_fk_1, inh_fk_2, inh_fk_2_child;
RESULT:
	ERROR - (1051, "Unknown table 'test.inh_fk_2_child'")

-----------
QUERY:


-- Test that parent and child CHECK constraints can be created in either order
create table p1(f1 int);
RESULT:
	[]

-----------
QUERY:

create table p1_c1() inherits(p1);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ') inherits(p1)' at line 1")

-----------
QUERY:


alter table p1 add constraint inh_check_constraint1 check (f1 > 0);
RESULT:
	[]

-----------
QUERY:

alter table p1_c1 add constraint inh_check_constraint1 check (f1 > 0);
RESULT:
	ERROR - (1146, "Table 'test.p1_c1' doesn't exist")

-----------
QUERY:


alter table p1_c1 add constraint inh_check_constraint2 check (f1 < 10);
RESULT:
	ERROR - (1146, "Table 'test.p1_c1' doesn't exist")

-----------
QUERY:

alter table p1 add constraint inh_check_constraint2 check (f1 < 10);
RESULT:
	[]

-----------
QUERY:


select conrelid::regclass::text as relname, conname, conislocal, coninhcount
from pg_constraint where conname like 'inh\_check\_constraint%'
order by 1, 2;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::regclass::text as relname, conname, conislocal, coninhcount\nfrom pg_constraint' at line 1")

-----------
QUERY:


drop table p1 cascade;
RESULT:
	[]

-----------
QUERY:


--
-- Test DROP behavior of multiply-defined CHECK constraints
--
create table p1(f1 int constraint f1_pos CHECK (f1 > 0));
RESULT:
	[]

-----------
QUERY:

create table p1_c1 (f1 int constraint f1_pos CHECK (f1 > 0)) inherits (p1);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'inherits (p1)' at line 1")

-----------
QUERY:

alter table p1_c1 drop constraint f1_pos;
RESULT:
	ERROR - (1146, "Table 'test.p1_c1' doesn't exist")

-----------
QUERY:

alter table p1 drop constraint f1_pos;
RESULT:
	[]

-----------
QUERY:

-- \d p1_c1
drop table p1 cascade;
RESULT:
	[]

-----------
QUERY:


create table p1(f1 int constraint f1_pos CHECK (f1 > 0));
RESULT:
	[]

-----------
QUERY:

create table p2(f1 int constraint f1_pos CHECK (f1 > 0));
RESULT:
	ERROR - (3822, "Duplicate check constraint name 'f1_pos'.")

-----------
QUERY:

create table p1p2_c1 (f1 int) inherits (p1, p2);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'inherits (p1, p2)' at line 1")

-----------
QUERY:

create table p1p2_c2 (f1 int constraint f1_pos CHECK (f1 > 0)) inherits (p1, p2);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'inherits (p1, p2)' at line 1")

-----------
QUERY:

alter table p2 drop constraint f1_pos;
RESULT:
	ERROR - (1146, "Table 'test.p2' doesn't exist")

-----------
QUERY:

alter table p1 drop constraint f1_pos;
RESULT:
	[]

-----------
QUERY:

-- \d p1p2_c*
drop table p1, p2 cascade;
RESULT:
	ERROR - (1051, "Unknown table 'test.p2'")

-----------
QUERY:


create table p1(f1 int constraint f1_pos CHECK (f1 > 0));
RESULT:
	ERROR - (1050, "Table 'p1' already exists")

-----------
QUERY:

create table p1_c1() inherits (p1);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ') inherits (p1)' at line 1")

-----------
QUERY:

create table p1_c2() inherits (p1);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ') inherits (p1)' at line 1")

-----------
QUERY:

create table p1_c1c2() inherits (p1_c1, p1_c2);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ') inherits (p1_c1, p1_c2)' at line 1")

-----------
QUERY:

-- \d p1_c1c2
alter table p1 drop constraint f1_pos;
RESULT:
	ERROR - (3940, "Constraint 'f1_pos' does not exist.")

-----------
QUERY:

-- \d p1_c1c2
drop table p1 cascade;
RESULT:
	[]

-----------
QUERY:


create table p1(f1 int constraint f1_pos CHECK (f1 > 0));
RESULT:
	[]

-----------
QUERY:

create table p1_c1() inherits (p1);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ') inherits (p1)' at line 1")

-----------
QUERY:

create table p1_c2(constraint f1_pos CHECK (f1 > 0)) inherits (p1);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'inherits (p1)' at line 1")

-----------
QUERY:

create table p1_c1c2() inherits (p1_c1, p1_c2, p1);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ') inherits (p1_c1, p1_c2, p1)' at line 1")

-----------
QUERY:

alter table p1_c2 drop constraint f1_pos;
RESULT:
	ERROR - (1146, "Table 'test.p1_c2' doesn't exist")

-----------
QUERY:

alter table p1 drop constraint f1_pos;
RESULT:
	[]

-----------
QUERY:

alter table p1_c1c2 drop constraint f1_pos;
RESULT:
	ERROR - (1146, "Table 'test.p1_c1c2' doesn't exist")

-----------
QUERY:

alter table p1_c2 drop constraint f1_pos;
RESULT:
	ERROR - (1146, "Table 'test.p1_c2' doesn't exist")

-----------
QUERY:

-- \d p1_c1c2
drop table p1 cascade;
RESULT:
	[]

-----------
QUERY:


-- Test that a valid child can have not-valid parent, but not vice versa
create table invalid_check_con(f1 int);
RESULT:
	[]

-----------
QUERY:

create table invalid_check_con_child() inherits(invalid_check_con);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ') inherits(invalid_check_con)' at line 1")

-----------
QUERY:


alter table invalid_check_con_child add constraint inh_check_constraint check(f1 > 0) not valid;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'valid' at line 1")

-----------
QUERY:

alter table invalid_check_con add constraint inh_check_constraint check(f1 > 0);
RESULT:
	[]

-----------
QUERY:
 -- fail
alter table invalid_check_con_child drop constraint inh_check_constraint;
RESULT:
	ERROR - (1146, "Table 'test.invalid_check_con_child' doesn't exist")

-----------
QUERY:


insert into invalid_check_con values(0);
RESULT:
	ERROR - (3819, "Check constraint 'inh_check_constraint' is violated.")

-----------
QUERY:


alter table invalid_check_con_child add constraint inh_check_constraint check(f1 > 0);
RESULT:
	ERROR - (1146, "Table 'test.invalid_check_con_child' doesn't exist")

-----------
QUERY:

alter table invalid_check_con add constraint inh_check_constraint check(f1 > 0) not valid;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'valid' at line 1")

-----------
QUERY:


insert into invalid_check_con values(0);
RESULT:
	ERROR - (3819, "Check constraint 'inh_check_constraint' is violated.")

-----------
QUERY:
 -- fail
insert into invalid_check_con_child values(0);
RESULT:
	ERROR - (1146, "Table 'test.invalid_check_con_child' doesn't exist")

-----------
QUERY:
 -- fail

select conrelid::regclass::text as relname, conname,
       convalidated, conislocal, coninhcount, connoinherit
from pg_constraint where conname like 'inh\_check\_constraint%'
order by 1, 2;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::regclass::text as relname, conname,\n       convalidated, conislocal, coninhcou' at line 3")

-----------
QUERY:


-- We don/* REPLACED */ ''t drop the invalid_check_con* tables, to test dump/reload with

--
-- Test parameterized append plans for inheritance trees
--

create temp table patest0 (id, x) as
  select x, x from generate_series(0,1000) x;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'temp table patest0 (id, x) as\n  select x, x from generate_series(0,1000) x' at line 7")

-----------
QUERY:

create temp table patest1() inherits (patest0);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'temp table patest1() inherits (patest0)' at line 1")

-----------
QUERY:

insert into patest1
  select x, x from generate_series(0,1000) x;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(0,1000) x' at line 2")

-----------
QUERY:

create temp table patest2() inherits (patest0);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'temp table patest2() inherits (patest0)' at line 1")

-----------
QUERY:

insert into patest2
  select x, x from generate_series(0,1000) x;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(0,1000) x' at line 2")

-----------
QUERY:

create index patest0i on patest0(id);
RESULT:
	ERROR - (1146, "Table 'test.patest0' doesn't exist")

-----------
QUERY:

create index patest1i on patest1(id);
RESULT:
	ERROR - (1146, "Table 'test.patest1' doesn't exist")

-----------
QUERY:

create index patest2i on patest2(id);
RESULT:
	ERROR - (1146, "Table 'test.patest2' doesn't exist")

-----------
QUERY:

analyze patest0;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'patest0' at line 1")

-----------
QUERY:

analyze patest1;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'patest1' at line 1")

-----------
QUERY:

analyze patest2;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'patest2' at line 1")

-----------
QUERY:


explain (costs off)
select * from patest0 join (select f1 from int4_tbl limit 1) ss on id = f1;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off)\nselect * from patest0 join (select f1 from int4_tbl limit 1) ss on id' at line 1")

-----------
QUERY:

select * from patest0 join (select f1 from int4_tbl limit 1) ss on id = f1;
RESULT:
	ERROR - (1146, "Table 'test.patest0' doesn't exist")

-----------
QUERY:


drop index patest2i;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '' at line 1")

-----------
QUERY:


explain (costs off)
select * from patest0 join (select f1 from int4_tbl limit 1) ss on id = f1;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off)\nselect * from patest0 join (select f1 from int4_tbl limit 1) ss on id' at line 1")

-----------
QUERY:

select * from patest0 join (select f1 from int4_tbl limit 1) ss on id = f1;
RESULT:
	ERROR - (1146, "Table 'test.patest0' doesn't exist")

-----------
QUERY:


drop table patest0 cascade;
RESULT:
	ERROR - (1051, "Unknown table 'test.patest0'")

-----------
QUERY:


--
-- Test merge-append plans for inheritance trees
--

create table matest0 (id serial primary key, name text);
RESULT:
	[]

-----------
QUERY:

create table matest1 (id integer primary key) inherits (matest0);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'inherits (matest0)' at line 1")

-----------
QUERY:

create table matest2 (id integer primary key) inherits (matest0);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'inherits (matest0)' at line 1")

-----------
QUERY:

create table matest3 (id integer primary key) inherits (matest0);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'inherits (matest0)' at line 1")

-----------
QUERY:


create index matest0i on matest0 ((1-id));
RESULT:
	ERROR - (3754, "Functional index 'matest0i' cannot refer to an auto-increment column.")

-----------
QUERY:

create index matest1i on matest1 ((1-id));
RESULT:
	ERROR - (1146, "Table 'test.matest1' doesn't exist")

-----------
QUERY:

-- create index matest2i on matest2 ((1-id)) /* REPLACED */ ,  -- intentionally missing
create index matest3i on matest3 ((1-id));
RESULT:
	ERROR - (1146, "Table 'test.matest3' doesn't exist")

-----------
QUERY:


insert into matest1 (name) values ('Test 1');
RESULT:
	ERROR - (1146, "Table 'test.matest1' doesn't exist")

-----------
QUERY:

insert into matest1 (name) values ('Test 2');
RESULT:
	ERROR - (1146, "Table 'test.matest1' doesn't exist")

-----------
QUERY:

insert into matest2 (name) values ('Test 3');
RESULT:
	ERROR - (1146, "Table 'test.matest2' doesn't exist")

-----------
QUERY:

insert into matest2 (name) values ('Test 4');
RESULT:
	ERROR - (1146, "Table 'test.matest2' doesn't exist")

-----------
QUERY:

insert into matest3 (name) values ('Test 5');
RESULT:
	ERROR - (1146, "Table 'test.matest3' doesn't exist")

-----------
QUERY:

insert into matest3 (name) values ('Test 6');
RESULT:
	ERROR - (1146, "Table 'test.matest3' doesn't exist")

-----------
QUERY:


set enable_indexscan = off;
RESULT:
	ERROR - (1193, "Unknown system variable 'enable_indexscan'")

-----------
QUERY:
  -- force use of seqscan/sort, so no merge
explain (verbose, costs off) select * from matest0 order by 1-id;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'verbose, costs off) select * from matest0 order by 1-id' at line 2")

-----------
QUERY:

select * from matest0 order by 1-id;
RESULT:
	()

-----------
QUERY:

explain (verbose, costs off) select min(1-id) from matest0;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'verbose, costs off) select min(1-id) from matest0' at line 1")

-----------
QUERY:

select min(1-id) from matest0;
RESULT:
	((None,),)

-----------
QUERY:

reset enable_indexscan;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'enable_indexscan' at line 1")

-----------
QUERY:


set enable_seqscan = off;
RESULT:
	ERROR - (1193, "Unknown system variable 'enable_seqscan'")

-----------
QUERY:
  -- plan with fewest seqscans should be merge
set enable_parallel_append = off;
RESULT:
	ERROR - (1193, "Unknown system variable 'enable_parallel_append'")

-----------
QUERY:
 -- Don/* REPLACED */ ''t let parallel-append interfere
explain (verbose, costs off) select * from matest0 order by 1-id;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'verbose, costs off) select * from matest0 order by 1-id' at line 2")

-----------
QUERY:

select * from matest0 order by 1-id;
RESULT:
	()

-----------
QUERY:

explain (verbose, costs off) select min(1-id) from matest0;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'verbose, costs off) select min(1-id) from matest0' at line 1")

-----------
QUERY:

select min(1-id) from matest0;
RESULT:
	((None,),)

-----------
QUERY:

reset enable_seqscan;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'enable_seqscan' at line 1")

-----------
QUERY:

reset enable_parallel_append;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'enable_parallel_append' at line 1")

-----------
QUERY:


drop table matest0 cascade;
RESULT:
	[]

-----------
QUERY:


--
-- Check that use of an index with an extraneous column doesn/* REPLACED */ ''t produce
-- a plan with extraneous sorting
--

create table matest0 (a int, b int, c int, d int);
RESULT:
	[]

-----------
QUERY:

create table matest1 () inherits(matest0);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ') inherits(matest0)' at line 1")

-----------
QUERY:

create index matest0i on matest0 (b, c);
RESULT:
	[]

-----------
QUERY:

create index matest1i on matest1 (b, c);
RESULT:
	ERROR - (1146, "Table 'test.matest1' doesn't exist")

-----------
QUERY:


set enable_nestloop = off;
RESULT:
	ERROR - (1193, "Unknown system variable 'enable_nestloop'")

-----------
QUERY:
  -- we want a plan with two MergeAppends

explain (costs off)
select t1.* from matest0 t1, matest0 t2
where t1.b = t2.b and t2.c = t2.d
order by t1.b limit 10;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off)\nselect t1.* from matest0 t1, matest0 t2\nwhere t1.b = t2.b and t2.c = ' at line 3")

-----------
QUERY:


reset enable_nestloop;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'enable_nestloop' at line 1")

-----------
QUERY:


drop table matest0 cascade;
RESULT:
	[]

-----------
QUERY:


-- Test a MergeAppend plan where one child requires a sort
create table matest0(a int primary key);
RESULT:
	[]

-----------
QUERY:

create table matest1() inherits (matest0);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ') inherits (matest0)' at line 1")

-----------
QUERY:

insert into matest0 select generate_series(1, 400);
RESULT:
	ERROR - (1305, 'FUNCTION test.generate_series does not exist')

-----------
QUERY:

insert into matest1 select generate_series(1, 200);
RESULT:
	ERROR - (1146, "Table 'test.matest1' doesn't exist")

-----------
QUERY:

analyze matest0;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'matest0' at line 1")

-----------
QUERY:

analyze matest1;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'matest1' at line 1")

-----------
QUERY:


explain (costs off)
select * from matest0 where a < 100 order by a;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off)\nselect * from matest0 where a < 100 order by a' at line 1")

-----------
QUERY:


drop table matest0 cascade;
RESULT:
	[]

-----------
QUERY:


--
-- Test merge-append for UNION ALL append relations
--

set enable_seqscan = off;
RESULT:
	ERROR - (1193, "Unknown system variable 'enable_seqscan'")

-----------
QUERY:

set enable_indexscan = on;
RESULT:
	ERROR - (1193, "Unknown system variable 'enable_indexscan'")

-----------
QUERY:

set enable_bitmapscan = off;
RESULT:
	ERROR - (1193, "Unknown system variable 'enable_bitmapscan'")

-----------
QUERY:


-- Check handling of duplicated, constant, or volatile targetlist items
explain (costs off)
SELECT thousand, tenthous FROM tenk1
UNION ALL
SELECT thousand, thousand FROM tenk1
ORDER BY thousand, tenthous;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off)\nSELECT thousand, tenthous FROM tenk1\nUNION ALL\nSELECT thousand, thous' at line 2")

-----------
QUERY:


explain (costs off)
SELECT thousand, tenthous, thousand+tenthous AS x FROM tenk1
UNION ALL
SELECT 42, 42, hundred FROM tenk1
ORDER BY thousand, tenthous;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off)\nSELECT thousand, tenthous, thousand+tenthous AS x FROM tenk1\nUNION AL' at line 1")

-----------
QUERY:


explain (costs off)
SELECT thousand, tenthous FROM tenk1
UNION ALL
SELECT thousand, random()::integer FROM tenk1
ORDER BY thousand, tenthous;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off)\nSELECT thousand, tenthous FROM tenk1\nUNION ALL\nSELECT thousand, rando' at line 1")

-----------
QUERY:


-- Check min/max aggregate optimization
explain (costs off)
SELECT min(x) FROM
  (SELECT unique1 AS x FROM tenk1 a
   UNION ALL
   SELECT unique2 AS x FROM tenk1 b) s;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off)\nSELECT min(x) FROM\n  (SELECT unique1 AS x FROM tenk1 a\n   UNION ALL\n ' at line 2")

-----------
QUERY:


explain (costs off)
SELECT min(y) FROM
  (SELECT unique1 AS x, unique1 AS y FROM tenk1 a
   UNION ALL
   SELECT unique2 AS x, unique2 AS y FROM tenk1 b) s;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off)\nSELECT min(y) FROM\n  (SELECT unique1 AS x, unique1 AS y FROM tenk1 a\n' at line 1")

-----------
QUERY:


-- XXX planner doesn/* REPLACED */ ''t recognize that index on unique2 is sufficiently sorted
explain (costs off)
SELECT x, y FROM
  (SELECT thousand AS x, tenthous AS y FROM tenk1 a
   UNION ALL
   SELECT unique2 AS x, unique2 AS y FROM tenk1 b) s
ORDER BY x, y;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off)\nSELECT x, y FROM\n  (SELECT thousand AS x, tenthous AS y FROM tenk1 a\n' at line 2")

-----------
QUERY:


-- exercise rescan code path via a repeatedly-evaluated subquery
explain (costs off)
SELECT
    ARRAY(SELECT f.i FROM (
        (SELECT d + g.i FROM generate_series(4, 30, 3) d ORDER BY 1)
        UNION ALL
        (SELECT d + g.i FROM generate_series(0, 30, 5) d ORDER BY 1)
    ) f(i)
    ORDER BY f.i LIMIT 10)
FROM generate_series(1, 3) g(i);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off)\nSELECT\n    ARRAY(SELECT f.i FROM (\n        (SELECT d + g.i FROM gener' at line 2")

-----------
QUERY:


SELECT
    ARRAY(SELECT f.i FROM (
        (SELECT d + g.i FROM generate_series(4, 30, 3) d ORDER BY 1)
        UNION ALL
        (SELECT d + g.i FROM generate_series(0, 30, 5) d ORDER BY 1)
    ) f(i)
    ORDER BY f.i LIMIT 10)
FROM generate_series(1, 3) g(i);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(SELECT f.i FROM (\n        (SELECT d + g.i FROM generate_series(4, 30, 3) d ORDE' at line 2")

-----------
QUERY:


reset enable_seqscan;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'enable_seqscan' at line 1")

-----------
QUERY:

reset enable_indexscan;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'enable_indexscan' at line 1")

-----------
QUERY:

reset enable_bitmapscan;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'enable_bitmapscan' at line 1")

-----------
QUERY:


--
-- Check handling of MULTIEXPR SubPlans in inherited updates
--
create table inhpar(f1 int, f2 name);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'name)' at line 4")

-----------
QUERY:

create table inhcld(f2 name, f1 int);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'name, f1 int)' at line 1")

-----------
QUERY:

alter table inhcld inherit inhpar;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'inherit inhpar' at line 1")

-----------
QUERY:

insert into inhpar select x, x::text from generate_series(1,5) x;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::text from generate_series(1,5) x' at line 1")

-----------
QUERY:

insert into inhcld select x::text, x from generate_series(6,10) x;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::text, x from generate_series(6,10) x' at line 1")

-----------
QUERY:


explain (verbose, costs off)
update inhpar i set (f1, f2) = (select i.f1, i.f2 || '-' from int4_tbl limit 1);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'verbose, costs off)\nupdate inhpar i set (f1, f2) = (select i.f1, i.f2 || '-' fro' at line 1")

-----------
QUERY:

update inhpar i set (f1, f2) = (select i.f1, i.f2 || '-' from int4_tbl limit 1);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(f1, f2) = (select i.f1, i.f2 || '-' from int4_tbl limit 1)' at line 1")

-----------
QUERY:

select * from inhpar;
RESULT:
	ERROR - (1146, "Table 'test.inhpar' doesn't exist")

-----------
QUERY:


drop table inhpar cascade;
RESULT:
	ERROR - (1051, "Unknown table 'test.inhpar'")

-----------
QUERY:


--
-- And the same for partitioned cases
--
create table inhpar(f1 int primary key, f2 name) partition by range (f1);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'name) partition by range (f1)' at line 4")

-----------
QUERY:

create table inhcld1(f2 name, f1 int primary key);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'name, f1 int primary key)' at line 1")

-----------
QUERY:

create table inhcld2(f1 int primary key, f2 name);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'name)' at line 1")

-----------
QUERY:

alter table inhpar attach partition inhcld1 for values from (1) to (5);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'attach partition inhcld1 for values from (1) to (5)' at line 1")

-----------
QUERY:

alter table inhpar attach partition inhcld2 for values from (5) to (100);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'attach partition inhcld2 for values from (5) to (100)' at line 1")

-----------
QUERY:

insert into inhpar select x, x::text from generate_series(1,10) x;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::text from generate_series(1,10) x' at line 1")

-----------
QUERY:


explain (verbose, costs off)
update inhpar i set (f1, f2) = (select i.f1, i.f2 || '-' from int4_tbl limit 1);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'verbose, costs off)\nupdate inhpar i set (f1, f2) = (select i.f1, i.f2 || '-' fro' at line 1")

-----------
QUERY:

update inhpar i set (f1, f2) = (select i.f1, i.f2 || '-' from int4_tbl limit 1);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(f1, f2) = (select i.f1, i.f2 || '-' from int4_tbl limit 1)' at line 1")

-----------
QUERY:

select * from inhpar;
RESULT:
	ERROR - (1146, "Table 'test.inhpar' doesn't exist")

-----------
QUERY:


-- Also check ON CONFLICT
insert into inhpar as i values (3), (7) on conflict (f1)
  do update set (f1, f2) = (select i.f1, i.f2 || '+');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'as i values (3), (7) on conflict (f1)\n  do update set (f1, f2) = (select i.f1, i' at line 2")

-----------
QUERY:

select * from inhpar order by f1;
RESULT:
	ERROR - (1146, "Table 'test.inhpar' doesn't exist")

-----------
QUERY:
  -- tuple order might be unstable here

drop table inhpar cascade;
RESULT:
	ERROR - (1051, "Unknown table 'test.inhpar'")

-----------
QUERY:


--
-- Check handling of a constant-null CHECK constraint
--
create table cnullparent (f1 int);
RESULT:
	[]

-----------
QUERY:

create table cnullchild (check (f1 = 1 or f1 = null)) inherits(cnullparent);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'inherits(cnullparent)' at line 1")

-----------
QUERY:

insert into cnullchild values(1);
RESULT:
	ERROR - (1146, "Table 'test.cnullchild' doesn't exist")

-----------
QUERY:

insert into cnullchild values(2);
RESULT:
	ERROR - (1146, "Table 'test.cnullchild' doesn't exist")

-----------
QUERY:

insert into cnullchild values(null);
RESULT:
	ERROR - (1146, "Table 'test.cnullchild' doesn't exist")

-----------
QUERY:

select * from cnullparent;
RESULT:
	()

-----------
QUERY:

select * from cnullparent where f1 = 2;
RESULT:
	()

-----------
QUERY:

drop table cnullparent cascade;
RESULT:
	[]

-----------
QUERY:


--
-- Test inheritance of NOT NULL constraints
--
create table pp1 (f1 int);
RESULT:
	[]

-----------
QUERY:

create table cc1 (f2 text, f3 int) inherits (pp1);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'inherits (pp1)' at line 1")

-----------
QUERY:

-- \d cc1
create table cc2(f4 float) inherits(pp1,cc1);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'inherits(pp1,cc1)' at line 2")

-----------
QUERY:

-- \d cc2

-- named NOT NULL constraint
alter table cc1 add column a2 int constraint nn not null;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'not null' at line 4")

-----------
QUERY:

-- \d+ cc1
-- \d+ cc2
alter table pp1 alter column f1 set not null;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'not null' at line 3")

-----------
QUERY:

-- \d+ pp1
-- \d+ cc1
-- \d+ cc2

-- cannot create table with inconsistent NO INHERIT constraint
create table cc3 (a2 int not null no inherit) inherits (cc1);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'no inherit) inherits (cc1)' at line 6")

-----------
QUERY:


-- change NO INHERIT status of inherited constraint: no dice, it/* REPLACED */ ''s inherited
alter table cc2 add not null a2 no inherit;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'not null a2 no inherit' at line 2")

-----------
QUERY:


-- remove constraint from cc2: no dice, it/* REPLACED */ ''s inherited
alter table cc2 alter column a2 drop not null;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'not null' at line 2")

-----------
QUERY:


-- remove constraint cc1, should succeed
alter table cc1 alter column a2 drop not null;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'not null' at line 2")

-----------
QUERY:

-- \d+ cc1

-- same for cc2
alter table cc2 alter column f1 drop not null;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'not null' at line 4")

-----------
QUERY:

-- \d+ cc2

-- remove from cc1, should fail again
alter table cc1 alter column f1 drop not null;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'not null' at line 4")

-----------
QUERY:


-- remove from pp1, should succeed
alter table pp1 alter column f1 drop not null;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'not null' at line 2")

-----------
QUERY:

-- \d+ pp1

alter table pp1 add primary key (f1);
RESULT:
	[]

-----------
QUERY:

-- Leave these tables around, for pg_upgrade testing

-- Test the same constraint name for different columns in different parents
create table inh_parent1(a int constraint nn not null);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'not null)' at line 4")

-----------
QUERY:

create table inh_parent2(b int constraint nn not null);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'not null)' at line 1")

-----------
QUERY:

create table inh_child () inherits (inh_parent1, inh_parent2);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ') inherits (inh_parent1, inh_parent2)' at line 1")

-----------
QUERY:

-- \d+ inh_child
drop table inh_parent1, inh_parent2, inh_child;
RESULT:
	ERROR - (1051, "Unknown table 'test.inh_parent1,test.inh_parent2,test.inh_child'")

-----------
QUERY:


-- Test multiple parents with overlapping primary keys
create table inh_parent1(a int, b int, c int, primary key (a, b));
RESULT:
	[]

-----------
QUERY:

create table inh_parent2(d int, e int, b int, primary key (d, b));
RESULT:
	[]

-----------
QUERY:

create table inh_child() inherits (inh_parent1, inh_parent2);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ') inherits (inh_parent1, inh_parent2)' at line 1")

-----------
QUERY:

select conrelid::regclass, conname, contype, conkey,
 coninhcount, conislocal, connoinherit
 from pg_constraint where contype in ('n','p') and
 conrelid::regclass::text in ('inh_child', 'inh_parent1', 'inh_parent2')
 order by 1, 2;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::regclass, conname, contype, conkey,\n coninhcount, conislocal, connoinherit\n fr' at line 1")

-----------
QUERY:

-- \d+ inh_child
drop table inh_parent1, inh_parent2, inh_child;
RESULT:
	ERROR - (1051, "Unknown table 'test.inh_child'")

-----------
QUERY:


-- NOT NULL NO INHERIT
create table inh_nn_parent(a int);
RESULT:
	[]

-----------
QUERY:

create table inh_nn_child() inherits (inh_nn_parent);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ') inherits (inh_nn_parent)' at line 1")

-----------
QUERY:

alter table inh_nn_parent add not null a no inherit;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'not null a no inherit' at line 1")

-----------
QUERY:

create table inh_nn_child2() inherits (inh_nn_parent);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ') inherits (inh_nn_parent)' at line 1")

-----------
QUERY:

select conrelid::regclass, conname, contype, conkey,
 (select attname from pg_attribute where attrelid = conrelid and attnum = conkey[1]),
 coninhcount, conislocal, connoinherit
 from pg_constraint where contype = 'n' and
 conrelid::regclass::text like 'inh\_nn\_%'
 order by 2, 1;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::regclass, conname, contype, conkey,\n (select attname from pg_attribute where a' at line 1")

-----------
QUERY:

-- \d+ inh_nn*
drop table inh_nn_parent, inh_nn_child, inh_nn_child2;
RESULT:
	ERROR - (1051, "Unknown table 'test.inh_nn_child,test.inh_nn_child2'")

-----------
QUERY:


--
-- test inherit/deinherit
--
create table inh_parent(f1 int);
RESULT:
	[]

-----------
QUERY:

create table inh_child1(f1 int not null);
RESULT:
	[]

-----------
QUERY:

create table inh_child2(f1 int);
RESULT:
	[]

-----------
QUERY:


-- inh_child1 should have not null constraint
alter table inh_child1 inherit inh_parent;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'inherit inh_parent' at line 2")

-----------
QUERY:


-- should fail, missing NOT NULL constraint
alter table inh_child2 inherit inh_child1;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'inherit inh_child1' at line 2")

-----------
QUERY:


alter table inh_child2 alter column f1 set not null;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'not null' at line 1")

-----------
QUERY:

alter table inh_child2 inherit inh_child1;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'inherit inh_child1' at line 1")

-----------
QUERY:


-- add NOT NULL constraint recursively
alter table inh_parent alter column f1 set not null;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'not null' at line 2")

-----------
QUERY:


-- \d+ inh_parent
-- \d+ inh_child1
-- \d+ inh_child2

select conrelid::regclass, conname, contype, coninhcount, conislocal
 from pg_constraint where contype = 'n' and
 conrelid in ('inh_parent'::regclass, 'inh_child1'::regclass, 'inh_child2'::regclass)
 order by 2, 1;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::regclass, conname, contype, coninhcount, conislocal\n from pg_constraint where ' at line 5")

-----------
QUERY:


--
-- test deinherit procedure
--

-- deinherit inh_child1
create table inh_child3 () inherits (inh_child1);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ') inherits (inh_child1)' at line 6")

-----------
QUERY:

alter table inh_child1 no inherit inh_parent;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'no inherit inh_parent' at line 1")

-----------
QUERY:

-- \d+ inh_parent
-- \d+ inh_child1
-- \d+ inh_child2
select conrelid::regclass, conname, contype, coninhcount, conislocal
 from pg_constraint where contype = 'n' and
 conrelid::regclass::text in ('inh_parent', 'inh_child1', 'inh_child2', 'inh_child3')
 order by 2, 1;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::regclass, conname, contype, coninhcount, conislocal\n from pg_constraint where ' at line 4")

-----------
QUERY:

drop table inh_parent, inh_child1, inh_child2, inh_child3;
RESULT:
	ERROR - (1051, "Unknown table 'test.inh_child3'")

-----------
QUERY:


-- a PK in parent must have a not-null in child that it can mark inherited
create table inh_parent (a int primary key);
RESULT:
	ERROR - (1050, "Table 'inh_parent' already exists")

-----------
QUERY:

create table inh_child (a int primary key);
RESULT:
	[]

-----------
QUERY:

alter table inh_child inherit inh_parent;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'inherit inh_parent' at line 1")

-----------
QUERY:
		-- nope
alter table inh_child alter a set not null;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'not null' at line 2")

-----------
QUERY:

alter table inh_child inherit inh_parent;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'inherit inh_parent' at line 1")

-----------
QUERY:
		-- now it works

-- don/* REPLACED */ ''t interfere with other types of constraints
alter table inh_parent add constraint inh_parent_excl exclude ((1) with =);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'exclude ((1) with =)' at line 4")

-----------
QUERY:

alter table inh_parent add constraint inh_parent_uq unique (a);
RESULT:
	ERROR - (1072, "Key column 'a' doesn't exist in table")

-----------
QUERY:

alter table inh_parent add constraint inh_parent_fk foreign key (a) references inh_parent (a);
RESULT:
	ERROR - (1072, "Key column 'a' doesn't exist in table")

-----------
QUERY:

create table inh_child2 () inherits (inh_parent);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ') inherits (inh_parent)' at line 1")

-----------
QUERY:

create table inh_child3 (like inh_parent);
RESULT:
	[]

-----------
QUERY:

alter table inh_child3 inherit inh_parent;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'inherit inh_parent' at line 1")

-----------
QUERY:

select conrelid::regclass, conname, contype, coninhcount, conislocal
 from pg_constraint
 where conrelid::regclass::text in ('inh_parent', 'inh_child', 'inh_child2', 'inh_child3')
 order by 2, 1;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::regclass, conname, contype, coninhcount, conislocal\n from pg_constraint\n where' at line 1")

-----------
QUERY:


drop table inh_parent, inh_child, inh_child2, inh_child3;
RESULT:
	[]

-----------
QUERY:


--
-- test multi inheritance tree
--
create table inh_parent(f1 int not null);
RESULT:
	[]

-----------
QUERY:

create table inh_child1() inherits(inh_parent);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ') inherits(inh_parent)' at line 1")

-----------
QUERY:

create table inh_child2() inherits(inh_parent);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ') inherits(inh_parent)' at line 1")

-----------
QUERY:

create table inh_child3() inherits(inh_child1, inh_child2);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ') inherits(inh_child1, inh_child2)' at line 1")

-----------
QUERY:


-- show constraint info
select conrelid::regclass, conname, contype, coninhcount, conislocal
 from pg_constraint where contype = 'n' and
 conrelid in ('inh_parent'::regclass, 'inh_child1'::regclass, 'inh_child2'::regclass, 'inh_child3'::regclass)
 order by 2, conrelid::regclass::text;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::regclass, conname, contype, coninhcount, conislocal\n from pg_constraint where ' at line 2")

-----------
QUERY:


drop table inh_parent cascade;
RESULT:
	[]

-----------
QUERY:


-- test child table with inherited columns and
-- with explicitly specified not null constraints
create table inh_parent_1(f1 int);
RESULT:
	[]

-----------
QUERY:

create table inh_parent_2(f2 text);
RESULT:
	[]

-----------
QUERY:

create table inh_child(f1 int not null, f2 text not null) inherits(inh_parent_1, inh_parent_2);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'inherits(inh_parent_1, inh_parent_2)' at line 1")

-----------
QUERY:


-- show constraint info
select conrelid::regclass, conname, contype, coninhcount, conislocal
 from pg_constraint where contype = 'n' and
 conrelid in ('inh_parent_1'::regclass, 'inh_parent_2'::regclass, 'inh_child'::regclass)
 order by 2, conrelid::regclass::text;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::regclass, conname, contype, coninhcount, conislocal\n from pg_constraint where ' at line 2")

-----------
QUERY:


-- also drops inh_child table
drop table inh_parent_1 cascade;
RESULT:
	[]

-----------
QUERY:

drop table inh_parent_2;
RESULT:
	[]

-----------
QUERY:


-- test multi layer inheritance tree
create table inh_p1(f1 int not null);
RESULT:
	[]

-----------
QUERY:

create table inh_p2(f1 int not null);
RESULT:
	[]

-----------
QUERY:

create table inh_p3(f2 int);
RESULT:
	[]

-----------
QUERY:

create table inh_p4(f1 int not null, f3 text not null);
RESULT:
	[]

-----------
QUERY:


create table inh_multiparent() inherits(inh_p1, inh_p2, inh_p3, inh_p4);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ') inherits(inh_p1, inh_p2, inh_p3, inh_p4)' at line 1")

-----------
QUERY:


-- constraint on f1 should have three parents
select conrelid::regclass, contype, conname,
  (select attname from pg_attribute where attrelid = conrelid and attnum = conkey[1]),
  coninhcount, conislocal
 from pg_constraint where contype = 'n' and
 conrelid::regclass in ('inh_p1', 'inh_p2', 'inh_p3', 'inh_p4',
	'inh_multiparent')
 order by conrelid::regclass::text, conname;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::regclass, contype, conname,\n  (select attname from pg_attribute where attrelid' at line 2")

-----------
QUERY:


create table inh_multiparent2 (a int not null, f1 int) inherits(inh_p3, inh_multiparent);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'inherits(inh_p3, inh_multiparent)' at line 1")

-----------
QUERY:

select conrelid::regclass, contype, conname,
  (select attname from pg_attribute where attrelid = conrelid and attnum = conkey[1]),
  coninhcount, conislocal
 from pg_constraint where contype = 'n' and
 conrelid::regclass in ('inh_p3', 'inh_multiparent', 'inh_multiparent2')
 order by conrelid::regclass::text, conname;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::regclass, contype, conname,\n  (select attname from pg_attribute where attrelid' at line 1")

-----------
QUERY:


drop table inh_p1, inh_p2, inh_p3, inh_p4 cascade;
RESULT:
	[]

-----------
QUERY:


--
-- Mixed ownership inheritance tree
--
create role regress_alice;
RESULT:
	[]

-----------
QUERY:

create role regress_bob;
RESULT:
	[]

-----------
QUERY:

grant all on schema public to regress_alice, regress_bob;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'schema public to regress_alice, regress_bob' at line 1")

-----------
QUERY:

grant regress_alice to regress_bob;
RESULT:
	[]

-----------
QUERY:

set session authorization regress_alice;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'regress_alice' at line 1")

-----------
QUERY:

create table inh_parent (a int not null);
RESULT:
	[]

-----------
QUERY:

set session authorization regress_bob;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'regress_bob' at line 1")

-----------
QUERY:

create table inh_child () inherits (inh_parent);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ') inherits (inh_parent)' at line 1")

-----------
QUERY:

set session authorization regress_alice;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'regress_alice' at line 1")

-----------
QUERY:

-- alice can/* REPLACED */ ''t do this: she doesn/* REPLACED */ ''t own inh_child
alter table inh_parent alter a drop not null;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'not null' at line 2")

-----------
QUERY:

set session authorization regress_bob;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'regress_bob' at line 1")

-----------
QUERY:

alter table inh_parent alter a drop not null;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'not null' at line 1")

-----------
QUERY:

reset session authorization;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'session authorization' at line 1")

-----------
QUERY:

drop table inh_parent, inh_child;
RESULT:
	ERROR - (1051, "Unknown table 'test.inh_child'")

-----------
QUERY:

revoke all on schema public from regress_alice, regress_bob;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'schema public from regress_alice, regress_bob' at line 1")

-----------
QUERY:

drop role regress_alice, regress_bob;
RESULT:
	[]

-----------
QUERY:


--
-- Check use of temporary tables with inheritance trees
--
create table inh_perm_parent (a1 int);
RESULT:
	[]

-----------
QUERY:

create temp table inh_temp_parent (a1 int);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'temp table inh_temp_parent (a1 int)' at line 1")

-----------
QUERY:

create temp table inh_temp_child () inherits (inh_perm_parent);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'temp table inh_temp_child () inherits (inh_perm_parent)' at line 1")

-----------
QUERY:
 -- ok
create table inh_perm_child () inherits (inh_temp_parent);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ') inherits (inh_temp_parent)' at line 2")

-----------
QUERY:
 -- error
create temp table inh_temp_child_2 () inherits (inh_temp_parent);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'temp table inh_temp_child_2 () inherits (inh_temp_parent)' at line 2")

-----------
QUERY:
 -- ok
insert into inh_perm_parent values (1);
RESULT:
	[]

-----------
QUERY:

insert into inh_temp_parent values (2);
RESULT:
	ERROR - (1146, "Table 'test.inh_temp_parent' doesn't exist")

-----------
QUERY:

insert into inh_temp_child values (3);
RESULT:
	ERROR - (1146, "Table 'test.inh_temp_child' doesn't exist")

-----------
QUERY:

insert into inh_temp_child_2 values (4);
RESULT:
	ERROR - (1146, "Table 'test.inh_temp_child_2' doesn't exist")

-----------
QUERY:

select tableoid::regclass, a1 from inh_perm_parent;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::regclass, a1 from inh_perm_parent' at line 1")

-----------
QUERY:

select tableoid::regclass, a1 from inh_temp_parent;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::regclass, a1 from inh_temp_parent' at line 1")

-----------
QUERY:

drop table inh_perm_parent cascade;
RESULT:
	[]

-----------
QUERY:

drop table inh_temp_parent cascade;
RESULT:
	ERROR - (1051, "Unknown table 'test.inh_temp_parent'")

-----------
QUERY:


--
-- Check that constraint exclusion works correctly with partitions using
-- implicit constraints generated from the partition bound information.
--
create table list_parted (
	a	varchar
) partition by list (a);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ') partition by list (a)' at line 7")

-----------
QUERY:

create table part_ab_cd partition of list_parted for values in ('ab', 'cd');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of list_parted for values in ('ab', 'cd')' at line 1")

-----------
QUERY:

create table part_ef_gh partition of list_parted for values in ('ef', 'gh');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of list_parted for values in ('ef', 'gh')' at line 1")

-----------
QUERY:

create table part_null_xy partition of list_parted for values in (null, 'xy');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of list_parted for values in (null, 'xy')' at line 1")

-----------
QUERY:


explain (costs off) select * from list_parted;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from list_parted' at line 1")

-----------
QUERY:

explain (costs off) select * from list_parted where a is null;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from list_parted where a is null' at line 1")

-----------
QUERY:

explain (costs off) select * from list_parted where a is not null;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from list_parted where a is not null' at line 1")

-----------
QUERY:

explain (costs off) select * from list_parted where a in ('ab', 'cd', 'ef');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from list_parted where a in ('ab', 'cd', 'ef')' at line 1")

-----------
QUERY:

explain (costs off) select * from list_parted where a = 'ab' or a in (null, 'cd');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from list_parted where a = 'ab' or a in (null, 'cd')' at line 1")

-----------
QUERY:

explain (costs off) select * from list_parted where a = 'ab';
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from list_parted where a = 'ab'' at line 1")

-----------
QUERY:


create table range_list_parted (
	a	int,
	b	char(2)
) partition by range (a);
RESULT:
	ERROR - (1492, 'For RANGE partitions each partition must be defined')

-----------
QUERY:

create table part_1_10 partition of range_list_parted for values from (1) to (10) partition by list (b);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of range_list_parted for values from (1) to (10) partition by list (b)' at line 1")

-----------
QUERY:

create table part_1_10_ab partition of part_1_10 for values in ('ab');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of part_1_10 for values in ('ab')' at line 1")

-----------
QUERY:

create table part_1_10_cd partition of part_1_10 for values in ('cd');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of part_1_10 for values in ('cd')' at line 1")

-----------
QUERY:

create table part_10_20 partition of range_list_parted for values from (10) to (20) partition by list (b);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of range_list_parted for values from (10) to (20) partition by list (b)' at line 1")

-----------
QUERY:

create table part_10_20_ab partition of part_10_20 for values in ('ab');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of part_10_20 for values in ('ab')' at line 1")

-----------
QUERY:

create table part_10_20_cd partition of part_10_20 for values in ('cd');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of part_10_20 for values in ('cd')' at line 1")

-----------
QUERY:

create table part_21_30 partition of range_list_parted for values from (21) to (30) partition by list (b);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of range_list_parted for values from (21) to (30) partition by list (b)' at line 1")

-----------
QUERY:

create table part_21_30_ab partition of part_21_30 for values in ('ab');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of part_21_30 for values in ('ab')' at line 1")

-----------
QUERY:

create table part_21_30_cd partition of part_21_30 for values in ('cd');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of part_21_30 for values in ('cd')' at line 1")

-----------
QUERY:

create table part_40_inf partition of range_list_parted for values from (40) to (maxvalue) partition by list (b);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of range_list_parted for values from (40) to (maxvalue) partition by list (b)' at line 1")

-----------
QUERY:

create table part_40_inf_ab partition of part_40_inf for values in ('ab');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of part_40_inf for values in ('ab')' at line 1")

-----------
QUERY:

create table part_40_inf_cd partition of part_40_inf for values in ('cd');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of part_40_inf for values in ('cd')' at line 1")

-----------
QUERY:

create table part_40_inf_null partition of part_40_inf for values in (null);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of part_40_inf for values in (null)' at line 1")

-----------
QUERY:


explain (costs off) select * from range_list_parted;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from range_list_parted' at line 1")

-----------
QUERY:

explain (costs off) select * from range_list_parted where a = 5;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from range_list_parted where a = 5' at line 1")

-----------
QUERY:

explain (costs off) select * from range_list_parted where b = 'ab';
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from range_list_parted where b = 'ab'' at line 1")

-----------
QUERY:

explain (costs off) select * from range_list_parted where a between 3 and 23 and b in ('ab');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from range_list_parted where a between 3 and 23 and b in ('a' at line 1")

-----------
QUERY:


/* Should select no rows because range partition key cannot be null */
explain (costs off) select * from range_list_parted where a is null;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from range_list_parted where a is null' at line 2")

-----------
QUERY:


/* Should only select rows from the null-accepting partition */
explain (costs off) select * from range_list_parted where b is null;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from range_list_parted where b is null' at line 2")

-----------
QUERY:

explain (costs off) select * from range_list_parted where a is not null and a < 67;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from range_list_parted where a is not null and a < 67' at line 1")

-----------
QUERY:

explain (costs off) select * from range_list_parted where a >= 30;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from range_list_parted where a >= 30' at line 1")

-----------
QUERY:


drop table list_parted;
RESULT:
	ERROR - (1051, "Unknown table 'test.list_parted'")

-----------
QUERY:

drop table range_list_parted;
RESULT:
	ERROR - (1051, "Unknown table 'test.range_list_parted'")

-----------
QUERY:


-- check that constraint exclusion is able to cope with the partition
-- constraint emitted for multi-column range partitioned tables
create table mcrparted (a int, b int, c int) partition by range (a, abs(b), c);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ', abs(b), c)' at line 3")

-----------
QUERY:

create table mcrparted_def partition of mcrparted default;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of mcrparted default' at line 1")

-----------
QUERY:

create table mcrparted0 partition of mcrparted for values from (minvalue, minvalue, minvalue) to (1, 1, 1);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of mcrparted for values from (minvalue, minvalue, minvalue) to (1, 1, 1)' at line 1")

-----------
QUERY:

create table mcrparted1 partition of mcrparted for values from (1, 1, 1) to (10, 5, 10);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of mcrparted for values from (1, 1, 1) to (10, 5, 10)' at line 1")

-----------
QUERY:

create table mcrparted2 partition of mcrparted for values from (10, 5, 10) to (10, 10, 10);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of mcrparted for values from (10, 5, 10) to (10, 10, 10)' at line 1")

-----------
QUERY:

create table mcrparted3 partition of mcrparted for values from (11, 1, 1) to (20, 10, 10);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of mcrparted for values from (11, 1, 1) to (20, 10, 10)' at line 1")

-----------
QUERY:

create table mcrparted4 partition of mcrparted for values from (20, 10, 10) to (20, 20, 20);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of mcrparted for values from (20, 10, 10) to (20, 20, 20)' at line 1")

-----------
QUERY:

create table mcrparted5 partition of mcrparted for values from (20, 20, 20) to (maxvalue, maxvalue, maxvalue);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of mcrparted for values from (20, 20, 20) to (maxvalue, maxvalue, maxvalue)' at line 1")

-----------
QUERY:

explain (costs off) select * from mcrparted where a = 0;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from mcrparted where a = 0' at line 1")

-----------
QUERY:
	-- scans mcrparted0, mcrparted_def
explain (costs off) select * from mcrparted where a = 10 and abs(b) < 5;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from mcrparted where a = 10 and abs(b) < 5' at line 2")

-----------
QUERY:
	-- scans mcrparted1, mcrparted_def
explain (costs off) select * from mcrparted where a = 10 and abs(b) = 5;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from mcrparted where a = 10 and abs(b) = 5' at line 2")

-----------
QUERY:
	-- scans mcrparted1, mcrparted2, mcrparted_def
explain (costs off) select * from mcrparted where abs(b) = 5;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from mcrparted where abs(b) = 5' at line 2")

-----------
QUERY:
	-- scans all partitions
explain (costs off) select * from mcrparted where a > -1;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from mcrparted where a > -1' at line 2")

-----------
QUERY:
	-- scans all partitions
explain (costs off) select * from mcrparted where a = 20 and abs(b) = 10 and c > 10;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from mcrparted where a = 20 and abs(b) = 10 and c > 10' at line 2")

-----------
QUERY:
	-- scans mcrparted4
explain (costs off) select * from mcrparted where a = 20 and c > 20;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from mcrparted where a = 20 and c > 20' at line 2")

-----------
QUERY:
 -- scans mcrparted3, mcrparte4, mcrparte5, mcrparted_def

-- check that partitioned table Appends cope with being referenced in
-- subplans
create table parted_minmax (a int, b varchar(16)) partition by range (a);
RESULT:
	ERROR - (1492, 'For RANGE partitions each partition must be defined')

-----------
QUERY:

create table parted_minmax1 partition of parted_minmax for values from (1) to (10);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of parted_minmax for values from (1) to (10)' at line 1")

-----------
QUERY:

create index parted_minmax1i on parted_minmax1 (a, b);
RESULT:
	ERROR - (1146, "Table 'test.parted_minmax1' doesn't exist")

-----------
QUERY:

insert into parted_minmax values (1,'12345');
RESULT:
	ERROR - (1146, "Table 'test.parted_minmax' doesn't exist")

-----------
QUERY:

explain (costs off) select min(a), max(a) from parted_minmax where b = '12345';
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select min(a), max(a) from parted_minmax where b = '12345'' at line 1")

-----------
QUERY:

select min(a), max(a) from parted_minmax where b = '12345';
RESULT:
	ERROR - (1146, "Table 'test.parted_minmax' doesn't exist")

-----------
QUERY:

drop table parted_minmax;
RESULT:
	ERROR - (1051, "Unknown table 'test.parted_minmax'")

-----------
QUERY:


-- Test code that uses Append nodes in place of MergeAppend when the
-- partition ordering matches the desired ordering.

create index mcrparted_a_abs_c_idx on mcrparted (a, abs(b), c);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'b), c)' at line 4")

-----------
QUERY:


-- MergeAppend must be used when a default partition exists
explain (costs off) select * from mcrparted order by a, abs(b), c;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from mcrparted order by a, abs(b), c' at line 2")

-----------
QUERY:


drop table mcrparted_def;
RESULT:
	ERROR - (1051, "Unknown table 'test.mcrparted_def'")

-----------
QUERY:


-- Append is used for a RANGE partitioned table with no default
-- and no subpartitions
explain (costs off) select * from mcrparted order by a, abs(b), c;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from mcrparted order by a, abs(b), c' at line 3")

-----------
QUERY:


-- Append is used with subpaths in reverse order with backwards index scans
explain (costs off) select * from mcrparted order by a desc, abs(b) desc, c desc;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from mcrparted order by a desc, abs(b) desc, c desc' at line 2")

-----------
QUERY:


-- check that Append plan is used containing a MergeAppend for sub-partitions
-- that are unordered.
drop table mcrparted5;
RESULT:
	ERROR - (1051, "Unknown table 'test.mcrparted5'")

-----------
QUERY:

create table mcrparted5 partition of mcrparted for values from (20, 20, 20) to (maxvalue, maxvalue, maxvalue) partition by list (a);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of mcrparted for values from (20, 20, 20) to (maxvalue, maxvalue, maxvalue) part' at line 1")

-----------
QUERY:

create table mcrparted5a partition of mcrparted5 for values in(20);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of mcrparted5 for values in(20)' at line 1")

-----------
QUERY:

create table mcrparted5_def partition of mcrparted5 default;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of mcrparted5 default' at line 1")

-----------
QUERY:


explain (costs off) select * from mcrparted order by a, abs(b), c;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from mcrparted order by a, abs(b), c' at line 1")

-----------
QUERY:


drop table mcrparted5_def;
RESULT:
	ERROR - (1051, "Unknown table 'test.mcrparted5_def'")

-----------
QUERY:


-- check that an Append plan is used and the sub-partitions are flattened
-- into the main Append when the sub-partition is unordered but contains
-- just a single sub-partition.
explain (costs off) select a, abs(b) from mcrparted order by a, abs(b), c;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select a, abs(b) from mcrparted order by a, abs(b), c' at line 4")

-----------
QUERY:


-- check that Append is used when the sub-partitioned tables are pruned
-- during planning.
explain (costs off) select * from mcrparted where a < 20 order by a, abs(b), c;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from mcrparted where a < 20 order by a, abs(b), c' at line 3")

-----------
QUERY:


set enable_bitmapscan to off;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'to off' at line 1")

-----------
QUERY:

set enable_sort to off;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'to off' at line 1")

-----------
QUERY:

create table mclparted (a int) partition by list(a);
RESULT:
	ERROR - (1492, 'For LIST partitions each partition must be defined')

-----------
QUERY:

create table mclparted1 partition of mclparted for values in(1);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of mclparted for values in(1)' at line 1")

-----------
QUERY:

create table mclparted2 partition of mclparted for values in(2);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of mclparted for values in(2)' at line 1")

-----------
QUERY:

create index on mclparted (a);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'on mclparted (a)' at line 1")

-----------
QUERY:


-- Ensure an Append is used for a list partition with an order by.
explain (costs off) select * from mclparted order by a;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from mclparted order by a' at line 2")

-----------
QUERY:


-- Ensure a MergeAppend is used when a partition exists with interleaved
-- datums in the partition bound.
create table mclparted3_5 partition of mclparted for values in(3,5);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of mclparted for values in(3,5)' at line 3")

-----------
QUERY:

create table mclparted4 partition of mclparted for values in(4);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of mclparted for values in(4)' at line 1")

-----------
QUERY:


explain (costs off) select * from mclparted order by a;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from mclparted order by a' at line 1")

-----------
QUERY:

explain (costs off) select * from mclparted where a in(3,4,5) order by a;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from mclparted where a in(3,4,5) order by a' at line 1")

-----------
QUERY:


-- Introduce a NULL and DEFAULT partition so we can test more complex cases
create table mclparted_null partition of mclparted for values in(null);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of mclparted for values in(null)' at line 2")

-----------
QUERY:

create table mclparted_def partition of mclparted default;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of mclparted default' at line 1")

-----------
QUERY:


-- Append can be used providing we don/* REPLACED */ ''t scan the interleaved partition
explain (costs off) select * from mclparted where a in(1,2,4) order by a;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from mclparted where a in(1,2,4) order by a' at line 2")

-----------
QUERY:

explain (costs off) select * from mclparted where a in(1,2,4) or a is null order by a;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from mclparted where a in(1,2,4) or a is null order by a' at line 1")

-----------
QUERY:


-- Test a more complex case where the NULL partition allows some other value
drop table mclparted_null;
RESULT:
	ERROR - (1051, "Unknown table 'test.mclparted_null'")

-----------
QUERY:

create table mclparted_0_null partition of mclparted for values in(0,null);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of mclparted for values in(0,null)' at line 1")

-----------
QUERY:


-- Ensure MergeAppend is used since 0 and NULLs are in the same partition.
explain (costs off) select * from mclparted where a in(1,2,4) or a is null order by a;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from mclparted where a in(1,2,4) or a is null order by a' at line 2")

-----------
QUERY:

explain (costs off) select * from mclparted where a in(0,1,2,4) order by a;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from mclparted where a in(0,1,2,4) order by a' at line 1")

-----------
QUERY:


-- Ensure Append is used when the null partition is pruned
explain (costs off) select * from mclparted where a in(1,2,4) order by a;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from mclparted where a in(1,2,4) order by a' at line 2")

-----------
QUERY:


-- Ensure MergeAppend is used when the default partition is not pruned
explain (costs off) select * from mclparted where a in(1,2,4,100) order by a;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from mclparted where a in(1,2,4,100) order by a' at line 2")

-----------
QUERY:


drop table mclparted;
RESULT:
	ERROR - (1051, "Unknown table 'test.mclparted'")

-----------
QUERY:

reset enable_sort;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'enable_sort' at line 1")

-----------
QUERY:

reset enable_bitmapscan;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'enable_bitmapscan' at line 1")

-----------
QUERY:


-- Ensure subplans which don/* REPLACED */ ''t have a path with the correct pathkeys get
-- sorted correctly.
drop index mcrparted_a_abs_c_idx;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '' at line 3")

-----------
QUERY:

create index on mcrparted1 (a, abs(b), c);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'on mcrparted1 (a, abs(b), c)' at line 1")

-----------
QUERY:

create index on mcrparted2 (a, abs(b), c);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'on mcrparted2 (a, abs(b), c)' at line 1")

-----------
QUERY:

create index on mcrparted3 (a, abs(b), c);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'on mcrparted3 (a, abs(b), c)' at line 1")

-----------
QUERY:

create index on mcrparted4 (a, abs(b), c);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'on mcrparted4 (a, abs(b), c)' at line 1")

-----------
QUERY:


explain (costs off) select * from mcrparted where a < 20 order by a, abs(b), c limit 1;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from mcrparted where a < 20 order by a, abs(b), c limit 1' at line 1")

-----------
QUERY:


set enable_bitmapscan = 0;
RESULT:
	ERROR - (1193, "Unknown system variable 'enable_bitmapscan'")

-----------
QUERY:

-- Ensure Append node can be used when the partition is ordered by some
-- pathkeys which were deemed redundant.
explain (costs off) select * from mcrparted where a = 10 order by a, abs(b), c;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from mcrparted where a = 10 order by a, abs(b), c' at line 3")

-----------
QUERY:

reset enable_bitmapscan;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'enable_bitmapscan' at line 1")

-----------
QUERY:


drop table mcrparted;
RESULT:
	ERROR - (1051, "Unknown table 'test.mcrparted'")

-----------
QUERY:


-- Ensure LIST partitions allow an Append to be used instead of a MergeAppend
create table bool_lp (b bool) partition by list(b);
RESULT:
	ERROR - (1492, 'For LIST partitions each partition must be defined')

-----------
QUERY:

create table bool_lp_true partition of bool_lp for values in(true);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of bool_lp for values in(true)' at line 1")

-----------
QUERY:

create table bool_lp_false partition of bool_lp for values in(false);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of bool_lp for values in(false)' at line 1")

-----------
QUERY:

create index on bool_lp (b);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'on bool_lp (b)' at line 1")

-----------
QUERY:


explain (costs off) select * from bool_lp order by b;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from bool_lp order by b' at line 1")

-----------
QUERY:


drop table bool_lp;
RESULT:
	ERROR - (1051, "Unknown table 'test.bool_lp'")

-----------
QUERY:


-- Ensure const bool quals can be properly detected as redundant
create table bool_rp (b bool, a int) partition by range(b,a);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ',a)' at line 2")

-----------
QUERY:

create table bool_rp_false_1k partition of bool_rp for values from (false,0) to (false,1000);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of bool_rp for values from (false,0) to (false,1000)' at line 1")

-----------
QUERY:

create table bool_rp_true_1k partition of bool_rp for values from (true,0) to (true,1000);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of bool_rp for values from (true,0) to (true,1000)' at line 1")

-----------
QUERY:

create table bool_rp_false_2k partition of bool_rp for values from (false,1000) to (false,2000);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of bool_rp for values from (false,1000) to (false,2000)' at line 1")

-----------
QUERY:

create table bool_rp_true_2k partition of bool_rp for values from (true,1000) to (true,2000);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of bool_rp for values from (true,1000) to (true,2000)' at line 1")

-----------
QUERY:

create index on bool_rp (b,a);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'on bool_rp (b,a)' at line 1")

-----------
QUERY:

explain (costs off) select * from bool_rp where b = true order by b,a;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from bool_rp where b = true order by b,a' at line 1")

-----------
QUERY:

explain (costs off) select * from bool_rp where b = false order by b,a;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from bool_rp where b = false order by b,a' at line 1")

-----------
QUERY:

explain (costs off) select * from bool_rp where b = true order by a;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from bool_rp where b = true order by a' at line 1")

-----------
QUERY:

explain (costs off) select * from bool_rp where b = false order by a;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from bool_rp where b = false order by a' at line 1")

-----------
QUERY:


drop table bool_rp;
RESULT:
	ERROR - (1051, "Unknown table 'test.bool_rp'")

-----------
QUERY:


-- Ensure an Append scan is chosen when the partition order is a subset of
-- the required order.
create table range_parted (a int, b int, c int) partition by range(a, b);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ', b)' at line 3")

-----------
QUERY:

create table range_parted1 partition of range_parted for values from (0,0) to (10,10);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of range_parted for values from (0,0) to (10,10)' at line 1")

-----------
QUERY:

create table range_parted2 partition of range_parted for values from (10,10) to (20,20);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of range_parted for values from (10,10) to (20,20)' at line 1")

-----------
QUERY:

create index on range_parted (a,b,c);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'on range_parted (a,b,c)' at line 1")

-----------
QUERY:


explain (costs off) select * from range_parted order by a,b,c;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from range_parted order by a,b,c' at line 1")

-----------
QUERY:

explain (costs off) select * from range_parted order by a desc,b desc,c desc;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from range_parted order by a desc,b desc,c desc' at line 1")

-----------
QUERY:


drop table range_parted;
RESULT:
	ERROR - (1051, "Unknown table 'test.range_parted'")

-----------
QUERY:


-- Check that we allow access to a child table/* REPLACED */ ''s statistics when the user
-- has permissions only for the parent table.
create table permtest_parent (a int, b text, c text) partition by list (a);
RESULT:
	ERROR - (1492, 'For LIST partitions each partition must be defined')

-----------
QUERY:

create table permtest_child (b text, c text, a int) partition by list (b);
RESULT:
	ERROR - (1492, 'For LIST partitions each partition must be defined')

-----------
QUERY:

create table permtest_grandchild (c text, b text, a int);
RESULT:
	[]

-----------
QUERY:

alter table permtest_child attach partition permtest_grandchild for values in ('a');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'attach partition permtest_grandchild for values in ('a')' at line 1")

-----------
QUERY:

alter table permtest_parent attach partition permtest_child for values in (1);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'attach partition permtest_child for values in (1)' at line 1")

-----------
QUERY:

create index on permtest_parent (left(c, 3));
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'on permtest_parent (left(c, 3))' at line 1")

-----------
QUERY:

insert into permtest_parent
  select 1, 'a', left(fipshash(i::text), 5) from generate_series(0, 100) i;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::text), 5) from generate_series(0, 100) i' at line 2")

-----------
QUERY:

analyze permtest_parent;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'permtest_parent' at line 1")

-----------
QUERY:

create role regress_no_child_access;
RESULT:
	[]

-----------
QUERY:

revoke all on permtest_grandchild from regress_no_child_access;
RESULT:
	ERROR - (1147, "There is no such grant defined for user 'regress_no_child_access' on host '%' on table 'permtest_grandchild'")

-----------
QUERY:

grant select on permtest_parent to regress_no_child_access;
RESULT:
	ERROR - (1146, "Table 'test.permtest_parent' doesn't exist")

-----------
QUERY:

set session authorization regress_no_child_access;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'regress_no_child_access' at line 1")

-----------
QUERY:

-- without stats access, these queries would produce hash join plans:
explain (costs off)
  select * from permtest_parent p1 inner join permtest_parent p2
  on p1.a = p2.a and p1.c ~ 'a1$';
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off)\n  select * from permtest_parent p1 inner join permtest_parent p2\n  on' at line 2")

-----------
QUERY:

explain (costs off)
  select * from permtest_parent p1 inner join permtest_parent p2
  on p1.a = p2.a and left(p1.c, 3) ~ 'a1$';
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off)\n  select * from permtest_parent p1 inner join permtest_parent p2\n  on' at line 1")

-----------
QUERY:

reset session authorization;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'session authorization' at line 1")

-----------
QUERY:

revoke all on permtest_parent from regress_no_child_access;
RESULT:
	ERROR - (1147, "There is no such grant defined for user 'regress_no_child_access' on host '%' on table 'permtest_parent'")

-----------
QUERY:

grant select(a,c) on permtest_parent to regress_no_child_access;
RESULT:
	ERROR - (1146, "Table 'test.permtest_parent' doesn't exist")

-----------
QUERY:

set session authorization regress_no_child_access;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'regress_no_child_access' at line 1")

-----------
QUERY:

explain (costs off)
  select p2.a, p1.c from permtest_parent p1 inner join permtest_parent p2
  on p1.a = p2.a and p1.c ~ 'a1$';
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off)\n  select p2.a, p1.c from permtest_parent p1 inner join permtest_paren' at line 1")

-----------
QUERY:

-- we will not have access to the expression index/* REPLACED */ ''s stats here:
explain (costs off)
  select p2.a, p1.c from permtest_parent p1 inner join permtest_parent p2
  on p1.a = p2.a and left(p1.c, 3) ~ 'a1$';
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off)\n  select p2.a, p1.c from permtest_parent p1 inner join permtest_paren' at line 2")

-----------
QUERY:

reset session authorization;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'session authorization' at line 1")

-----------
QUERY:

revoke all on permtest_parent from regress_no_child_access;
RESULT:
	ERROR - (1147, "There is no such grant defined for user 'regress_no_child_access' on host '%' on table 'permtest_parent'")

-----------
QUERY:

drop role regress_no_child_access;
RESULT:
	[]

-----------
QUERY:

drop table permtest_parent;
RESULT:
	ERROR - (1051, "Unknown table 'test.permtest_parent'")

-----------
QUERY:


-- Verify that constraint errors across partition root / child are
-- handled correctly (Bug #16293)
CREATE TABLE errtst_parent (
    partid int not null,
    shdata int not null,
    data int NOT NULL DEFAULT 0,
    CONSTRAINT shdata_small CHECK(shdata < 3)
) PARTITION BY RANGE (partid);
RESULT:
	ERROR - (1492, 'For RANGE partitions each partition must be defined')

-----------
QUERY:


-- fast defaults lead to attribute mapping being used in one
-- direction, but not the other
CREATE TABLE errtst_child_fastdef (
    partid int not null,
    shdata int not null,
    CONSTRAINT shdata_small CHECK(shdata < 3)
);
RESULT:
	[]

-----------
QUERY:


-- no remapping in either direction necessary
CREATE TABLE errtst_child_plaindef (
    partid int not null,
    shdata int not null,
    data int NOT NULL DEFAULT 0,
    CONSTRAINT shdata_small CHECK(shdata < 3),
    CHECK(data < 10)
);
RESULT:
	ERROR - (3822, "Duplicate check constraint name 'shdata_small'.")

-----------
QUERY:


-- remapping in both direction
CREATE TABLE errtst_child_reorder (
    data int NOT NULL DEFAULT 0,
    shdata int not null,
    partid int not null,
    CONSTRAINT shdata_small CHECK(shdata < 3),
    CHECK(data < 10)
);
RESULT:
	ERROR - (3822, "Duplicate check constraint name 'shdata_small'.")

-----------
QUERY:


ALTER TABLE errtst_child_fastdef ADD COLUMN data int NOT NULL DEFAULT 0;
RESULT:
	[]

-----------
QUERY:

ALTER TABLE errtst_child_fastdef ADD CONSTRAINT errtest_child_fastdef_data_check CHECK (data < 10);
RESULT:
	[]

-----------
QUERY:


ALTER TABLE errtst_parent ATTACH PARTITION errtst_child_fastdef FOR VALUES FROM (0) TO (10);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'ATTACH PARTITION errtst_child_fastdef FOR VALUES FROM (0) TO (10)' at line 1")

-----------
QUERY:

ALTER TABLE errtst_parent ATTACH PARTITION errtst_child_plaindef FOR VALUES FROM (10) TO (20);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'ATTACH PARTITION errtst_child_plaindef FOR VALUES FROM (10) TO (20)' at line 1")

-----------
QUERY:

ALTER TABLE errtst_parent ATTACH PARTITION errtst_child_reorder FOR VALUES FROM (20) TO (30);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'ATTACH PARTITION errtst_child_reorder FOR VALUES FROM (20) TO (30)' at line 1")

-----------
QUERY:


-- insert without child check constraint error
INSERT INTO errtst_parent(partid, shdata, data) VALUES ( '0', '1', '5');
RESULT:
	ERROR - (1146, "Table 'test.errtst_parent' doesn't exist")

-----------
QUERY:

INSERT INTO errtst_parent(partid, shdata, data) VALUES ('10', '1', '5');
RESULT:
	ERROR - (1146, "Table 'test.errtst_parent' doesn't exist")

-----------
QUERY:

INSERT INTO errtst_parent(partid, shdata, data) VALUES ('20', '1', '5');
RESULT:
	ERROR - (1146, "Table 'test.errtst_parent' doesn't exist")

-----------
QUERY:


-- insert with child check constraint error
INSERT INTO errtst_parent(partid, shdata, data) VALUES ( '0', '1', '10');
RESULT:
	ERROR - (1146, "Table 'test.errtst_parent' doesn't exist")

-----------
QUERY:

INSERT INTO errtst_parent(partid, shdata, data) VALUES ('10', '1', '10');
RESULT:
	ERROR - (1146, "Table 'test.errtst_parent' doesn't exist")

-----------
QUERY:

INSERT INTO errtst_parent(partid, shdata, data) VALUES ('20', '1', '10');
RESULT:
	ERROR - (1146, "Table 'test.errtst_parent' doesn't exist")

-----------
QUERY:


-- insert with child not null constraint error
INSERT INTO errtst_parent(partid, shdata, data) VALUES ( '0', '1', NULL);
RESULT:
	ERROR - (1146, "Table 'test.errtst_parent' doesn't exist")

-----------
QUERY:

INSERT INTO errtst_parent(partid, shdata, data) VALUES ('10', '1', NULL);
RESULT:
	ERROR - (1146, "Table 'test.errtst_parent' doesn't exist")

-----------
QUERY:

INSERT INTO errtst_parent(partid, shdata, data) VALUES ('20', '1', NULL);
RESULT:
	ERROR - (1146, "Table 'test.errtst_parent' doesn't exist")

-----------
QUERY:


-- insert with shared check constraint error
INSERT INTO errtst_parent(partid, shdata, data) VALUES ( '0', '5', '5');
RESULT:
	ERROR - (1146, "Table 'test.errtst_parent' doesn't exist")

-----------
QUERY:

INSERT INTO errtst_parent(partid, shdata, data) VALUES ('10', '5', '5');
RESULT:
	ERROR - (1146, "Table 'test.errtst_parent' doesn't exist")

-----------
QUERY:

INSERT INTO errtst_parent(partid, shdata, data) VALUES ('20', '5', '5');
RESULT:
	ERROR - (1146, "Table 'test.errtst_parent' doesn't exist")

-----------
QUERY:


-- within partition update without child check constraint violation
BEGIN;
RESULT:
	[]

-----------
QUERY:

UPDATE errtst_parent SET data = data + 1 WHERE partid = 0;
RESULT:
	ERROR - (1146, "Table 'test.errtst_parent' doesn't exist")

-----------
QUERY:

UPDATE errtst_parent SET data = data + 1 WHERE partid = 10;
RESULT:
	ERROR - (1146, "Table 'test.errtst_parent' doesn't exist")

-----------
QUERY:

UPDATE errtst_parent SET data = data + 1 WHERE partid = 20;
RESULT:
	ERROR - (1146, "Table 'test.errtst_parent' doesn't exist")

-----------
QUERY:

ROLLBACK;
RESULT:
	[]

-----------
QUERY:


-- within partition update with child check constraint violation
UPDATE errtst_parent SET data = data + 10 WHERE partid = 0;
RESULT:
	ERROR - (1146, "Table 'test.errtst_parent' doesn't exist")

-----------
QUERY:

UPDATE errtst_parent SET data = data + 10 WHERE partid = 10;
RESULT:
	ERROR - (1146, "Table 'test.errtst_parent' doesn't exist")

-----------
QUERY:

UPDATE errtst_parent SET data = data + 10 WHERE partid = 20;
RESULT:
	ERROR - (1146, "Table 'test.errtst_parent' doesn't exist")

-----------
QUERY:


-- direct leaf partition update, without partition id violation
BEGIN;
RESULT:
	[]

-----------
QUERY:

UPDATE errtst_child_fastdef SET partid = 1 WHERE partid = 0;
RESULT:
	[]

-----------
QUERY:

UPDATE errtst_child_plaindef SET partid = 11 WHERE partid = 10;
RESULT:
	ERROR - (1146, "Table 'test.errtst_child_plaindef' doesn't exist")

-----------
QUERY:

UPDATE errtst_child_reorder SET partid = 21 WHERE partid = 20;
RESULT:
	ERROR - (1146, "Table 'test.errtst_child_reorder' doesn't exist")

-----------
QUERY:

ROLLBACK;
RESULT:
	[]

-----------
QUERY:


-- direct leaf partition update, with partition id violation
UPDATE errtst_child_fastdef SET partid = partid + 10 WHERE partid = 0;
RESULT:
	[]

-----------
QUERY:

UPDATE errtst_child_plaindef SET partid = partid + 10 WHERE partid = 10;
RESULT:
	ERROR - (1146, "Table 'test.errtst_child_plaindef' doesn't exist")

-----------
QUERY:

UPDATE errtst_child_reorder SET partid = partid + 10 WHERE partid = 20;
RESULT:
	ERROR - (1146, "Table 'test.errtst_child_reorder' doesn't exist")

-----------
QUERY:


-- partition move, without child check constraint violation
BEGIN;
RESULT:
	[]

-----------
QUERY:

UPDATE errtst_parent SET partid = 10, data = data + 1 WHERE partid = 0;
RESULT:
	ERROR - (1146, "Table 'test.errtst_parent' doesn't exist")

-----------
QUERY:

UPDATE errtst_parent SET partid = 20, data = data + 1 WHERE partid = 10;
RESULT:
	ERROR - (1146, "Table 'test.errtst_parent' doesn't exist")

-----------
QUERY:

UPDATE errtst_parent SET partid = 0, data = data + 1 WHERE partid = 20;
RESULT:
	ERROR - (1146, "Table 'test.errtst_parent' doesn't exist")

-----------
QUERY:

ROLLBACK;
RESULT:
	[]

-----------
QUERY:


-- partition move, with child check constraint violation
UPDATE errtst_parent SET partid = 10, data = data + 10 WHERE partid = 0;
RESULT:
	ERROR - (1146, "Table 'test.errtst_parent' doesn't exist")

-----------
QUERY:

UPDATE errtst_parent SET partid = 20, data = data + 10 WHERE partid = 10;
RESULT:
	ERROR - (1146, "Table 'test.errtst_parent' doesn't exist")

-----------
QUERY:

UPDATE errtst_parent SET partid = 0, data = data + 10 WHERE partid = 20;
RESULT:
	ERROR - (1146, "Table 'test.errtst_parent' doesn't exist")

-----------
QUERY:


-- partition move, without target partition
UPDATE errtst_parent SET partid = 30, data = data + 10 WHERE partid = 20;
RESULT:
	ERROR - (1146, "Table 'test.errtst_parent' doesn't exist")

-----------
QUERY:


DROP TABLE errtst_parent;
RESULT:
	ERROR - (1051, "Unknown table 'test.errtst_parent'")
