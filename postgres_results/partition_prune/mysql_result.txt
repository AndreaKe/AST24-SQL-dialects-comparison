
-----------
QUERY:
--
-- Test partitioning planner code
--

-- Force generic plans to be used for all prepared statements in this file.
set plan_cache_mode = force_generic_plan;
RESULT:
	ERROR - (1193, "Unknown system variable 'plan_cache_mode'")

-----------
QUERY:


create table lp (a char) partition by list (a);
RESULT:
	ERROR - (1492, 'For LIST partitions each partition must be defined')

-----------
QUERY:

create table lp_default partition of lp default;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of lp default' at line 1")

-----------
QUERY:

create table lp_ef partition of lp for values in ('e', 'f');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of lp for values in ('e', 'f')' at line 1")

-----------
QUERY:

create table lp_ad partition of lp for values in ('a', 'd');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of lp for values in ('a', 'd')' at line 1")

-----------
QUERY:

create table lp_bc partition of lp for values in ('b', 'c');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of lp for values in ('b', 'c')' at line 1")

-----------
QUERY:

create table lp_g partition of lp for values in ('g');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of lp for values in ('g')' at line 1")

-----------
QUERY:

create table lp_null partition of lp for values in (null);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of lp for values in (null)' at line 1")

-----------
QUERY:

explain (costs off) select * from lp;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from lp' at line 1")

-----------
QUERY:

explain (costs off) select * from lp where a > 'a' and a < 'd';
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from lp where a > 'a' and a < 'd'' at line 1")

-----------
QUERY:

explain (costs off) select * from lp where a > 'a' and a <= 'd';
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from lp where a > 'a' and a <= 'd'' at line 1")

-----------
QUERY:

explain (costs off) select * from lp where a = 'a';
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from lp where a = 'a'' at line 1")

-----------
QUERY:

explain (costs off) select * from lp where 'a' = a;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from lp where 'a' = a' at line 1")

-----------
QUERY:
	/* commuted */
explain (costs off) select * from lp where a is not null;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from lp where a is not null' at line 2")

-----------
QUERY:

explain (costs off) select * from lp where a is null;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from lp where a is null' at line 1")

-----------
QUERY:

explain (costs off) select * from lp where a = 'a' or a = 'c';
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from lp where a = 'a' or a = 'c'' at line 1")

-----------
QUERY:

explain (costs off) select * from lp where a is not null and (a = 'a' or a = 'c');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from lp where a is not null and (a = 'a' or a = 'c')' at line 1")

-----------
QUERY:

explain (costs off) select * from lp where a <> 'g';
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from lp where a <> 'g'' at line 1")

-----------
QUERY:

explain (costs off) select * from lp where a <> 'a' and a <> 'd';
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from lp where a <> 'a' and a <> 'd'' at line 1")

-----------
QUERY:

explain (costs off) select * from lp where a not in ('a', 'd');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from lp where a not in ('a', 'd')' at line 1")

-----------
QUERY:


-- collation matches the partitioning collation, pruning works
create table coll_pruning (a text collate "C") partition by list (a);
RESULT:
	ERROR - (1273, "Unknown collation: 'C'")

-----------
QUERY:

create table coll_pruning_a partition of coll_pruning for values in ('a');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of coll_pruning for values in ('a')' at line 1")

-----------
QUERY:

create table coll_pruning_b partition of coll_pruning for values in ('b');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of coll_pruning for values in ('b')' at line 1")

-----------
QUERY:

create table coll_pruning_def partition of coll_pruning default;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of coll_pruning default' at line 1")

-----------
QUERY:

explain (costs off) select * from coll_pruning where a collate "C" = 'a' collate "C";
RESULT:
	ERROR - (1064, 'You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near \'costs off) select * from coll_pruning where a collate "C" = \'a\' collate "C"\' at line 1')

-----------
QUERY:

-- collation doesn/* REPLACED */''t match the partitioning collation, no pruning occurs
explain (costs off) select * from coll_pruning where a collate "POSIX" = 'a' collate "POSIX";
RESULT:
	ERROR - (1064, 'You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near \'costs off) select * from coll_pruning where a collate "POSIX" = \'a\' collate "POS\' at line 2')

-----------
QUERY:


create table rlp (a int, b varchar) partition by range (a);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ') partition by range (a)' at line 1")

-----------
QUERY:

create table rlp_default partition of rlp default partition by list (a);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of rlp default partition by list (a)' at line 1")

-----------
QUERY:

create table rlp_default_default partition of rlp_default default;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of rlp_default default' at line 1")

-----------
QUERY:

create table rlp_default_10 partition of rlp_default for values in (10);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of rlp_default for values in (10)' at line 1")

-----------
QUERY:

create table rlp_default_30 partition of rlp_default for values in (30);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of rlp_default for values in (30)' at line 1")

-----------
QUERY:

create table rlp_default_null partition of rlp_default for values in (null);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of rlp_default for values in (null)' at line 1")

-----------
QUERY:

create table rlp1 partition of rlp for values from (minvalue) to (1);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of rlp for values from (minvalue) to (1)' at line 1")

-----------
QUERY:

create table rlp2 partition of rlp for values from (1) to (10);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of rlp for values from (1) to (10)' at line 1")

-----------
QUERY:


create table rlp3 (b varchar, a int) partition by list (b varchar_ops);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ', a int) partition by list (b varchar_ops)' at line 1")

-----------
QUERY:

create table rlp3_default partition of rlp3 default;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of rlp3 default' at line 1")

-----------
QUERY:

create table rlp3abcd partition of rlp3 for values in ('ab', 'cd');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of rlp3 for values in ('ab', 'cd')' at line 1")

-----------
QUERY:

create table rlp3efgh partition of rlp3 for values in ('ef', 'gh');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of rlp3 for values in ('ef', 'gh')' at line 1")

-----------
QUERY:

create table rlp3nullxy partition of rlp3 for values in (null, 'xy');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of rlp3 for values in (null, 'xy')' at line 1")

-----------
QUERY:

alter table rlp attach partition rlp3 for values from (15) to (20);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'attach partition rlp3 for values from (15) to (20)' at line 1")

-----------
QUERY:


create table rlp4 partition of rlp for values from (20) to (30) partition by range (a);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of rlp for values from (20) to (30) partition by range (a)' at line 1")

-----------
QUERY:

create table rlp4_default partition of rlp4 default;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of rlp4 default' at line 1")

-----------
QUERY:

create table rlp4_1 partition of rlp4 for values from (20) to (25);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of rlp4 for values from (20) to (25)' at line 1")

-----------
QUERY:

create table rlp4_2 partition of rlp4 for values from (25) to (29);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of rlp4 for values from (25) to (29)' at line 1")

-----------
QUERY:


create table rlp5 partition of rlp for values from (31) to (maxvalue) partition by range (a);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of rlp for values from (31) to (maxvalue) partition by range (a)' at line 1")

-----------
QUERY:

create table rlp5_default partition of rlp5 default;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of rlp5 default' at line 1")

-----------
QUERY:

create table rlp5_1 partition of rlp5 for values from (31) to (40);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of rlp5 for values from (31) to (40)' at line 1")

-----------
QUERY:


explain (costs off) select * from rlp where a < 1;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from rlp where a < 1' at line 1")

-----------
QUERY:

explain (costs off) select * from rlp where 1 > a;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from rlp where 1 > a' at line 1")

-----------
QUERY:
	/* commuted */
explain (costs off) select * from rlp where a <= 1;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from rlp where a <= 1' at line 2")

-----------
QUERY:

explain (costs off) select * from rlp where a = 1;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from rlp where a = 1' at line 1")

-----------
QUERY:

explain (costs off) select * from rlp where a = 1::bigint;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from rlp where a = 1::bigint' at line 1")

-----------
QUERY:
		/* same as above */
explain (costs off) select * from rlp where a = 1::numeric;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from rlp where a = 1::numeric' at line 2")

-----------
QUERY:
		/* no pruning */
explain (costs off) select * from rlp where a <= 10;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from rlp where a <= 10' at line 2")

-----------
QUERY:

explain (costs off) select * from rlp where a > 10;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from rlp where a > 10' at line 1")

-----------
QUERY:

explain (costs off) select * from rlp where a < 15;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from rlp where a < 15' at line 1")

-----------
QUERY:

explain (costs off) select * from rlp where a <= 15;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from rlp where a <= 15' at line 1")

-----------
QUERY:

explain (costs off) select * from rlp where a > 15 and b = 'ab';
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from rlp where a > 15 and b = 'ab'' at line 1")

-----------
QUERY:

explain (costs off) select * from rlp where a = 16;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from rlp where a = 16' at line 1")

-----------
QUERY:

explain (costs off) select * from rlp where a = 16 and b in ('not', 'in', 'here');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from rlp where a = 16 and b in ('not', 'in', 'here')' at line 1")

-----------
QUERY:

explain (costs off) select * from rlp where a = 16 and b < 'ab';
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from rlp where a = 16 and b < 'ab'' at line 1")

-----------
QUERY:

explain (costs off) select * from rlp where a = 16 and b <= 'ab';
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from rlp where a = 16 and b <= 'ab'' at line 1")

-----------
QUERY:

explain (costs off) select * from rlp where a = 16 and b is null;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from rlp where a = 16 and b is null' at line 1")

-----------
QUERY:

explain (costs off) select * from rlp where a = 16 and b is not null;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from rlp where a = 16 and b is not null' at line 1")

-----------
QUERY:

explain (costs off) select * from rlp where a is null;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from rlp where a is null' at line 1")

-----------
QUERY:

explain (costs off) select * from rlp where a is not null;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from rlp where a is not null' at line 1")

-----------
QUERY:

explain (costs off) select * from rlp where a > 30;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from rlp where a > 30' at line 1")

-----------
QUERY:

explain (costs off) select * from rlp where a = 30;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from rlp where a = 30' at line 1")

-----------
QUERY:
	/* only default is scanned */
explain (costs off) select * from rlp where a <= 31;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from rlp where a <= 31' at line 2")

-----------
QUERY:

explain (costs off) select * from rlp where a = 1 or a = 7;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from rlp where a = 1 or a = 7' at line 1")

-----------
QUERY:

explain (costs off) select * from rlp where a = 1 or b = 'ab';
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from rlp where a = 1 or b = 'ab'' at line 1")

-----------
QUERY:


explain (costs off) select * from rlp where a > 20 and a < 27;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from rlp where a > 20 and a < 27' at line 1")

-----------
QUERY:

explain (costs off) select * from rlp where a = 29;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from rlp where a = 29' at line 1")

-----------
QUERY:

explain (costs off) select * from rlp where a >= 29;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from rlp where a >= 29' at line 1")

-----------
QUERY:

explain (costs off) select * from rlp where a < 1 or (a > 20 and a < 25);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from rlp where a < 1 or (a > 20 and a < 25)' at line 1")

-----------
QUERY:


-- where clause contradicts sub-partition/* REPLACED */''s constraint
explain (costs off) select * from rlp where a = 20 or a = 40;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from rlp where a = 20 or a = 40' at line 2")

-----------
QUERY:

explain (costs off) select * from rlp3 where a = 20;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from rlp3 where a = 20' at line 1")

-----------
QUERY:
   /* empty */

-- redundant clauses are eliminated
explain (costs off) select * from rlp where a > 1 and a = 10;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from rlp where a > 1 and a = 10' at line 4")

-----------
QUERY:
	/* only default */
explain (costs off) select * from rlp where a > 1 and a >=15;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from rlp where a > 1 and a >=15' at line 2")

-----------
QUERY:
	/* rlp3 onwards, including default */
explain (costs off) select * from rlp where a = 1 and a = 3;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from rlp where a = 1 and a = 3' at line 2")

-----------
QUERY:
	/* empty */
explain (costs off) select * from rlp where (a = 1 and a = 3) or (a > 1 and a = 15);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from rlp where (a = 1 and a = 3) or (a > 1 and a = 15)' at line 2")

-----------
QUERY:


-- multi-column keys
create table mc3p (a int, b int, c int) partition by range (a, abs(b), c);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ', abs(b), c)' at line 2")

-----------
QUERY:

create table mc3p_default partition of mc3p default;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of mc3p default' at line 1")

-----------
QUERY:

create table mc3p0 partition of mc3p for values from (minvalue, minvalue, minvalue) to (1, 1, 1);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of mc3p for values from (minvalue, minvalue, minvalue) to (1, 1, 1)' at line 1")

-----------
QUERY:

create table mc3p1 partition of mc3p for values from (1, 1, 1) to (10, 5, 10);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of mc3p for values from (1, 1, 1) to (10, 5, 10)' at line 1")

-----------
QUERY:

create table mc3p2 partition of mc3p for values from (10, 5, 10) to (10, 10, 10);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of mc3p for values from (10, 5, 10) to (10, 10, 10)' at line 1")

-----------
QUERY:

create table mc3p3 partition of mc3p for values from (10, 10, 10) to (10, 10, 20);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of mc3p for values from (10, 10, 10) to (10, 10, 20)' at line 1")

-----------
QUERY:

create table mc3p4 partition of mc3p for values from (10, 10, 20) to (10, maxvalue, maxvalue);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of mc3p for values from (10, 10, 20) to (10, maxvalue, maxvalue)' at line 1")

-----------
QUERY:

create table mc3p5 partition of mc3p for values from (11, 1, 1) to (20, 10, 10);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of mc3p for values from (11, 1, 1) to (20, 10, 10)' at line 1")

-----------
QUERY:

create table mc3p6 partition of mc3p for values from (20, 10, 10) to (20, 20, 20);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of mc3p for values from (20, 10, 10) to (20, 20, 20)' at line 1")

-----------
QUERY:

create table mc3p7 partition of mc3p for values from (20, 20, 20) to (maxvalue, maxvalue, maxvalue);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of mc3p for values from (20, 20, 20) to (maxvalue, maxvalue, maxvalue)' at line 1")

-----------
QUERY:


explain (costs off) select * from mc3p where a = 1;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from mc3p where a = 1' at line 1")

-----------
QUERY:

explain (costs off) select * from mc3p where a = 1 and abs(b) < 1;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from mc3p where a = 1 and abs(b) < 1' at line 1")

-----------
QUERY:

explain (costs off) select * from mc3p where a = 1 and abs(b) = 1;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from mc3p where a = 1 and abs(b) = 1' at line 1")

-----------
QUERY:

explain (costs off) select * from mc3p where a = 1 and abs(b) = 1 and c < 8;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from mc3p where a = 1 and abs(b) = 1 and c < 8' at line 1")

-----------
QUERY:

explain (costs off) select * from mc3p where a = 10 and abs(b) between 5 and 35;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from mc3p where a = 10 and abs(b) between 5 and 35' at line 1")

-----------
QUERY:

explain (costs off) select * from mc3p where a > 10;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from mc3p where a > 10' at line 1")

-----------
QUERY:

explain (costs off) select * from mc3p where a >= 10;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from mc3p where a >= 10' at line 1")

-----------
QUERY:

explain (costs off) select * from mc3p where a < 10;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from mc3p where a < 10' at line 1")

-----------
QUERY:

explain (costs off) select * from mc3p where a <= 10 and abs(b) < 10;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from mc3p where a <= 10 and abs(b) < 10' at line 1")

-----------
QUERY:

explain (costs off) select * from mc3p where a = 11 and abs(b) = 0;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from mc3p where a = 11 and abs(b) = 0' at line 1")

-----------
QUERY:

explain (costs off) select * from mc3p where a = 20 and abs(b) = 10 and c = 100;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from mc3p where a = 20 and abs(b) = 10 and c = 100' at line 1")

-----------
QUERY:

explain (costs off) select * from mc3p where a > 20;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from mc3p where a > 20' at line 1")

-----------
QUERY:

explain (costs off) select * from mc3p where a >= 20;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from mc3p where a >= 20' at line 1")

-----------
QUERY:

explain (costs off) select * from mc3p where (a = 1 and abs(b) = 1 and c = 1) or (a = 10 and abs(b) = 5 and c = 10) or (a > 11 and a < 20);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from mc3p where (a = 1 and abs(b) = 1 and c = 1) or (a = 10 ' at line 1")

-----------
QUERY:

explain (costs off) select * from mc3p where (a = 1 and abs(b) = 1 and c = 1) or (a = 10 and abs(b) = 5 and c = 10) or (a > 11 and a < 20) or a < 1;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from mc3p where (a = 1 and abs(b) = 1 and c = 1) or (a = 10 ' at line 1")

-----------
QUERY:

explain (costs off) select * from mc3p where (a = 1 and abs(b) = 1 and c = 1) or (a = 10 and abs(b) = 5 and c = 10) or (a > 11 and a < 20) or a < 1 or a = 1;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from mc3p where (a = 1 and abs(b) = 1 and c = 1) or (a = 10 ' at line 1")

-----------
QUERY:

explain (costs off) select * from mc3p where a = 1 or abs(b) = 1 or c = 1;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from mc3p where a = 1 or abs(b) = 1 or c = 1' at line 1")

-----------
QUERY:

explain (costs off) select * from mc3p where (a = 1 and abs(b) = 1) or (a = 10 and abs(b) = 10);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from mc3p where (a = 1 and abs(b) = 1) or (a = 10 and abs(b)' at line 1")

-----------
QUERY:

explain (costs off) select * from mc3p where (a = 1 and abs(b) = 1) or (a = 10 and abs(b) = 9);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from mc3p where (a = 1 and abs(b) = 1) or (a = 10 and abs(b)' at line 1")

-----------
QUERY:


-- a simpler multi-column keys case
create table mc2p (a int, b int) partition by range (a, b);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ', b)' at line 2")

-----------
QUERY:

create table mc2p_default partition of mc2p default;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of mc2p default' at line 1")

-----------
QUERY:

create table mc2p0 partition of mc2p for values from (minvalue, minvalue) to (1, minvalue);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of mc2p for values from (minvalue, minvalue) to (1, minvalue)' at line 1")

-----------
QUERY:

create table mc2p1 partition of mc2p for values from (1, minvalue) to (1, 1);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of mc2p for values from (1, minvalue) to (1, 1)' at line 1")

-----------
QUERY:

create table mc2p2 partition of mc2p for values from (1, 1) to (2, minvalue);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of mc2p for values from (1, 1) to (2, minvalue)' at line 1")

-----------
QUERY:

create table mc2p3 partition of mc2p for values from (2, minvalue) to (2, 1);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of mc2p for values from (2, minvalue) to (2, 1)' at line 1")

-----------
QUERY:

create table mc2p4 partition of mc2p for values from (2, 1) to (2, maxvalue);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of mc2p for values from (2, 1) to (2, maxvalue)' at line 1")

-----------
QUERY:

create table mc2p5 partition of mc2p for values from (2, maxvalue) to (maxvalue, maxvalue);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of mc2p for values from (2, maxvalue) to (maxvalue, maxvalue)' at line 1")

-----------
QUERY:


explain (costs off) select * from mc2p where a < 2;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from mc2p where a < 2' at line 1")

-----------
QUERY:

explain (costs off) select * from mc2p where a = 2 and b < 1;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from mc2p where a = 2 and b < 1' at line 1")

-----------
QUERY:

explain (costs off) select * from mc2p where a > 1;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from mc2p where a > 1' at line 1")

-----------
QUERY:

explain (costs off) select * from mc2p where a = 1 and b > 1;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from mc2p where a = 1 and b > 1' at line 1")

-----------
QUERY:


-- all partitions but the default one should be pruned
explain (costs off) select * from mc2p where a = 1 and b is null;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from mc2p where a = 1 and b is null' at line 2")

-----------
QUERY:

explain (costs off) select * from mc2p where a is null and b is null;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from mc2p where a is null and b is null' at line 1")

-----------
QUERY:

explain (costs off) select * from mc2p where a is null and b = 1;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from mc2p where a is null and b = 1' at line 1")

-----------
QUERY:

explain (costs off) select * from mc2p where a is null;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from mc2p where a is null' at line 1")

-----------
QUERY:

explain (costs off) select * from mc2p where b is null;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from mc2p where b is null' at line 1")

-----------
QUERY:


-- boolean partitioning
create table boolpart (a bool) partition by list (a);
RESULT:
	ERROR - (1492, 'For LIST partitions each partition must be defined')

-----------
QUERY:

create table boolpart_default partition of boolpart default;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of boolpart default' at line 1")

-----------
QUERY:

create table boolpart_t partition of boolpart for values in ('true');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of boolpart for values in ('true')' at line 1")

-----------
QUERY:

create table boolpart_f partition of boolpart for values in ('false');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of boolpart for values in ('false')' at line 1")

-----------
QUERY:

insert into boolpart values (true), (false), (null);
RESULT:
	ERROR - (1146, "Table 'test.boolpart' doesn't exist")

-----------
QUERY:


explain (costs off) select * from boolpart where a in (true, false);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from boolpart where a in (true, false)' at line 1")

-----------
QUERY:

explain (costs off) select * from boolpart where a = false;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from boolpart where a = false' at line 1")

-----------
QUERY:

explain (costs off) select * from boolpart where not a = false;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from boolpart where not a = false' at line 1")

-----------
QUERY:

explain (costs off) select * from boolpart where a is true or a is not true;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from boolpart where a is true or a is not true' at line 1")

-----------
QUERY:

explain (costs off) select * from boolpart where a is not true;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from boolpart where a is not true' at line 1")

-----------
QUERY:

explain (costs off) select * from boolpart where a is not true and a is not false;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from boolpart where a is not true and a is not false' at line 1")

-----------
QUERY:

explain (costs off) select * from boolpart where a is unknown;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from boolpart where a is unknown' at line 1")

-----------
QUERY:

explain (costs off) select * from boolpart where a is not unknown;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from boolpart where a is not unknown' at line 1")

-----------
QUERY:


select * from boolpart where a in (true, false);
RESULT:
	ERROR - (1146, "Table 'test.boolpart' doesn't exist")

-----------
QUERY:

select * from boolpart where a = false;
RESULT:
	ERROR - (1146, "Table 'test.boolpart' doesn't exist")

-----------
QUERY:

select * from boolpart where not a = false;
RESULT:
	ERROR - (1146, "Table 'test.boolpart' doesn't exist")

-----------
QUERY:

select * from boolpart where a is true or a is not true;
RESULT:
	ERROR - (1146, "Table 'test.boolpart' doesn't exist")

-----------
QUERY:

select * from boolpart where a is not true;
RESULT:
	ERROR - (1146, "Table 'test.boolpart' doesn't exist")

-----------
QUERY:

select * from boolpart where a is not true and a is not false;
RESULT:
	ERROR - (1146, "Table 'test.boolpart' doesn't exist")

-----------
QUERY:

select * from boolpart where a is unknown;
RESULT:
	ERROR - (1146, "Table 'test.boolpart' doesn't exist")

-----------
QUERY:

select * from boolpart where a is not unknown;
RESULT:
	ERROR - (1146, "Table 'test.boolpart' doesn't exist")

-----------
QUERY:


-- try some other permutations with a NULL partition instead of a DEFAULT
delete from boolpart where a is null;
RESULT:
	ERROR - (1146, "Table 'test.boolpart' doesn't exist")

-----------
QUERY:

create table boolpart_null partition of boolpart for values in (null);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of boolpart for values in (null)' at line 1")

-----------
QUERY:

insert into boolpart values(null);
RESULT:
	ERROR - (1146, "Table 'test.boolpart' doesn't exist")

-----------
QUERY:


explain (costs off) select * from boolpart where a is not true;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from boolpart where a is not true' at line 1")

-----------
QUERY:

explain (costs off) select * from boolpart where a is not true and a is not false;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from boolpart where a is not true and a is not false' at line 1")

-----------
QUERY:

explain (costs off) select * from boolpart where a is not false;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from boolpart where a is not false' at line 1")

-----------
QUERY:

explain (costs off) select * from boolpart where a is not unknown;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from boolpart where a is not unknown' at line 1")

-----------
QUERY:


select * from boolpart where a is not true;
RESULT:
	ERROR - (1146, "Table 'test.boolpart' doesn't exist")

-----------
QUERY:

select * from boolpart where a is not true and a is not false;
RESULT:
	ERROR - (1146, "Table 'test.boolpart' doesn't exist")

-----------
QUERY:

select * from boolpart where a is not false;
RESULT:
	ERROR - (1146, "Table 'test.boolpart' doesn't exist")

-----------
QUERY:

select * from boolpart where a is not unknown;
RESULT:
	ERROR - (1146, "Table 'test.boolpart' doesn't exist")

-----------
QUERY:


-- check that all partitions are pruned when faced with conflicting clauses
explain (costs off) select * from boolpart where a is not unknown and a is unknown;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from boolpart where a is not unknown and a is unknown' at line 2")

-----------
QUERY:

explain (costs off) select * from boolpart where a is false and a is unknown;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from boolpart where a is false and a is unknown' at line 1")

-----------
QUERY:

explain (costs off) select * from boolpart where a is true and a is unknown;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from boolpart where a is true and a is unknown' at line 1")

-----------
QUERY:


-- inverse boolean partitioning - a seemingly unlikely design, but we/* REPLACED */''ve got
-- code for it, so we/* REPLACED */''d better test it.
create table iboolpart (a bool) partition by list ((not a));
RESULT:
	ERROR - (1492, 'For LIST partitions each partition must be defined')

-----------
QUERY:

create table iboolpart_default partition of iboolpart default;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of iboolpart default' at line 1")

-----------
QUERY:

create table iboolpart_f partition of iboolpart for values in ('true');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of iboolpart for values in ('true')' at line 1")

-----------
QUERY:

create table iboolpart_t partition of iboolpart for values in ('false');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of iboolpart for values in ('false')' at line 1")

-----------
QUERY:

insert into iboolpart values (true), (false), (null);
RESULT:
	ERROR - (1146, "Table 'test.iboolpart' doesn't exist")

-----------
QUERY:


explain (costs off) select * from iboolpart where a in (true, false);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from iboolpart where a in (true, false)' at line 1")

-----------
QUERY:

explain (costs off) select * from iboolpart where a = false;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from iboolpart where a = false' at line 1")

-----------
QUERY:

explain (costs off) select * from iboolpart where not a = false;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from iboolpart where not a = false' at line 1")

-----------
QUERY:

explain (costs off) select * from iboolpart where a is true or a is not true;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from iboolpart where a is true or a is not true' at line 1")

-----------
QUERY:

explain (costs off) select * from iboolpart where a is not true;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from iboolpart where a is not true' at line 1")

-----------
QUERY:

explain (costs off) select * from iboolpart where a is not true and a is not false;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from iboolpart where a is not true and a is not false' at line 1")

-----------
QUERY:

explain (costs off) select * from iboolpart where a is unknown;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from iboolpart where a is unknown' at line 1")

-----------
QUERY:

explain (costs off) select * from iboolpart where a is not unknown;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from iboolpart where a is not unknown' at line 1")

-----------
QUERY:


select * from iboolpart where a in (true, false);
RESULT:
	ERROR - (1146, "Table 'test.iboolpart' doesn't exist")

-----------
QUERY:

select * from iboolpart where a = false;
RESULT:
	ERROR - (1146, "Table 'test.iboolpart' doesn't exist")

-----------
QUERY:

select * from iboolpart where not a = false;
RESULT:
	ERROR - (1146, "Table 'test.iboolpart' doesn't exist")

-----------
QUERY:

select * from iboolpart where a is true or a is not true;
RESULT:
	ERROR - (1146, "Table 'test.iboolpart' doesn't exist")

-----------
QUERY:

select * from iboolpart where a is not true;
RESULT:
	ERROR - (1146, "Table 'test.iboolpart' doesn't exist")

-----------
QUERY:

select * from iboolpart where a is not true and a is not false;
RESULT:
	ERROR - (1146, "Table 'test.iboolpart' doesn't exist")

-----------
QUERY:

select * from iboolpart where a is unknown;
RESULT:
	ERROR - (1146, "Table 'test.iboolpart' doesn't exist")

-----------
QUERY:

select * from iboolpart where a is not unknown;
RESULT:
	ERROR - (1146, "Table 'test.iboolpart' doesn't exist")

-----------
QUERY:


-- Try some other permutations with a NULL partition instead of a DEFAULT
delete from iboolpart where a is null;
RESULT:
	ERROR - (1146, "Table 'test.iboolpart' doesn't exist")

-----------
QUERY:

create table iboolpart_null partition of iboolpart for values in (null);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of iboolpart for values in (null)' at line 1")

-----------
QUERY:

insert into iboolpart values(null);
RESULT:
	ERROR - (1146, "Table 'test.iboolpart' doesn't exist")

-----------
QUERY:


-- Pruning shouldn/* REPLACED */''t take place for these.  Just check the result is correct
select * from iboolpart where a is not true;
RESULT:
	ERROR - (1146, "Table 'test.iboolpart' doesn't exist")

-----------
QUERY:

select * from iboolpart where a is not true and a is not false;
RESULT:
	ERROR - (1146, "Table 'test.iboolpart' doesn't exist")

-----------
QUERY:

select * from iboolpart where a is not false;
RESULT:
	ERROR - (1146, "Table 'test.iboolpart' doesn't exist")

-----------
QUERY:


create table boolrangep (a bool, b bool, c int) partition by range (a,b,c);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ',b,c)' at line 1")

-----------
QUERY:

create table boolrangep_tf partition of boolrangep for values from ('true', 'false', 0) to ('true', 'false', 100);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of boolrangep for values from ('true', 'false', 0) to ('true', 'false', 100)' at line 1")

-----------
QUERY:

create table boolrangep_ft partition of boolrangep for values from ('false', 'true', 0) to ('false', 'true', 100);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of boolrangep for values from ('false', 'true', 0) to ('false', 'true', 100)' at line 1")

-----------
QUERY:

create table boolrangep_ff1 partition of boolrangep for values from ('false', 'false', 0) to ('false', 'false', 50);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of boolrangep for values from ('false', 'false', 0) to ('false', 'false', 50)' at line 1")

-----------
QUERY:

create table boolrangep_ff2 partition of boolrangep for values from ('false', 'false', 50) to ('false', 'false', 100);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of boolrangep for values from ('false', 'false', 50) to ('false', 'false', 100)' at line 1")

-----------
QUERY:

create table boolrangep_null partition of boolrangep default;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of boolrangep default' at line 1")

-----------
QUERY:


-- try a more complex case that/* REPLACED */''s been known to trip up pruning in the past
explain (costs off)  select * from boolrangep where not a and not b and c = 25;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off)  select * from boolrangep where not a and not b and c = 25' at line 2")

-----------
QUERY:


-- ensure we prune boolrangep_tf
explain (costs off)  select * from boolrangep where a is not true and not b and c = 25;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off)  select * from boolrangep where a is not true and not b and c = 25' at line 2")

-----------
QUERY:


-- ensure we prune everything apart from boolrangep_tf and boolrangep_null
explain (costs off)  select * from boolrangep where a is not false and not b and c = 25;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off)  select * from boolrangep where a is not false and not b and c = 25' at line 2")

-----------
QUERY:


-- test scalar-to-array operators
create table coercepart (a varchar) partition by list (a);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ') partition by list (a)' at line 2")

-----------
QUERY:

create table coercepart_ab partition of coercepart for values in ('ab');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of coercepart for values in ('ab')' at line 1")

-----------
QUERY:

create table coercepart_bc partition of coercepart for values in ('bc');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of coercepart for values in ('bc')' at line 1")

-----------
QUERY:

create table coercepart_cd partition of coercepart for values in ('cd');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of coercepart for values in ('cd')' at line 1")

-----------
QUERY:


explain (costs off) select * from coercepart where a in ('ab', to_char(125, '999'));
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from coercepart where a in ('ab', to_char(125, '999'))' at line 1")

-----------
QUERY:

explain (costs off) select * from coercepart where a ~ any ('{ab}');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from coercepart where a ~ any ('{ab}')' at line 1")

-----------
QUERY:

explain (costs off) select * from coercepart where a !~ all ('{ab}');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from coercepart where a !~ all ('{ab}')' at line 1")

-----------
QUERY:

explain (costs off) select * from coercepart where a ~ any ('{ab,bc}');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from coercepart where a ~ any ('{ab,bc}')' at line 1")

-----------
QUERY:

explain (costs off) select * from coercepart where a !~ all ('{ab,bc}');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from coercepart where a !~ all ('{ab,bc}')' at line 1")

-----------
QUERY:

explain (costs off) select * from coercepart where a = any ('{ab,bc}');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from coercepart where a = any ('{ab,bc}')' at line 1")

-----------
QUERY:

explain (costs off) select * from coercepart where a = any ('{ab,null}');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from coercepart where a = any ('{ab,null}')' at line 1")

-----------
QUERY:

explain (costs off) select * from coercepart where a = any (null::text[]);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from coercepart where a = any (null::text[])' at line 1")

-----------
QUERY:

explain (costs off) select * from coercepart where a = all ('{ab}');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from coercepart where a = all ('{ab}')' at line 1")

-----------
QUERY:

explain (costs off) select * from coercepart where a = all ('{ab,bc}');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from coercepart where a = all ('{ab,bc}')' at line 1")

-----------
QUERY:

explain (costs off) select * from coercepart where a = all ('{ab,null}');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from coercepart where a = all ('{ab,null}')' at line 1")

-----------
QUERY:

explain (costs off) select * from coercepart where a = all (null::text[]);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from coercepart where a = all (null::text[])' at line 1")

-----------
QUERY:


drop table coercepart;
RESULT:
	ERROR - (1051, "Unknown table 'test.coercepart'")

-----------
QUERY:


CREATE TABLE part (a INT, b INT) PARTITION BY LIST (a);
RESULT:
	ERROR - (1492, 'For LIST partitions each partition must be defined')

-----------
QUERY:

CREATE TABLE part_p1 PARTITION OF part FOR VALUES IN (-2,-1,0,1,2);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'OF part FOR VALUES IN (-2,-1,0,1,2)' at line 1")

-----------
QUERY:

CREATE TABLE part_p2 PARTITION OF part DEFAULT PARTITION BY RANGE(a);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'OF part DEFAULT PARTITION BY RANGE(a)' at line 1")

-----------
QUERY:

CREATE TABLE part_p2_p1 PARTITION OF part_p2 DEFAULT;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'OF part_p2 DEFAULT' at line 1")

-----------
QUERY:

CREATE TABLE part_rev (b INT, c INT, a INT);
RESULT:
	[]

-----------
QUERY:

ALTER TABLE part ATTACH PARTITION part_rev FOR VALUES IN (3);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'ATTACH PARTITION part_rev FOR VALUES IN (3)' at line 1")

-----------
QUERY:
  -- fail
ALTER TABLE part_rev DROP COLUMN c;
RESULT:
	[]

-----------
QUERY:

ALTER TABLE part ATTACH PARTITION part_rev FOR VALUES IN (3);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'ATTACH PARTITION part_rev FOR VALUES IN (3)' at line 1")

-----------
QUERY:
  -- now it/* REPLACED */''s ok
INSERT INTO part VALUES (-1,-1), (1,1), (2,NULL), (NULL,-2),(NULL,NULL);
RESULT:
	ERROR - (1146, "Table 'test.part' doesn't exist")

-----------
QUERY:

EXPLAIN (COSTS OFF) SELECT tableoid::regclass as part, a, b FROM part WHERE a IS NULL ORDER BY 1, 2, 3;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'COSTS OFF) SELECT tableoid::regclass as part, a, b FROM part WHERE a IS NULL ORD' at line 1")

-----------
QUERY:

EXPLAIN (VERBOSE, COSTS OFF) SELECT * FROM part p(x) ORDER BY x;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'VERBOSE, COSTS OFF) SELECT * FROM part p(x) ORDER BY x' at line 1")

-----------
QUERY:


--
-- some more cases
--

--
-- pruning for partitioned table appearing inside a sub-query
--
-- pruning won/* REPLACED */''t work for mc3p, because some keys are Params
explain (costs off) select * from mc2p t1, lateral (select count(*) from mc3p t2 where t2.a = t1.b and abs(t2.b) = 1 and t2.c = 1) s where t1.a = 1;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from mc2p t1, lateral (select count(*) from mc3p t2 where t2' at line 9")

-----------
QUERY:


-- pruning should work fine, because values for a prefix of keys (a, b) are
-- available
explain (costs off) select * from mc2p t1, lateral (select count(*) from mc3p t2 where t2.c = t1.b and abs(t2.b) = 1 and t2.a = 1) s where t1.a = 1;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from mc2p t1, lateral (select count(*) from mc3p t2 where t2' at line 3")

-----------
QUERY:


-- also here, because values for all keys are provided
explain (costs off) select * from mc2p t1, lateral (select count(*) from mc3p t2 where t2.a = 1 and abs(t2.b) = 1 and t2.c = 1) s where t1.a = 1;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from mc2p t1, lateral (select count(*) from mc3p t2 where t2' at line 2")

-----------
QUERY:


--
-- pruning with clauses containing <> operator
--

-- doesn/* REPLACED */''t prune range partitions
create table rp (a int) partition by range (a);
RESULT:
	ERROR - (1492, 'For RANGE partitions each partition must be defined')

-----------
QUERY:

create table rp0 partition of rp for values from (minvalue) to (1);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of rp for values from (minvalue) to (1)' at line 1")

-----------
QUERY:

create table rp1 partition of rp for values from (1) to (2);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of rp for values from (1) to (2)' at line 1")

-----------
QUERY:

create table rp2 partition of rp for values from (2) to (maxvalue);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of rp for values from (2) to (maxvalue)' at line 1")

-----------
QUERY:


explain (costs off) select * from rp where a <> 1;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from rp where a <> 1' at line 1")

-----------
QUERY:

explain (costs off) select * from rp where a <> 1 and a <> 2;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from rp where a <> 1 and a <> 2' at line 1")

-----------
QUERY:


-- null partition should be eliminated due to strict <> clause.
explain (costs off) select * from lp where a <> 'a';
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from lp where a <> 'a'' at line 2")

-----------
QUERY:


-- ensure we detect contradictions in clauses /* REPLACED */, a can/* REPLACED */''t be NULL and NOT NULL.
explain (costs off) select * from lp where a <> 'a' and a is null;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from lp where a <> 'a' and a is null' at line 2")

-----------
QUERY:

explain (costs off) select * from lp where (a <> 'a' and a <> 'd') or a is null;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from lp where (a <> 'a' and a <> 'd') or a is null' at line 1")

-----------
QUERY:


-- check that it also works for a partitioned table that/* REPLACED */''s not root,
-- which in this case are partitions of rlp that are themselves
-- list-partitioned on b
explain (costs off) select * from rlp where a = 15 and b <> 'ab' and b <> 'cd' and b <> 'xy' and b is not null;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from rlp where a = 15 and b <> 'ab' and b <> 'cd' and b <> '' at line 4")

-----------
QUERY:


--
-- different collations for different keys with same expression
--
create table coll_pruning_multi (a text) partition by range (substr(a, 1) collate "POSIX", substr(a, 1) collate "C");
RESULT:
	ERROR - (1273, "Unknown collation: 'POSIX'")

-----------
QUERY:

create table coll_pruning_multi1 partition of coll_pruning_multi for values from ('a', 'a') to ('a', 'e');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of coll_pruning_multi for values from ('a', 'a') to ('a', 'e')' at line 1")

-----------
QUERY:

create table coll_pruning_multi2 partition of coll_pruning_multi for values from ('a', 'e') to ('a', 'z');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of coll_pruning_multi for values from ('a', 'e') to ('a', 'z')' at line 1")

-----------
QUERY:

create table coll_pruning_multi3 partition of coll_pruning_multi for values from ('b', 'a') to ('b', 'e');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of coll_pruning_multi for values from ('b', 'a') to ('b', 'e')' at line 1")

-----------
QUERY:


-- no pruning, because no value for the leading key
explain (costs off) select * from coll_pruning_multi where substr(a, 1) = 'e' collate "C";
RESULT:
	ERROR - (1064, 'You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near \'costs off) select * from coll_pruning_multi where substr(a, 1) = \'e\' collate "C"\' at line 2')

-----------
QUERY:


-- pruning, with a value provided for the leading key
explain (costs off) select * from coll_pruning_multi where substr(a, 1) = 'a' collate "POSIX";
RESULT:
	ERROR - (1064, 'You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near \'costs off) select * from coll_pruning_multi where substr(a, 1) = \'a\' collate "PO\' at line 2')

-----------
QUERY:


-- pruning, with values provided for both keys
explain (costs off) select * from coll_pruning_multi where substr(a, 1) = 'e' collate "C" and substr(a, 1) = 'a' collate "POSIX";
RESULT:
	ERROR - (1064, 'You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near \'costs off) select * from coll_pruning_multi where substr(a, 1) = \'e\' collate "C"\' at line 2')

-----------
QUERY:


--
-- LIKE operators don/* REPLACED */''t prune
--
create table like_op_noprune (a text) partition by list (a);
RESULT:
	ERROR - (1492, 'For LIST partitions each partition must be defined')

-----------
QUERY:

create table like_op_noprune1 partition of like_op_noprune for values in ('ABC');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of like_op_noprune for values in ('ABC')' at line 1")

-----------
QUERY:

create table like_op_noprune2 partition of like_op_noprune for values in ('BCD');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of like_op_noprune for values in ('BCD')' at line 1")

-----------
QUERY:

explain (costs off) select * from like_op_noprune where a like '%BC';
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from like_op_noprune where a like '%BC'' at line 1")

-----------
QUERY:


--
-- tests wherein clause value requires a cross-type comparison function
--
create table lparted_by_int2 (a smallint) partition by list (a);
RESULT:
	ERROR - (1492, 'For LIST partitions each partition must be defined')

-----------
QUERY:

create table lparted_by_int2_1 partition of lparted_by_int2 for values in (1);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of lparted_by_int2 for values in (1)' at line 1")

-----------
QUERY:

create table lparted_by_int2_16384 partition of lparted_by_int2 for values in (16384);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of lparted_by_int2 for values in (16384)' at line 1")

-----------
QUERY:

explain (costs off) select * from lparted_by_int2 where a = 100_000_000_000_000;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from lparted_by_int2 where a = 100_000_000_000_000' at line 1")

-----------
QUERY:


create table rparted_by_int2 (a smallint) partition by range (a);
RESULT:
	ERROR - (1492, 'For RANGE partitions each partition must be defined')

-----------
QUERY:

create table rparted_by_int2_1 partition of rparted_by_int2 for values from (1) to (10);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of rparted_by_int2 for values from (1) to (10)' at line 1")

-----------
QUERY:

create table rparted_by_int2_16384 partition of rparted_by_int2 for values from (10) to (16384);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of rparted_by_int2 for values from (10) to (16384)' at line 1")

-----------
QUERY:

-- all partitions pruned
explain (costs off) select * from rparted_by_int2 where a > 100_000_000_000_000;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from rparted_by_int2 where a > 100_000_000_000_000' at line 2")

-----------
QUERY:

create table rparted_by_int2_maxvalue partition of rparted_by_int2 for values from (16384) to (maxvalue);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of rparted_by_int2 for values from (16384) to (maxvalue)' at line 1")

-----------
QUERY:

-- all partitions but rparted_by_int2_maxvalue pruned
explain (costs off) select * from rparted_by_int2 where a > 100_000_000_000_000;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from rparted_by_int2 where a > 100_000_000_000_000' at line 2")

-----------
QUERY:


drop table lp, coll_pruning, rlp, mc3p, mc2p, boolpart, iboolpart, boolrangep, rp, coll_pruning_multi, like_op_noprune, lparted_by_int2, rparted_by_int2;
RESULT:
	ERROR - (1051, "Unknown table 'test.lp,test.coll_pruning,test.rlp,test.mc3p,test.mc2p,test.boolpart,test.iboolpart,test.boolrangep,test.rp,test.coll_pruning_mul'")

-----------
QUERY:


--
-- Test Partition pruning for HASH partitioning
--
-- Use hand-rolled hash functions and operator classes to get predictable
-- result on different machines.  See the definitions of
-- part_test_int4_ops and part_test_text_ops in test_setup.sql.
--

create table hp (a int, b text, c int)
  partition by hash (a part_test_int4_ops, b part_test_text_ops);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'part_test_int4_ops, b part_test_text_ops)' at line 10")

-----------
QUERY:

create table hp0 partition of hp for values with (modulus 4, remainder 0);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of hp for values with (modulus 4, remainder 0)' at line 1")

-----------
QUERY:

create table hp3 partition of hp for values with (modulus 4, remainder 3);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of hp for values with (modulus 4, remainder 3)' at line 1")

-----------
QUERY:

create table hp1 partition of hp for values with (modulus 4, remainder 1);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of hp for values with (modulus 4, remainder 1)' at line 1")

-----------
QUERY:

create table hp2 partition of hp for values with (modulus 4, remainder 2);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of hp for values with (modulus 4, remainder 2)' at line 1")

-----------
QUERY:


insert into hp values (null, null, 0);
RESULT:
	ERROR - (1146, "Table 'test.hp' doesn't exist")

-----------
QUERY:

insert into hp values (1, null, 1);
RESULT:
	ERROR - (1146, "Table 'test.hp' doesn't exist")

-----------
QUERY:

insert into hp values (1, 'xxx', 2);
RESULT:
	ERROR - (1146, "Table 'test.hp' doesn't exist")

-----------
QUERY:

insert into hp values (null, 'xxx', 3);
RESULT:
	ERROR - (1146, "Table 'test.hp' doesn't exist")

-----------
QUERY:

insert into hp values (2, 'xxx', 4);
RESULT:
	ERROR - (1146, "Table 'test.hp' doesn't exist")

-----------
QUERY:

insert into hp values (1, 'abcde', 5);
RESULT:
	ERROR - (1146, "Table 'test.hp' doesn't exist")

-----------
QUERY:

select tableoid::regclass, * from hp order by c;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::regclass, * from hp order by c' at line 1")

-----------
QUERY:


-- partial keys won/* REPLACED */''t prune, nor would non-equality conditions
explain (costs off) select * from hp where a = 1;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from hp where a = 1' at line 2")

-----------
QUERY:

explain (costs off) select * from hp where b = 'xxx';
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from hp where b = 'xxx'' at line 1")

-----------
QUERY:

explain (costs off) select * from hp where a is null;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from hp where a is null' at line 1")

-----------
QUERY:

explain (costs off) select * from hp where b is null;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from hp where b is null' at line 1")

-----------
QUERY:

explain (costs off) select * from hp where a < 1 and b = 'xxx';
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from hp where a < 1 and b = 'xxx'' at line 1")

-----------
QUERY:

explain (costs off) select * from hp where a <> 1 and b = 'yyy';
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from hp where a <> 1 and b = 'yyy'' at line 1")

-----------
QUERY:

explain (costs off) select * from hp where a <> 1 and b <> 'xxx';
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from hp where a <> 1 and b <> 'xxx'' at line 1")

-----------
QUERY:


-- pruning should work if either a value or a IS NULL clause is provided for
-- each of the keys
explain (costs off) select * from hp where a is null and b is null;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from hp where a is null and b is null' at line 3")

-----------
QUERY:

explain (costs off) select * from hp where a = 1 and b is null;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from hp where a = 1 and b is null' at line 1")

-----------
QUERY:

explain (costs off) select * from hp where a = 1 and b = 'xxx';
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from hp where a = 1 and b = 'xxx'' at line 1")

-----------
QUERY:

explain (costs off) select * from hp where a is null and b = 'xxx';
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from hp where a is null and b = 'xxx'' at line 1")

-----------
QUERY:

explain (costs off) select * from hp where a = 2 and b = 'xxx';
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from hp where a = 2 and b = 'xxx'' at line 1")

-----------
QUERY:

explain (costs off) select * from hp where a = 1 and b = 'abcde';
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from hp where a = 1 and b = 'abcde'' at line 1")

-----------
QUERY:

explain (costs off) select * from hp where (a = 1 and b = 'abcde') or (a = 2 and b = 'xxx') or (a is null and b is null);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from hp where (a = 1 and b = 'abcde') or (a = 2 and b = 'xxx' at line 1")

-----------
QUERY:


-- test pruning when not all the partitions exist
drop table hp1;
RESULT:
	ERROR - (1051, "Unknown table 'test.hp1'")

-----------
QUERY:

drop table hp3;
RESULT:
	ERROR - (1051, "Unknown table 'test.hp3'")

-----------
QUERY:

explain (costs off) select * from hp where a = 1 and b = 'abcde';
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from hp where a = 1 and b = 'abcde'' at line 1")

-----------
QUERY:

explain (costs off) select * from hp where a = 1 and b = 'abcde' and
  (c = 2 or c = 3);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from hp where a = 1 and b = 'abcde' and\n  (c = 2 or c = 3)' at line 1")

-----------
QUERY:

drop table hp2;
RESULT:
	ERROR - (1051, "Unknown table 'test.hp2'")

-----------
QUERY:

explain (costs off) select * from hp where a = 1 and b = 'abcde' and
  (c = 2 or c = 3);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from hp where a = 1 and b = 'abcde' and\n  (c = 2 or c = 3)' at line 1")

-----------
QUERY:


--
-- Test runtime partition pruning
--
create table ab (a int not null, b int not null) partition by list (a);
RESULT:
	ERROR - (1492, 'For LIST partitions each partition must be defined')

-----------
QUERY:

create table ab_a2 partition of ab for values in(2) partition by list (b);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of ab for values in(2) partition by list (b)' at line 1")

-----------
QUERY:

create table ab_a2_b1 partition of ab_a2 for values in (1);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of ab_a2 for values in (1)' at line 1")

-----------
QUERY:

create table ab_a2_b2 partition of ab_a2 for values in (2);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of ab_a2 for values in (2)' at line 1")

-----------
QUERY:

create table ab_a2_b3 partition of ab_a2 for values in (3);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of ab_a2 for values in (3)' at line 1")

-----------
QUERY:

create table ab_a1 partition of ab for values in(1) partition by list (b);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of ab for values in(1) partition by list (b)' at line 1")

-----------
QUERY:

create table ab_a1_b1 partition of ab_a1 for values in (1);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of ab_a1 for values in (1)' at line 1")

-----------
QUERY:

create table ab_a1_b2 partition of ab_a1 for values in (2);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of ab_a1 for values in (2)' at line 1")

-----------
QUERY:

create table ab_a1_b3 partition of ab_a1 for values in (3);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of ab_a1 for values in (3)' at line 1")

-----------
QUERY:

create table ab_a3 partition of ab for values in(3) partition by list (b);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of ab for values in(3) partition by list (b)' at line 1")

-----------
QUERY:

create table ab_a3_b1 partition of ab_a3 for values in (1);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of ab_a3 for values in (1)' at line 1")

-----------
QUERY:

create table ab_a3_b2 partition of ab_a3 for values in (2);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of ab_a3 for values in (2)' at line 1")

-----------
QUERY:

create table ab_a3_b3 partition of ab_a3 for values in (3);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of ab_a3 for values in (3)' at line 1")

-----------
QUERY:


-- Disallow index only scans as concurrent transactions may stop visibility
-- bits being set causing /* REPLACED */''Heap Fetches/* REPLACED */'' to be unstable in the EXPLAIN ANALYZE
-- output.
set enable_indexonlyscan = off;
RESULT:
	ERROR - (1193, "Unknown system variable 'enable_indexonlyscan'")

-----------
QUERY:


prepare ab_q1 (int, int, int) as
select * from ab where a between $1 and $2 and b <= $3;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(int, int, int) as\nselect * from ab where a between $1 and $2 and b <= $3' at line 1")

-----------
QUERY:


explain (analyze, costs off, summary off, timing off) execute ab_q1 (2, 2, 3);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'analyze, costs off, summary off, timing off) execute ab_q1 (2, 2, 3)' at line 1")

-----------
QUERY:

explain (analyze, costs off, summary off, timing off) execute ab_q1 (1, 2, 3);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'analyze, costs off, summary off, timing off) execute ab_q1 (1, 2, 3)' at line 1")

-----------
QUERY:


deallocate ab_q1;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'ab_q1' at line 1")

-----------
QUERY:


-- Runtime pruning after optimizer pruning
prepare ab_q1 (int, int) as
select a from ab where a between $1 and $2 and b < 3;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(int, int) as\nselect a from ab where a between $1 and $2 and b < 3' at line 2")

-----------
QUERY:


explain (analyze, costs off, summary off, timing off) execute ab_q1 (2, 2);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'analyze, costs off, summary off, timing off) execute ab_q1 (2, 2)' at line 1")

-----------
QUERY:

explain (analyze, costs off, summary off, timing off) execute ab_q1 (2, 4);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'analyze, costs off, summary off, timing off) execute ab_q1 (2, 4)' at line 1")

-----------
QUERY:


-- Ensure a mix of PARAM_EXTERN and PARAM_EXEC Params work together at
-- different levels of partitioning.
prepare ab_q2 (int, int) as
select a from ab where a between $1 and $2 and b < (select 3);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(int, int) as\nselect a from ab where a between $1 and $2 and b < (select 3)' at line 3")

-----------
QUERY:


explain (analyze, costs off, summary off, timing off) execute ab_q2 (2, 2);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'analyze, costs off, summary off, timing off) execute ab_q2 (2, 2)' at line 1")

-----------
QUERY:


-- As above, but swap the PARAM_EXEC Param to the first partition level
prepare ab_q3 (int, int) as
select a from ab where b between $1 and $2 and a < (select 3);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(int, int) as\nselect a from ab where b between $1 and $2 and a < (select 3)' at line 2")

-----------
QUERY:


explain (analyze, costs off, summary off, timing off) execute ab_q3 (2, 2);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'analyze, costs off, summary off, timing off) execute ab_q3 (2, 2)' at line 1")

-----------
QUERY:


--
-- Test runtime pruning with hash partitioned tables
--

-- recreate partitions dropped above
create table hp1 partition of hp for values with (modulus 4, remainder 1);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of hp for values with (modulus 4, remainder 1)' at line 6")

-----------
QUERY:

create table hp2 partition of hp for values with (modulus 4, remainder 2);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of hp for values with (modulus 4, remainder 2)' at line 1")

-----------
QUERY:

create table hp3 partition of hp for values with (modulus 4, remainder 3);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of hp for values with (modulus 4, remainder 3)' at line 1")

-----------
QUERY:


-- Ensure we correctly prune unneeded partitions when there is an IS NULL qual
prepare hp_q1 (text) as
select * from hp where a is null and b = $1;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(text) as\nselect * from hp where a is null and b = $1' at line 2")

-----------
QUERY:


explain (costs off) execute hp_q1('xxx');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) execute hp_q1('xxx')' at line 1")

-----------
QUERY:


deallocate hp_q1;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'hp_q1' at line 1")

-----------
QUERY:


drop table hp;
RESULT:
	ERROR - (1051, "Unknown table 'test.hp'")

-----------
QUERY:


-- Test a backwards Append scan
create table list_part (a int) partition by list (a);
RESULT:
	ERROR - (1492, 'For LIST partitions each partition must be defined')

-----------
QUERY:

create table list_part1 partition of list_part for values in (1);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of list_part for values in (1)' at line 1")

-----------
QUERY:

create table list_part2 partition of list_part for values in (2);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of list_part for values in (2)' at line 1")

-----------
QUERY:

create table list_part3 partition of list_part for values in (3);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of list_part for values in (3)' at line 1")

-----------
QUERY:

create table list_part4 partition of list_part for values in (4);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of list_part for values in (4)' at line 1")

-----------
QUERY:


insert into list_part select generate_series(1,4);
RESULT:
	ERROR - (1146, "Table 'test.list_part' doesn't exist")

-----------
QUERY:


begin;
RESULT:
	[]

-----------
QUERY:


-- Don/* REPLACED */''t select an actual value out of the table as the order of the Append/* REPLACED */''s
-- subnodes may not be stable.
declare cur SCROLL CURSOR for select 1 from list_part where a > (select 1) and a < (select 4);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'declare cur SCROLL CURSOR for select 1 from list_part where a > (select 1) and a' at line 3")

-----------
QUERY:


-- move beyond the final row
move 3 from cur;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'move 3 from cur' at line 2")

-----------
QUERY:


-- Ensure we get two rows.
fetch backward all from cur;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'fetch backward all from cur' at line 2")

-----------
QUERY:


commit;
RESULT:
	[]

-----------
QUERY:


begin;
RESULT:
	[]

-----------
QUERY:


-- Test run-time pruning using stable functions
create function list_part_fn(int) returns int as $$ begin return $1; end;$$ language plpgsql stable;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'int) returns int as $$ begin return $1; end;$$ language plpgsql stable' at line 2")

-----------
QUERY:


-- Ensure pruning works using a stable function containing no Vars
explain (analyze, costs off, summary off, timing off) select * from list_part where a = list_part_fn(1);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'analyze, costs off, summary off, timing off) select * from list_part where a = l' at line 2")

-----------
QUERY:


-- Ensure pruning does not take place when the function has a Var parameter
explain (analyze, costs off, summary off, timing off) select * from list_part where a = list_part_fn(a);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'analyze, costs off, summary off, timing off) select * from list_part where a = l' at line 2")

-----------
QUERY:


-- Ensure pruning does not take place when the expression contains a Var.
explain (analyze, costs off, summary off, timing off) select * from list_part where a = list_part_fn(1) + a;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'analyze, costs off, summary off, timing off) select * from list_part where a = l' at line 2")

-----------
QUERY:


rollback;
RESULT:
	[]

-----------
QUERY:


drop table list_part;
RESULT:
	ERROR - (1051, "Unknown table 'test.list_part'")

-----------
QUERY:


-- Parallel append

-- Parallel queries won/* REPLACED */''t necessarily get as many workers as the planner
-- asked for.  This affects not only the /* REPLACED */''Workers Launched:/* REPLACED */'' field of EXPLAIN
-- results, but also row counts and loop counts for parallel scans, Gathers,
-- and everything in between.  This function filters out the values we can/* REPLACED */''t
-- rely on to be stable.
-- This removes enough info that you might wonder why bother with EXPLAIN
-- ANALYZE at all.  The answer is that we need to see /* REPLACED */''(never executed)/* REPLACED */''
-- notations because that/* REPLACED */''s the only way to verify runtime pruning.
create function explain_parallel_append(text) returns setof text
language plpgsql as
$$
declare
    ln text;
begin
    for ln in
        execute format('explain (analyze, costs off, summary off, timing off) %s',
            $1)
    loop
        ln := regexp_replace(ln, 'Workers Launched: \d+', 'Workers Launched: N');
        ln := regexp_replace(ln, 'actual rows=\d+ loops=\d+', 'actual rows=N loops=N');
        ln := regexp_replace(ln, 'Rows Removed by Filter: \d+', 'Rows Removed by Filter: N');
        return next ln;
    end loop;
end;
$$;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ') returns setof text\nlanguage plpgsql as\n$$\ndeclare\n    ln text;\nbegin\n    for l' at line 11")

-----------
QUERY:


prepare ab_q4 (int, int) as
select avg(a) from ab where a between $1 and $2 and b < 4;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(int, int) as\nselect avg(a) from ab where a between $1 and $2 and b < 4' at line 1")

-----------
QUERY:


-- Encourage use of parallel plans
set parallel_setup_cost = 0;
RESULT:
	ERROR - (1193, "Unknown system variable 'parallel_setup_cost'")

-----------
QUERY:

set parallel_tuple_cost = 0;
RESULT:
	ERROR - (1193, "Unknown system variable 'parallel_tuple_cost'")

-----------
QUERY:

set min_parallel_table_scan_size = 0;
RESULT:
	ERROR - (1193, "Unknown system variable 'min_parallel_table_scan_size'")

-----------
QUERY:

set max_parallel_workers_per_gather = 2;
RESULT:
	ERROR - (1193, "Unknown system variable 'max_parallel_workers_per_gather'")

-----------
QUERY:


select explain_parallel_append('execute ab_q4 (2, 2)');
RESULT:
	ERROR - (1305, 'FUNCTION test.explain_parallel_append does not exist')

-----------
QUERY:


-- Test run-time pruning with IN lists.
prepare ab_q5 (int, int, int) as
select avg(a) from ab where a in($1,$2,$3) and b < 4;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(int, int, int) as\nselect avg(a) from ab where a in($1,$2,$3) and b < 4' at line 2")

-----------
QUERY:


select explain_parallel_append('execute ab_q5 (1, 1, 1)');
RESULT:
	ERROR - (1305, 'FUNCTION test.explain_parallel_append does not exist')

-----------
QUERY:

select explain_parallel_append('execute ab_q5 (2, 3, 3)');
RESULT:
	ERROR - (1305, 'FUNCTION test.explain_parallel_append does not exist')

-----------
QUERY:


-- Try some params whose values do not belong to any partition.
select explain_parallel_append('execute ab_q5 (33, 44, 55)');
RESULT:
	ERROR - (1305, 'FUNCTION test.explain_parallel_append does not exist')

-----------
QUERY:


-- Test Parallel Append with PARAM_EXEC Params
select explain_parallel_append('select count(*) from ab where (a = (select 1) or a = (select 3)) and b = 2');
RESULT:
	ERROR - (1305, 'FUNCTION test.explain_parallel_append does not exist')

-----------
QUERY:


-- Test pruning during parallel nested loop query
create table lprt_a (a int not null);
RESULT:
	[]

-----------
QUERY:

-- Insert some values we won/* REPLACED */''t find in ab
insert into lprt_a select 0 from generate_series(1,100);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(1,100)' at line 2")

-----------
QUERY:


-- and insert some values that we should find.
insert into lprt_a values(1),(1);
RESULT:
	[]

-----------
QUERY:


analyze lprt_a;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'lprt_a' at line 1")

-----------
QUERY:


create index ab_a2_b1_a_idx on ab_a2_b1 (a);
RESULT:
	ERROR - (1146, "Table 'test.ab_a2_b1' doesn't exist")

-----------
QUERY:

create index ab_a2_b2_a_idx on ab_a2_b2 (a);
RESULT:
	ERROR - (1146, "Table 'test.ab_a2_b2' doesn't exist")

-----------
QUERY:

create index ab_a2_b3_a_idx on ab_a2_b3 (a);
RESULT:
	ERROR - (1146, "Table 'test.ab_a2_b3' doesn't exist")

-----------
QUERY:

create index ab_a1_b1_a_idx on ab_a1_b1 (a);
RESULT:
	ERROR - (1146, "Table 'test.ab_a1_b1' doesn't exist")

-----------
QUERY:

create index ab_a1_b2_a_idx on ab_a1_b2 (a);
RESULT:
	ERROR - (1146, "Table 'test.ab_a1_b2' doesn't exist")

-----------
QUERY:

create index ab_a1_b3_a_idx on ab_a1_b3 (a);
RESULT:
	ERROR - (1146, "Table 'test.ab_a1_b3' doesn't exist")

-----------
QUERY:

create index ab_a3_b1_a_idx on ab_a3_b1 (a);
RESULT:
	ERROR - (1146, "Table 'test.ab_a3_b1' doesn't exist")

-----------
QUERY:

create index ab_a3_b2_a_idx on ab_a3_b2 (a);
RESULT:
	ERROR - (1146, "Table 'test.ab_a3_b2' doesn't exist")

-----------
QUERY:

create index ab_a3_b3_a_idx on ab_a3_b3 (a);
RESULT:
	ERROR - (1146, "Table 'test.ab_a3_b3' doesn't exist")

-----------
QUERY:


set enable_hashjoin = 0;
RESULT:
	ERROR - (1193, "Unknown system variable 'enable_hashjoin'")

-----------
QUERY:

set enable_mergejoin = 0;
RESULT:
	ERROR - (1193, "Unknown system variable 'enable_mergejoin'")

-----------
QUERY:

set enable_memoize = 0;
RESULT:
	ERROR - (1193, "Unknown system variable 'enable_memoize'")

-----------
QUERY:


-- Temporarily install some debugging to investigate plan instability.
select c.relname,c.relpages,c.reltuples,i.indisvalid,s.autovacuum_count,s.autoanalyze_count
from pg_class c
left join pg_stat_all_tables s on c.oid = s.relid
left join pg_index i on c.oid = i.indexrelid
where c.relname like 'ab\_%' order by c.relname;
RESULT:
	ERROR - (1146, "Table 'test.pg_class' doesn't exist")

-----------
QUERY:


select explain_parallel_append('select avg(ab.a) from ab inner join lprt_a a on ab.a = a.a where a.a in(0, 0, 1)');
RESULT:
	ERROR - (1305, 'FUNCTION test.explain_parallel_append does not exist')

-----------
QUERY:


-- Ensure the same partitions are pruned when we make the nested loop
-- parameter an Expr rather than a plain Param.
select explain_parallel_append('select avg(ab.a) from ab inner join lprt_a a on ab.a = a.a + 0 where a.a in(0, 0, 1)');
RESULT:
	ERROR - (1305, 'FUNCTION test.explain_parallel_append does not exist')

-----------
QUERY:


insert into lprt_a values(3),(3);
RESULT:
	[]

-----------
QUERY:


select explain_parallel_append('select avg(ab.a) from ab inner join lprt_a a on ab.a = a.a where a.a in(1, 0, 3)');
RESULT:
	ERROR - (1305, 'FUNCTION test.explain_parallel_append does not exist')

-----------
QUERY:

select explain_parallel_append('select avg(ab.a) from ab inner join lprt_a a on ab.a = a.a where a.a in(1, 0, 0)');
RESULT:
	ERROR - (1305, 'FUNCTION test.explain_parallel_append does not exist')

-----------
QUERY:


delete from lprt_a where a = 1;
RESULT:
	[]

-----------
QUERY:


select explain_parallel_append('select avg(ab.a) from ab inner join lprt_a a on ab.a = a.a where a.a in(1, 0, 0)');
RESULT:
	ERROR - (1305, 'FUNCTION test.explain_parallel_append does not exist')

-----------
QUERY:


reset enable_hashjoin;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'enable_hashjoin' at line 1")

-----------
QUERY:

reset enable_mergejoin;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'enable_mergejoin' at line 1")

-----------
QUERY:

reset enable_memoize;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'enable_memoize' at line 1")

-----------
QUERY:

reset parallel_setup_cost;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'parallel_setup_cost' at line 1")

-----------
QUERY:

reset parallel_tuple_cost;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'parallel_tuple_cost' at line 1")

-----------
QUERY:

reset min_parallel_table_scan_size;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'min_parallel_table_scan_size' at line 1")

-----------
QUERY:

reset max_parallel_workers_per_gather;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'max_parallel_workers_per_gather' at line 1")

-----------
QUERY:


-- Test run-time partition pruning with an initplan
explain (analyze, costs off, summary off, timing off)
select * from ab where a = (select max(a) from lprt_a) and b = (select max(a)-1 from lprt_a);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'analyze, costs off, summary off, timing off)\nselect * from ab where a = (select ' at line 2")

-----------
QUERY:


-- Test run-time partition pruning with UNION ALL parents
explain (analyze, costs off, summary off, timing off)
select * from (select * from ab where a = 1 union all select * from ab) ab where b = (select 1);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'analyze, costs off, summary off, timing off)\nselect * from (select * from ab whe' at line 2")

-----------
QUERY:


-- A case containing a UNION ALL with a non-partitioned child.
explain (analyze, costs off, summary off, timing off)
select * from (select * from ab where a = 1 union all (values(10,5)) union all select * from ab) ab where b = (select 1);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'analyze, costs off, summary off, timing off)\nselect * from (select * from ab whe' at line 2")

-----------
QUERY:


-- Another UNION ALL test, but containing a mix of exec init and exec run-time pruning.
create table xy_1 (x int, y int);
RESULT:
	[]

-----------
QUERY:

insert into xy_1 values(100,-10);
RESULT:
	[]

-----------
QUERY:


set enable_bitmapscan = 0;
RESULT:
	ERROR - (1193, "Unknown system variable 'enable_bitmapscan'")

-----------
QUERY:

set enable_indexscan = 0;
RESULT:
	ERROR - (1193, "Unknown system variable 'enable_indexscan'")

-----------
QUERY:


prepare ab_q6 as
select * from (
	select tableoid::regclass,a,b from ab
union all
	select tableoid::regclass,x,y from xy_1
union all
	select tableoid::regclass,a,b from ab
) ab where a = $1 and b = (select -10);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'as\nselect * from (\n\tselect tableoid::regclass,a,b from ab\nunion all\n\tselect tabl' at line 1")

-----------
QUERY:


-- Ensure the xy_1 subplan is not pruned.
explain (analyze, costs off, summary off, timing off) execute ab_q6(1);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'analyze, costs off, summary off, timing off) execute ab_q6(1)' at line 2")

-----------
QUERY:


-- Ensure we see just the xy_1 row.
execute ab_q6(100);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(100)' at line 2")

-----------
QUERY:


reset enable_bitmapscan;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'enable_bitmapscan' at line 1")

-----------
QUERY:

reset enable_indexscan;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'enable_indexscan' at line 1")

-----------
QUERY:


deallocate ab_q1;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'ab_q1' at line 1")

-----------
QUERY:

deallocate ab_q2;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'ab_q2' at line 1")

-----------
QUERY:

deallocate ab_q3;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'ab_q3' at line 1")

-----------
QUERY:

deallocate ab_q4;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'ab_q4' at line 1")

-----------
QUERY:

deallocate ab_q5;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'ab_q5' at line 1")

-----------
QUERY:

deallocate ab_q6;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'ab_q6' at line 1")

-----------
QUERY:


-- Temporarily install some debugging to investigate plan instability.
select c.relname,c.relpages,c.reltuples,i.indisvalid,s.autovacuum_count,s.autoanalyze_count
from pg_class c
left join pg_stat_all_tables s on c.oid = s.relid
left join pg_index i on c.oid = i.indexrelid
where c.relname like 'ab\_%' order by c.relname;
RESULT:
	ERROR - (1146, "Table 'test.pg_class' doesn't exist")

-----------
QUERY:


-- UPDATE on a partition subtree has been seen to have problems.
insert into ab values (1,2);
RESULT:
	ERROR - (1146, "Table 'test.ab' doesn't exist")

-----------
QUERY:

explain (analyze, costs off, summary off, timing off)
update ab_a1 set b = 3 from ab where ab.a = 1 and ab.a = ab_a1.a;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'analyze, costs off, summary off, timing off)\nupdate ab_a1 set b = 3 from ab wher' at line 1")

-----------
QUERY:

table ab;
RESULT:
	ERROR - (1146, "Table 'test.ab' doesn't exist")

-----------
QUERY:


-- Test UPDATE where source relation has run-time pruning enabled
truncate ab;
RESULT:
	ERROR - (1146, "Table 'test.ab' doesn't exist")

-----------
QUERY:

insert into ab values (1, 1), (1, 2), (1, 3), (2, 1);
RESULT:
	ERROR - (1146, "Table 'test.ab' doesn't exist")

-----------
QUERY:

explain (analyze, costs off, summary off, timing off)
update ab_a1 set b = 3 from ab_a2 where ab_a2.b = (select 1);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'analyze, costs off, summary off, timing off)\nupdate ab_a1 set b = 3 from ab_a2 w' at line 1")

-----------
QUERY:

select tableoid::regclass, * from ab;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::regclass, * from ab' at line 1")

-----------
QUERY:


drop table ab, lprt_a;
RESULT:
	ERROR - (1051, "Unknown table 'test.ab'")

-----------
QUERY:


-- Join
create table tbl1(col1 int);
RESULT:
	[]

-----------
QUERY:

insert into tbl1 values (501), (505);
RESULT:
	[]

-----------
QUERY:


-- Basic table
create table tprt (col1 int) partition by range (col1);
RESULT:
	ERROR - (1492, 'For RANGE partitions each partition must be defined')

-----------
QUERY:

create table tprt_1 partition of tprt for values from (1) to (501);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of tprt for values from (1) to (501)' at line 1")

-----------
QUERY:

create table tprt_2 partition of tprt for values from (501) to (1001);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of tprt for values from (501) to (1001)' at line 1")

-----------
QUERY:

create table tprt_3 partition of tprt for values from (1001) to (2001);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of tprt for values from (1001) to (2001)' at line 1")

-----------
QUERY:

create table tprt_4 partition of tprt for values from (2001) to (3001);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of tprt for values from (2001) to (3001)' at line 1")

-----------
QUERY:

create table tprt_5 partition of tprt for values from (3001) to (4001);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of tprt for values from (3001) to (4001)' at line 1")

-----------
QUERY:

create table tprt_6 partition of tprt for values from (4001) to (5001);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of tprt for values from (4001) to (5001)' at line 1")

-----------
QUERY:


create index tprt1_idx on tprt_1 (col1);
RESULT:
	ERROR - (1146, "Table 'test.tprt_1' doesn't exist")

-----------
QUERY:

create index tprt2_idx on tprt_2 (col1);
RESULT:
	ERROR - (1146, "Table 'test.tprt_2' doesn't exist")

-----------
QUERY:

create index tprt3_idx on tprt_3 (col1);
RESULT:
	ERROR - (1146, "Table 'test.tprt_3' doesn't exist")

-----------
QUERY:

create index tprt4_idx on tprt_4 (col1);
RESULT:
	ERROR - (1146, "Table 'test.tprt_4' doesn't exist")

-----------
QUERY:

create index tprt5_idx on tprt_5 (col1);
RESULT:
	ERROR - (1146, "Table 'test.tprt_5' doesn't exist")

-----------
QUERY:

create index tprt6_idx on tprt_6 (col1);
RESULT:
	ERROR - (1146, "Table 'test.tprt_6' doesn't exist")

-----------
QUERY:


insert into tprt values (10), (20), (501), (502), (505), (1001), (4500);
RESULT:
	ERROR - (1146, "Table 'test.tprt' doesn't exist")

-----------
QUERY:


set enable_hashjoin = off;
RESULT:
	ERROR - (1193, "Unknown system variable 'enable_hashjoin'")

-----------
QUERY:

set enable_mergejoin = off;
RESULT:
	ERROR - (1193, "Unknown system variable 'enable_mergejoin'")

-----------
QUERY:


explain (analyze, costs off, summary off, timing off)
select * from tbl1 join tprt on tbl1.col1 > tprt.col1;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'analyze, costs off, summary off, timing off)\nselect * from tbl1 join tprt on tbl' at line 1")

-----------
QUERY:


explain (analyze, costs off, summary off, timing off)
select * from tbl1 join tprt on tbl1.col1 = tprt.col1;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'analyze, costs off, summary off, timing off)\nselect * from tbl1 join tprt on tbl' at line 1")

-----------
QUERY:


select tbl1.col1, tprt.col1 from tbl1
inner join tprt on tbl1.col1 > tprt.col1
order by tbl1.col1, tprt.col1;
RESULT:
	ERROR - (1146, "Table 'test.tprt' doesn't exist")

-----------
QUERY:


select tbl1.col1, tprt.col1 from tbl1
inner join tprt on tbl1.col1 = tprt.col1
order by tbl1.col1, tprt.col1;
RESULT:
	ERROR - (1146, "Table 'test.tprt' doesn't exist")

-----------
QUERY:


-- Multiple partitions
insert into tbl1 values (1001), (1010), (1011);
RESULT:
	[]

-----------
QUERY:

explain (analyze, costs off, summary off, timing off)
select * from tbl1 inner join tprt on tbl1.col1 > tprt.col1;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'analyze, costs off, summary off, timing off)\nselect * from tbl1 inner join tprt ' at line 1")

-----------
QUERY:


explain (analyze, costs off, summary off, timing off)
select * from tbl1 inner join tprt on tbl1.col1 = tprt.col1;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'analyze, costs off, summary off, timing off)\nselect * from tbl1 inner join tprt ' at line 1")

-----------
QUERY:


select tbl1.col1, tprt.col1 from tbl1
inner join tprt on tbl1.col1 > tprt.col1
order by tbl1.col1, tprt.col1;
RESULT:
	ERROR - (1146, "Table 'test.tprt' doesn't exist")

-----------
QUERY:


select tbl1.col1, tprt.col1 from tbl1
inner join tprt on tbl1.col1 = tprt.col1
order by tbl1.col1, tprt.col1;
RESULT:
	ERROR - (1146, "Table 'test.tprt' doesn't exist")

-----------
QUERY:


-- Last partition
delete from tbl1;
RESULT:
	[]

-----------
QUERY:

insert into tbl1 values (4400);
RESULT:
	[]

-----------
QUERY:

explain (analyze, costs off, summary off, timing off)
select * from tbl1 join tprt on tbl1.col1 < tprt.col1;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'analyze, costs off, summary off, timing off)\nselect * from tbl1 join tprt on tbl' at line 1")

-----------
QUERY:


select tbl1.col1, tprt.col1 from tbl1
inner join tprt on tbl1.col1 < tprt.col1
order by tbl1.col1, tprt.col1;
RESULT:
	ERROR - (1146, "Table 'test.tprt' doesn't exist")

-----------
QUERY:


-- No matching partition
delete from tbl1;
RESULT:
	[]

-----------
QUERY:

insert into tbl1 values (10000);
RESULT:
	[]

-----------
QUERY:

explain (analyze, costs off, summary off, timing off)
select * from tbl1 join tprt on tbl1.col1 = tprt.col1;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'analyze, costs off, summary off, timing off)\nselect * from tbl1 join tprt on tbl' at line 1")

-----------
QUERY:


select tbl1.col1, tprt.col1 from tbl1
inner join tprt on tbl1.col1 = tprt.col1
order by tbl1.col1, tprt.col1;
RESULT:
	ERROR - (1146, "Table 'test.tprt' doesn't exist")

-----------
QUERY:


drop table tbl1, tprt;
RESULT:
	ERROR - (1051, "Unknown table 'test.tprt'")

-----------
QUERY:


-- Test with columns defined in varying orders between each level
create table part_abc (a int not null, b int not null, c int not null) partition by list (a);
RESULT:
	ERROR - (1492, 'For LIST partitions each partition must be defined')

-----------
QUERY:

create table part_bac (b int not null, a int not null, c int not null) partition by list (b);
RESULT:
	ERROR - (1492, 'For LIST partitions each partition must be defined')

-----------
QUERY:

create table part_cab (c int not null, a int not null, b int not null) partition by list (c);
RESULT:
	ERROR - (1492, 'For LIST partitions each partition must be defined')

-----------
QUERY:

create table part_abc_p1 (a int not null, b int not null, c int not null);
RESULT:
	[]

-----------
QUERY:


alter table part_abc attach partition part_bac for values in(1);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'attach partition part_bac for values in(1)' at line 1")

-----------
QUERY:

alter table part_bac attach partition part_cab for values in(2);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'attach partition part_cab for values in(2)' at line 1")

-----------
QUERY:

alter table part_cab attach partition part_abc_p1 for values in(3);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'attach partition part_abc_p1 for values in(3)' at line 1")

-----------
QUERY:


prepare part_abc_q1 (int, int, int) as
select * from part_abc where a = $1 and b = $2 and c = $3;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(int, int, int) as\nselect * from part_abc where a = $1 and b = $2 and c = $3' at line 1")

-----------
QUERY:


-- Single partition should be scanned.
explain (analyze, costs off, summary off, timing off) execute part_abc_q1 (1, 2, 3);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'analyze, costs off, summary off, timing off) execute part_abc_q1 (1, 2, 3)' at line 2")

-----------
QUERY:


deallocate part_abc_q1;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'part_abc_q1' at line 1")

-----------
QUERY:


drop table part_abc;
RESULT:
	ERROR - (1051, "Unknown table 'test.part_abc'")

-----------
QUERY:


-- Ensure that an Append node properly handles a sub-partitioned table
-- matching without any of its leaf partitions matching the clause.
create table listp (a int, b int) partition by list (a);
RESULT:
	ERROR - (1492, 'For LIST partitions each partition must be defined')

-----------
QUERY:

create table listp_1 partition of listp for values in(1) partition by list (b);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of listp for values in(1) partition by list (b)' at line 1")

-----------
QUERY:

create table listp_1_1 partition of listp_1 for values in(1);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of listp_1 for values in(1)' at line 1")

-----------
QUERY:

create table listp_2 partition of listp for values in(2) partition by list (b);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of listp for values in(2) partition by list (b)' at line 1")

-----------
QUERY:

create table listp_2_1 partition of listp_2 for values in(2);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of listp_2 for values in(2)' at line 1")

-----------
QUERY:

select * from listp where b = 1;
RESULT:
	ERROR - (1146, "Table 'test.listp' doesn't exist")

-----------
QUERY:


-- Ensure that an Append node properly can handle selection of all first level
-- partitions before finally detecting the correct set of 2nd level partitions
-- which match the given parameter.
prepare q1 (int,int) as select * from listp where b in ($1,$2);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(int,int) as select * from listp where b in ($1,$2)' at line 4")

-----------
QUERY:


explain (analyze, costs off, summary off, timing off)  execute q1 (1,1);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'analyze, costs off, summary off, timing off)  execute q1 (1,1)' at line 1")

-----------
QUERY:


explain (analyze, costs off, summary off, timing off)  execute q1 (2,2);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'analyze, costs off, summary off, timing off)  execute q1 (2,2)' at line 1")

-----------
QUERY:


-- Try with no matching partitions.
explain (analyze, costs off, summary off, timing off)  execute q1 (0,0);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'analyze, costs off, summary off, timing off)  execute q1 (0,0)' at line 2")

-----------
QUERY:


deallocate q1;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'q1' at line 1")

-----------
QUERY:


-- Test more complex cases where a not-equal condition further eliminates partitions.
prepare q1 (int,int,int,int) as select * from listp where b in($1,$2) and $3 <> b and $4 <> b;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(int,int,int,int) as select * from listp where b in($1,$2) and $3 <> b and $4 <>' at line 2")

-----------
QUERY:


-- Both partitions allowed by IN clause, but one disallowed by <> clause
explain (analyze, costs off, summary off, timing off)  execute q1 (1,2,2,0);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'analyze, costs off, summary off, timing off)  execute q1 (1,2,2,0)' at line 2")

-----------
QUERY:


-- Both partitions allowed by IN clause, then both excluded again by <> clauses.
explain (analyze, costs off, summary off, timing off)  execute q1 (1,2,2,1);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'analyze, costs off, summary off, timing off)  execute q1 (1,2,2,1)' at line 2")

-----------
QUERY:


-- Ensure Params that evaluate to NULL properly prune away all partitions
explain (analyze, costs off, summary off, timing off)
select * from listp where a = (select null::int);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'analyze, costs off, summary off, timing off)\nselect * from listp where a = (sele' at line 2")

-----------
QUERY:


drop table listp;
RESULT:
	ERROR - (1051, "Unknown table 'test.listp'")

-----------
QUERY:


--
-- check that stable query clauses are only used in run-time pruning
--
create table stable_qual_pruning (a timestamp) partition by range (a);
RESULT:
	ERROR - (1492, 'For RANGE partitions each partition must be defined')

-----------
QUERY:

create table stable_qual_pruning1 partition of stable_qual_pruning
  for values from ('2000-01-01') to ('2000-02-01');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of stable_qual_pruning\n  for values from ('2000-01-01') to ('2000-02-01')' at line 1")

-----------
QUERY:

create table stable_qual_pruning2 partition of stable_qual_pruning
  for values from ('2000-02-01') to ('2000-03-01');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of stable_qual_pruning\n  for values from ('2000-02-01') to ('2000-03-01')' at line 1")

-----------
QUERY:

create table stable_qual_pruning3 partition of stable_qual_pruning
  for values from ('3000-02-01') to ('3000-03-01');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of stable_qual_pruning\n  for values from ('3000-02-01') to ('3000-03-01')' at line 1")

-----------
QUERY:


-- comparison against a stable value requires run-time pruning
explain (analyze, costs off, summary off, timing off)
select * from stable_qual_pruning where a < localtimestamp;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'analyze, costs off, summary off, timing off)\nselect * from stable_qual_pruning w' at line 2")

-----------
QUERY:


-- timestamp < timestamptz comparison is only stable, not immutable
explain (analyze, costs off, summary off, timing off)
select * from stable_qual_pruning where a < '2000-02-01'::timestamptz;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'analyze, costs off, summary off, timing off)\nselect * from stable_qual_pruning w' at line 2")

-----------
QUERY:


-- check ScalarArrayOp cases
explain (analyze, costs off, summary off, timing off)
select * from stable_qual_pruning
  where a = any(array['2010-02-01', '2020-01-01']::timestamp[]);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'analyze, costs off, summary off, timing off)\nselect * from stable_qual_pruning\n ' at line 2")

-----------
QUERY:

explain (analyze, costs off, summary off, timing off)
select * from stable_qual_pruning
  where a = any(array['2000-02-01', '2010-01-01']::timestamp[]);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'analyze, costs off, summary off, timing off)\nselect * from stable_qual_pruning\n ' at line 1")

-----------
QUERY:

explain (analyze, costs off, summary off, timing off)
select * from stable_qual_pruning
  where a = any(array['2000-02-01', localtimestamp]::timestamp[]);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'analyze, costs off, summary off, timing off)\nselect * from stable_qual_pruning\n ' at line 1")

-----------
QUERY:

explain (analyze, costs off, summary off, timing off)
select * from stable_qual_pruning
  where a = any(array['2010-02-01', '2020-01-01']::timestamptz[]);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'analyze, costs off, summary off, timing off)\nselect * from stable_qual_pruning\n ' at line 1")

-----------
QUERY:

explain (analyze, costs off, summary off, timing off)
select * from stable_qual_pruning
  where a = any(array['2000-02-01', '2010-01-01']::timestamptz[]);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'analyze, costs off, summary off, timing off)\nselect * from stable_qual_pruning\n ' at line 1")

-----------
QUERY:

explain (analyze, costs off, summary off, timing off)
select * from stable_qual_pruning
  where a = any(null::timestamptz[]);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'analyze, costs off, summary off, timing off)\nselect * from stable_qual_pruning\n ' at line 1")

-----------
QUERY:


drop table stable_qual_pruning;
RESULT:
	ERROR - (1051, "Unknown table 'test.stable_qual_pruning'")

-----------
QUERY:


--
-- Check that pruning with composite range partitioning works correctly when
-- it must ignore clauses for trailing keys once it has seen a clause with
-- non-inclusive operator for an earlier key
--
create table mc3p (a int, b int, c int) partition by range (a, abs(b), c);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ', abs(b), c)' at line 6")

-----------
QUERY:

create table mc3p0 partition of mc3p
  for values from (0, 0, 0) to (0, maxvalue, maxvalue);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of mc3p\n  for values from (0, 0, 0) to (0, maxvalue, maxvalue)' at line 1")

-----------
QUERY:

create table mc3p1 partition of mc3p
  for values from (1, 1, 1) to (2, minvalue, minvalue);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of mc3p\n  for values from (1, 1, 1) to (2, minvalue, minvalue)' at line 1")

-----------
QUERY:

create table mc3p2 partition of mc3p
  for values from (2, minvalue, minvalue) to (3, maxvalue, maxvalue);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of mc3p\n  for values from (2, minvalue, minvalue) to (3, maxvalue, maxvalue)' at line 1")

-----------
QUERY:

insert into mc3p values (0, 1, 1), (1, 1, 1), (2, 1, 1);
RESULT:
	ERROR - (1146, "Table 'test.mc3p' doesn't exist")

-----------
QUERY:


explain (analyze, costs off, summary off, timing off)
select * from mc3p where a < 3 and abs(b) = 1;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'analyze, costs off, summary off, timing off)\nselect * from mc3p where a < 3 and ' at line 1")

-----------
QUERY:


--
-- Check that pruning with composite range partitioning works correctly when
-- a combination of runtime parameters is specified, not all of whose values
-- are available at the same time
--
prepare ps1 as
  select * from mc3p where a = $1 and abs(b) < (select 3);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'as\n  select * from mc3p where a = $1 and abs(b) < (select 3)' at line 6")

-----------
QUERY:

explain (analyze, costs off, summary off, timing off)
execute ps1(1);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'analyze, costs off, summary off, timing off)\nexecute ps1(1)' at line 1")

-----------
QUERY:

deallocate ps1;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'ps1' at line 1")

-----------
QUERY:

prepare ps2 as
  select * from mc3p where a <= $1 and abs(b) < (select 3);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'as\n  select * from mc3p where a <= $1 and abs(b) < (select 3)' at line 1")

-----------
QUERY:

explain (analyze, costs off, summary off, timing off)
execute ps2(1);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'analyze, costs off, summary off, timing off)\nexecute ps2(1)' at line 1")

-----------
QUERY:

deallocate ps2;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'ps2' at line 1")

-----------
QUERY:


drop table mc3p;
RESULT:
	ERROR - (1051, "Unknown table 'test.mc3p'")

-----------
QUERY:


-- Ensure runtime pruning works with initplans params with boolean types
create table boolvalues (value bool not null);
RESULT:
	[]

-----------
QUERY:

insert into boolvalues values('t'),('f');
RESULT:
	ERROR - (1366, "Incorrect integer value: 't' for column 'value' at row 1")

-----------
QUERY:


create table boolp (a bool) partition by list (a);
RESULT:
	ERROR - (1492, 'For LIST partitions each partition must be defined')

-----------
QUERY:

create table boolp_t partition of boolp for values in('t');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of boolp for values in('t')' at line 1")

-----------
QUERY:

create table boolp_f partition of boolp for values in('f');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of boolp for values in('f')' at line 1")

-----------
QUERY:


explain (analyze, costs off, summary off, timing off)
select * from boolp where a = (select value from boolvalues where value);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'analyze, costs off, summary off, timing off)\nselect * from boolp where a = (sele' at line 1")

-----------
QUERY:


explain (analyze, costs off, summary off, timing off)
select * from boolp where a = (select value from boolvalues where not value);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'analyze, costs off, summary off, timing off)\nselect * from boolp where a = (sele' at line 1")

-----------
QUERY:


drop table boolp;
RESULT:
	ERROR - (1051, "Unknown table 'test.boolp'")

-----------
QUERY:


--
-- Test run-time pruning of MergeAppend subnodes
--
set enable_seqscan = off;
RESULT:
	ERROR - (1193, "Unknown system variable 'enable_seqscan'")

-----------
QUERY:

set enable_sort = off;
RESULT:
	ERROR - (1193, "Unknown system variable 'enable_sort'")

-----------
QUERY:

create table ma_test (a int, b int) partition by range (a);
RESULT:
	ERROR - (1492, 'For RANGE partitions each partition must be defined')

-----------
QUERY:

create table ma_test_p1 partition of ma_test for values from (0) to (10);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of ma_test for values from (0) to (10)' at line 1")

-----------
QUERY:

create table ma_test_p2 partition of ma_test for values from (10) to (20);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of ma_test for values from (10) to (20)' at line 1")

-----------
QUERY:

create table ma_test_p3 partition of ma_test for values from (20) to (30);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of ma_test for values from (20) to (30)' at line 1")

-----------
QUERY:

insert into ma_test select x,x from generate_series(0,29) t(x);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(0,29) t(x)' at line 1")

-----------
QUERY:

create index on ma_test (b);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'on ma_test (b)' at line 1")

-----------
QUERY:


analyze ma_test;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'ma_test' at line 1")

-----------
QUERY:

prepare mt_q1 (int) as select a from ma_test where a >= $1 and a % 10 = 5 order by b;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(int) as select a from ma_test where a >= $1 and a % 10 = 5 order by b' at line 1")

-----------
QUERY:


explain (analyze, costs off, summary off, timing off) execute mt_q1(15);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'analyze, costs off, summary off, timing off) execute mt_q1(15)' at line 1")

-----------
QUERY:

execute mt_q1(15);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(15)' at line 1")

-----------
QUERY:

explain (analyze, costs off, summary off, timing off) execute mt_q1(25);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'analyze, costs off, summary off, timing off) execute mt_q1(25)' at line 1")

-----------
QUERY:

execute mt_q1(25);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(25)' at line 1")

-----------
QUERY:

-- Ensure MergeAppend behaves correctly when no subplans match
explain (analyze, costs off, summary off, timing off) execute mt_q1(35);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'analyze, costs off, summary off, timing off) execute mt_q1(35)' at line 2")

-----------
QUERY:

execute mt_q1(35);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(35)' at line 1")

-----------
QUERY:


deallocate mt_q1;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'mt_q1' at line 1")

-----------
QUERY:


prepare mt_q2 (int) as select * from ma_test where a >= $1 order by b limit 1;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(int) as select * from ma_test where a >= $1 order by b limit 1' at line 1")

-----------
QUERY:


-- Ensure output list looks sane when the MergeAppend has no subplans.
explain (analyze, verbose, costs off, summary off, timing off) execute mt_q2 (35);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'analyze, verbose, costs off, summary off, timing off) execute mt_q2 (35)' at line 2")

-----------
QUERY:


deallocate mt_q2;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'mt_q2' at line 1")

-----------
QUERY:


-- ensure initplan params properly prune partitions
explain (analyze, costs off, summary off, timing off) select * from ma_test where a >= (select min(b) from ma_test_p2) order by b;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'analyze, costs off, summary off, timing off) select * from ma_test where a >= (s' at line 2")

-----------
QUERY:


reset enable_seqscan;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'enable_seqscan' at line 1")

-----------
QUERY:

reset enable_sort;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'enable_sort' at line 1")

-----------
QUERY:


drop table ma_test;
RESULT:
	ERROR - (1051, "Unknown table 'test.ma_test'")

-----------
QUERY:


reset enable_indexonlyscan;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'enable_indexonlyscan' at line 1")

-----------
QUERY:


--
-- check that pruning works properly when the partition key is of a
-- pseudotype
--

-- array type list partition key
create table pp_arrpart (a int[]) partition by list (a);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[]) partition by list (a)' at line 7")

-----------
QUERY:

create table pp_arrpart1 partition of pp_arrpart for values in ('{1}');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of pp_arrpart for values in ('{1}')' at line 1")

-----------
QUERY:

create table pp_arrpart2 partition of pp_arrpart for values in ('{2, 3}', '{4, 5}');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of pp_arrpart for values in ('{2, 3}', '{4, 5}')' at line 1")

-----------
QUERY:

explain (costs off) select * from pp_arrpart where a = '{1}';
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from pp_arrpart where a = '{1}'' at line 1")

-----------
QUERY:

explain (costs off) select * from pp_arrpart where a = '{1, 2}';
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from pp_arrpart where a = '{1, 2}'' at line 1")

-----------
QUERY:

explain (costs off) select * from pp_arrpart where a in ('{4, 5}', '{1}');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from pp_arrpart where a in ('{4, 5}', '{1}')' at line 1")

-----------
QUERY:

explain (costs off) update pp_arrpart set a = a where a = '{1}';
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) update pp_arrpart set a = a where a = '{1}'' at line 1")

-----------
QUERY:

explain (costs off) delete from pp_arrpart where a = '{1}';
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) delete from pp_arrpart where a = '{1}'' at line 1")

-----------
QUERY:

drop table pp_arrpart;
RESULT:
	ERROR - (1051, "Unknown table 'test.pp_arrpart'")

-----------
QUERY:


-- array type hash partition key
create table pph_arrpart (a int[]) partition by hash (a);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[]) partition by hash (a)' at line 2")

-----------
QUERY:

create table pph_arrpart1 partition of pph_arrpart for values with (modulus 2, remainder 0);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of pph_arrpart for values with (modulus 2, remainder 0)' at line 1")

-----------
QUERY:

create table pph_arrpart2 partition of pph_arrpart for values with (modulus 2, remainder 1);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of pph_arrpart for values with (modulus 2, remainder 1)' at line 1")

-----------
QUERY:

insert into pph_arrpart values ('{1}'), ('{1, 2}'), ('{4, 5}');
RESULT:
	ERROR - (1146, "Table 'test.pph_arrpart' doesn't exist")

-----------
QUERY:

select tableoid::regclass, * from pph_arrpart order by 1;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::regclass, * from pph_arrpart order by 1' at line 1")

-----------
QUERY:

explain (costs off) select * from pph_arrpart where a = '{1}';
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from pph_arrpart where a = '{1}'' at line 1")

-----------
QUERY:

explain (costs off) select * from pph_arrpart where a = '{1, 2}';
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from pph_arrpart where a = '{1, 2}'' at line 1")

-----------
QUERY:

explain (costs off) select * from pph_arrpart where a in ('{4, 5}', '{1}');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from pph_arrpart where a in ('{4, 5}', '{1}')' at line 1")

-----------
QUERY:

drop table pph_arrpart;
RESULT:
	ERROR - (1051, "Unknown table 'test.pph_arrpart'")

-----------
QUERY:


-- enum type list partition key
create type pp_colors as enum ('green', 'blue', 'black');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'type pp_colors as enum ('green', 'blue', 'black')' at line 2")

-----------
QUERY:

create table pp_enumpart (a pp_colors) partition by list (a);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'pp_colors) partition by list (a)' at line 1")

-----------
QUERY:

create table pp_enumpart_green partition of pp_enumpart for values in ('green');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of pp_enumpart for values in ('green')' at line 1")

-----------
QUERY:

create table pp_enumpart_blue partition of pp_enumpart for values in ('blue');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of pp_enumpart for values in ('blue')' at line 1")

-----------
QUERY:

explain (costs off) select * from pp_enumpart where a = 'blue';
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from pp_enumpart where a = 'blue'' at line 1")

-----------
QUERY:

explain (costs off) select * from pp_enumpart where a = 'black';
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from pp_enumpart where a = 'black'' at line 1")

-----------
QUERY:

drop table pp_enumpart;
RESULT:
	ERROR - (1051, "Unknown table 'test.pp_enumpart'")

-----------
QUERY:

drop type pp_colors;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'type pp_colors' at line 1")

-----------
QUERY:


-- record type as partition key
create type pp_rectype as (a int, b int);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'type pp_rectype as (a int, b int)' at line 2")

-----------
QUERY:

create table pp_recpart (a pp_rectype) partition by list (a);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'pp_rectype) partition by list (a)' at line 1")

-----------
QUERY:

create table pp_recpart_11 partition of pp_recpart for values in ('(1,1)');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of pp_recpart for values in ('(1,1)')' at line 1")

-----------
QUERY:

create table pp_recpart_23 partition of pp_recpart for values in ('(2,3)');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of pp_recpart for values in ('(2,3)')' at line 1")

-----------
QUERY:

explain (costs off) select * from pp_recpart where a = '(1,1)'::pp_rectype;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from pp_recpart where a = '(1,1)'::pp_rectype' at line 1")

-----------
QUERY:

explain (costs off) select * from pp_recpart where a = '(1,2)'::pp_rectype;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from pp_recpart where a = '(1,2)'::pp_rectype' at line 1")

-----------
QUERY:

drop table pp_recpart;
RESULT:
	ERROR - (1051, "Unknown table 'test.pp_recpart'")

-----------
QUERY:

drop type pp_rectype;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'type pp_rectype' at line 1")

-----------
QUERY:


-- range type partition key
create table pp_intrangepart (a int4range) partition by list (a);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'int4range) partition by list (a)' at line 2")

-----------
QUERY:

create table pp_intrangepart12 partition of pp_intrangepart for values in ('[1,2]');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of pp_intrangepart for values in ('[1,2]')' at line 1")

-----------
QUERY:

create table pp_intrangepart2inf partition of pp_intrangepart for values in ('[2,)');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of pp_intrangepart for values in ('[2,)')' at line 1")

-----------
QUERY:

explain (costs off) select * from pp_intrangepart where a = '[1,2]'::int4range;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from pp_intrangepart where a = '[1,2]'::int4range' at line 1")

-----------
QUERY:

explain (costs off) select * from pp_intrangepart where a = '(1,2)'::int4range;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from pp_intrangepart where a = '(1,2)'::int4range' at line 1")

-----------
QUERY:

drop table pp_intrangepart;
RESULT:
	ERROR - (1051, "Unknown table 'test.pp_intrangepart'")

-----------
QUERY:


--
-- Ensure the enable_partition_prune GUC properly disables partition pruning.
--

create table pp_lp (a int, value int) partition by list (a);
RESULT:
	ERROR - (1492, 'For LIST partitions each partition must be defined')

-----------
QUERY:

create table pp_lp1 partition of pp_lp for values in(1);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of pp_lp for values in(1)' at line 1")

-----------
QUERY:

create table pp_lp2 partition of pp_lp for values in(2);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of pp_lp for values in(2)' at line 1")

-----------
QUERY:


explain (costs off) select * from pp_lp where a = 1;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from pp_lp where a = 1' at line 1")

-----------
QUERY:

explain (costs off) update pp_lp set value = 10 where a = 1;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) update pp_lp set value = 10 where a = 1' at line 1")

-----------
QUERY:

explain (costs off) delete from pp_lp where a = 1;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) delete from pp_lp where a = 1' at line 1")

-----------
QUERY:


set enable_partition_pruning = off;
RESULT:
	ERROR - (1193, "Unknown system variable 'enable_partition_pruning'")

-----------
QUERY:


set constraint_exclusion = 'partition';
RESULT:
	ERROR - (1193, "Unknown system variable 'constraint_exclusion'")

-----------
QUERY:
 -- this should not affect the result.

explain (costs off) select * from pp_lp where a = 1;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from pp_lp where a = 1' at line 3")

-----------
QUERY:

explain (costs off) update pp_lp set value = 10 where a = 1;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) update pp_lp set value = 10 where a = 1' at line 1")

-----------
QUERY:

explain (costs off) delete from pp_lp where a = 1;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) delete from pp_lp where a = 1' at line 1")

-----------
QUERY:


set constraint_exclusion = 'off';
RESULT:
	ERROR - (1193, "Unknown system variable 'constraint_exclusion'")

-----------
QUERY:
 -- this should not affect the result.

explain (costs off) select * from pp_lp where a = 1;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from pp_lp where a = 1' at line 3")

-----------
QUERY:

explain (costs off) update pp_lp set value = 10 where a = 1;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) update pp_lp set value = 10 where a = 1' at line 1")

-----------
QUERY:

explain (costs off) delete from pp_lp where a = 1;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) delete from pp_lp where a = 1' at line 1")

-----------
QUERY:


drop table pp_lp;
RESULT:
	ERROR - (1051, "Unknown table 'test.pp_lp'")

-----------
QUERY:


-- Ensure enable_partition_prune does not affect non-partitioned tables.

create table inh_lp (a int, value int);
RESULT:
	[]

-----------
QUERY:

create table inh_lp1 (a int, value int, check(a = 1)) inherits (inh_lp);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'inherits (inh_lp)' at line 1")

-----------
QUERY:

create table inh_lp2 (a int, value int, check(a = 2)) inherits (inh_lp);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'inherits (inh_lp)' at line 1")

-----------
QUERY:


set constraint_exclusion = 'partition';
RESULT:
	ERROR - (1193, "Unknown system variable 'constraint_exclusion'")

-----------
QUERY:


-- inh_lp2 should be removed in the following 3 cases.
explain (costs off) select * from inh_lp where a = 1;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from inh_lp where a = 1' at line 2")

-----------
QUERY:

explain (costs off) update inh_lp set value = 10 where a = 1;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) update inh_lp set value = 10 where a = 1' at line 1")

-----------
QUERY:

explain (costs off) delete from inh_lp where a = 1;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) delete from inh_lp where a = 1' at line 1")

-----------
QUERY:


-- Ensure we don/* REPLACED */''t exclude normal relations when we only expect to exclude
-- inheritance children
explain (costs off) update inh_lp1 set value = 10 where a = 2;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) update inh_lp1 set value = 10 where a = 2' at line 3")

-----------
QUERY:


drop table inh_lp cascade;
RESULT:
	[]

-----------
QUERY:


reset enable_partition_pruning;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'enable_partition_pruning' at line 1")

-----------
QUERY:

reset constraint_exclusion;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'constraint_exclusion' at line 1")

-----------
QUERY:


-- Check pruning for a partition tree containing only temporary relations
create temp table pp_temp_parent (a int) partition by list (a);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'temp table pp_temp_parent (a int) partition by list (a)' at line 2")

-----------
QUERY:

create temp table pp_temp_part_1 partition of pp_temp_parent for values in (1);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'temp table pp_temp_part_1 partition of pp_temp_parent for values in (1)' at line 1")

-----------
QUERY:

create temp table pp_temp_part_def partition of pp_temp_parent default;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'temp table pp_temp_part_def partition of pp_temp_parent default' at line 1")

-----------
QUERY:

explain (costs off) select * from pp_temp_parent where true;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from pp_temp_parent where true' at line 1")

-----------
QUERY:

explain (costs off) select * from pp_temp_parent where a = 2;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from pp_temp_parent where a = 2' at line 1")

-----------
QUERY:

drop table pp_temp_parent;
RESULT:
	ERROR - (1051, "Unknown table 'test.pp_temp_parent'")

-----------
QUERY:


-- Stress run-time partition pruning a bit more, per bug reports
create temp table p (a int, b int, c int) partition by list (a);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'temp table p (a int, b int, c int) partition by list (a)' at line 2")

-----------
QUERY:

create temp table p1 partition of p for values in (1);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'temp table p1 partition of p for values in (1)' at line 1")

-----------
QUERY:

create temp table p2 partition of p for values in (2);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'temp table p2 partition of p for values in (2)' at line 1")

-----------
QUERY:

create temp table q (a int, b int, c int) partition by list (a);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'temp table q (a int, b int, c int) partition by list (a)' at line 1")

-----------
QUERY:

create temp table q1 partition of q for values in (1) partition by list (b);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'temp table q1 partition of q for values in (1) partition by list (b)' at line 1")

-----------
QUERY:

create temp table q11 partition of q1 for values in (1) partition by list (c);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'temp table q11 partition of q1 for values in (1) partition by list (c)' at line 1")

-----------
QUERY:

create temp table q111 partition of q11 for values in (1);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'temp table q111 partition of q11 for values in (1)' at line 1")

-----------
QUERY:

create temp table q2 partition of q for values in (2) partition by list (b);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'temp table q2 partition of q for values in (2) partition by list (b)' at line 1")

-----------
QUERY:

create temp table q21 partition of q2 for values in (1);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'temp table q21 partition of q2 for values in (1)' at line 1")

-----------
QUERY:

create temp table q22 partition of q2 for values in (2);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'temp table q22 partition of q2 for values in (2)' at line 1")

-----------
QUERY:


insert into q22 values (2, 2, 3);
RESULT:
	ERROR - (1146, "Table 'test.q22' doesn't exist")

-----------
QUERY:


explain (costs off)
select *
from (
      select * from p
      union all
      select * from q1
      union all
      select 1, 1, 1
     ) s(a, b, c)
where s.a = 1 and s.b = 1 and s.c = (select 1);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off)\nselect *\nfrom (\n      select * from p\n      union all\n      select * ' at line 1")

-----------
QUERY:


select *
from (
      select * from p
      union all
      select * from q1
      union all
      select 1, 1, 1
     ) s(a, b, c)
where s.a = 1 and s.b = 1 and s.c = (select 1);
RESULT:
	ERROR - (1146, "Table 'test.p' doesn't exist")

-----------
QUERY:


prepare q (int, int) as
select *
from (
      select * from p
      union all
      select * from q1
      union all
      select 1, 1, 1
     ) s(a, b, c)
where s.a = $1 and s.b = $2 and s.c = (select 1);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(int, int) as\nselect *\nfrom (\n      select * from p\n      union all\n      select' at line 1")

-----------
QUERY:


explain (costs off) execute q (1, 1);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) execute q (1, 1)' at line 1")

-----------
QUERY:

execute q (1, 1);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(1, 1)' at line 1")

-----------
QUERY:


drop table p, q;
RESULT:
	ERROR - (1051, "Unknown table 'test.p,test.q'")

-----------
QUERY:


-- Ensure run-time pruning works correctly when we match a partitioned table
-- on the first level but find no matching partitions on the second level.
create table listp (a int, b int) partition by list (a);
RESULT:
	ERROR - (1492, 'For LIST partitions each partition must be defined')

-----------
QUERY:

create table listp1 partition of listp for values in(1);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of listp for values in(1)' at line 1")

-----------
QUERY:

create table listp2 partition of listp for values in(2) partition by list(b);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of listp for values in(2) partition by list(b)' at line 1")

-----------
QUERY:

create table listp2_10 partition of listp2 for values in (10);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of listp2 for values in (10)' at line 1")

-----------
QUERY:


explain (analyze, costs off, summary off, timing off)
select * from listp where a = (select 2) and b <> 10;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'analyze, costs off, summary off, timing off)\nselect * from listp where a = (sele' at line 1")

-----------
QUERY:


--
-- check that a partition directly accessed in a query is excluded with
-- constraint_exclusion = on
--

-- turn off partition pruning, so that it doesn/* REPLACED */''t interfere
set enable_partition_pruning to off;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'to off' at line 7")

-----------
QUERY:


-- setting constraint_exclusion to /* REPLACED */''partition/* REPLACED */'' disables exclusion
set constraint_exclusion to 'partition';
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'to 'partition'' at line 2")

-----------
QUERY:

explain (costs off) select * from listp1 where a = 2;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from listp1 where a = 2' at line 1")

-----------
QUERY:

explain (costs off) update listp1 set a = 1 where a = 2;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) update listp1 set a = 1 where a = 2' at line 1")

-----------
QUERY:

-- constraint exclusion enabled
set constraint_exclusion to 'on';
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'to 'on'' at line 2")

-----------
QUERY:

explain (costs off) select * from listp1 where a = 2;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from listp1 where a = 2' at line 1")

-----------
QUERY:

explain (costs off) update listp1 set a = 1 where a = 2;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) update listp1 set a = 1 where a = 2' at line 1")

-----------
QUERY:


reset constraint_exclusion;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'constraint_exclusion' at line 1")

-----------
QUERY:

reset enable_partition_pruning;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'enable_partition_pruning' at line 1")

-----------
QUERY:


drop table listp;
RESULT:
	ERROR - (1051, "Unknown table 'test.listp'")

-----------
QUERY:


-- Ensure run-time pruning works correctly for nested Append nodes
set parallel_setup_cost to 0;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'to 0' at line 2")

-----------
QUERY:

set parallel_tuple_cost to 0;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'to 0' at line 1")

-----------
QUERY:


create table listp (a int) partition by list(a);
RESULT:
	ERROR - (1492, 'For LIST partitions each partition must be defined')

-----------
QUERY:

create table listp_12 partition of listp for values in(1,2) partition by list(a);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of listp for values in(1,2) partition by list(a)' at line 1")

-----------
QUERY:

create table listp_12_1 partition of listp_12 for values in(1);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of listp_12 for values in(1)' at line 1")

-----------
QUERY:

create table listp_12_2 partition of listp_12 for values in(2);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of listp_12 for values in(2)' at line 1")

-----------
QUERY:


-- Force the 2nd subnode of the Append to be non-parallel.  This results in
-- a nested Append node because the mixed parallel / non-parallel paths cannot
-- be pulled into the top-level Append.
alter table listp_12_1 set (parallel_workers = 0);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'set (parallel_workers = 0)' at line 4")

-----------
QUERY:


-- Ensure that listp_12_2 is not scanned.  (The nested Append is not seen in
-- the plan as it/* REPLACED */''s pulled in setref.c due to having just a single subnode).
select explain_parallel_append('select * from listp where a = (select 1);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ''select * from listp where a = (select 1)' at line 3")

-----------
QUERY:
');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '')' at line 1")

-----------
QUERY:


-- Like the above but throw some more complexity at the planner by adding
-- a UNION ALL.  We expect both sides of the union not to scan the
-- non-required partitions.
select explain_parallel_append(
'select * from listp where a = (select 1)
  union all
select * from listp where a = (select 2);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ''select * from listp where a = (select 1)\n  union all\nselect * from listp where ' at line 5")

-----------
QUERY:
');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '')' at line 1")

-----------
QUERY:


drop table listp;
RESULT:
	ERROR - (1051, "Unknown table 'test.listp'")

-----------
QUERY:

reset parallel_tuple_cost;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'parallel_tuple_cost' at line 1")

-----------
QUERY:

reset parallel_setup_cost;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'parallel_setup_cost' at line 1")

-----------
QUERY:


-- Test case for run-time pruning with a nested Merge Append
set enable_sort to 0;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'to 0' at line 2")

-----------
QUERY:

create table rangep (a int, b int) partition by range (a);
RESULT:
	ERROR - (1492, 'For RANGE partitions each partition must be defined')

-----------
QUERY:

create table rangep_0_to_100 partition of rangep for values from (0) to (100) partition by list (b);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of rangep for values from (0) to (100) partition by list (b)' at line 1")

-----------
QUERY:

-- We need 3 sub-partitions. 1 to validate pruning worked and another two
-- because a single remaining partition would be pulled up to the main Append.
create table rangep_0_to_100_1 partition of rangep_0_to_100 for values in(1);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of rangep_0_to_100 for values in(1)' at line 3")

-----------
QUERY:

create table rangep_0_to_100_2 partition of rangep_0_to_100 for values in(2);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of rangep_0_to_100 for values in(2)' at line 1")

-----------
QUERY:

create table rangep_0_to_100_3 partition of rangep_0_to_100 for values in(3);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of rangep_0_to_100 for values in(3)' at line 1")

-----------
QUERY:

create table rangep_100_to_200 partition of rangep for values from (100) to (200);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of rangep for values from (100) to (200)' at line 1")

-----------
QUERY:

create index on rangep (a);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'on rangep (a)' at line 1")

-----------
QUERY:


-- Ensure run-time pruning works on the nested Merge Append
explain (analyze on, costs off, timing off, summary off)
select * from rangep where b IN((select 1),(select 2)) order by a;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'analyze on, costs off, timing off, summary off)\nselect * from rangep where b IN(' at line 2")

-----------
QUERY:

reset enable_sort;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'enable_sort' at line 1")

-----------
QUERY:

drop table rangep;
RESULT:
	ERROR - (1051, "Unknown table 'test.rangep'")

-----------
QUERY:


--
-- Check that gen_prune_steps_from_opexps() works well for various cases of
-- clauses for different partition keys
--

create table rp_prefix_test1 (a int, b varchar) partition by range(a, b);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ') partition by range(a, b)' at line 6")

-----------
QUERY:

create table rp_prefix_test1_p1 partition of rp_prefix_test1 for values from (1, 'a') to (1, 'b');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of rp_prefix_test1 for values from (1, 'a') to (1, 'b')' at line 1")

-----------
QUERY:

create table rp_prefix_test1_p2 partition of rp_prefix_test1 for values from (2, 'a') to (2, 'b');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of rp_prefix_test1 for values from (2, 'a') to (2, 'b')' at line 1")

-----------
QUERY:


-- Don/* REPLACED */''t call get_steps_using_prefix() with the last partition key b plus
-- an empty prefix
explain (costs off) select * from rp_prefix_test1 where a <= 1 and b = 'a';
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from rp_prefix_test1 where a <= 1 and b = 'a'' at line 3")

-----------
QUERY:


create table rp_prefix_test2 (a int, b int, c int) partition by range(a, b, c);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ', b, c)' at line 1")

-----------
QUERY:

create table rp_prefix_test2_p1 partition of rp_prefix_test2 for values from (1, 1, 0) to (1, 1, 10);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of rp_prefix_test2 for values from (1, 1, 0) to (1, 1, 10)' at line 1")

-----------
QUERY:

create table rp_prefix_test2_p2 partition of rp_prefix_test2 for values from (2, 2, 0) to (2, 2, 10);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of rp_prefix_test2 for values from (2, 2, 0) to (2, 2, 10)' at line 1")

-----------
QUERY:


-- Don/* REPLACED */''t call get_steps_using_prefix() with the last partition key c plus
-- an invalid prefix (ie, b = 1)
explain (costs off) select * from rp_prefix_test2 where a <= 1 and b = 1 and c >= 0;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from rp_prefix_test2 where a <= 1 and b = 1 and c >= 0' at line 3")

-----------
QUERY:


create table rp_prefix_test3 (a int, b int, c int, d int) partition by range(a, b, c, d);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ', b, c, d)' at line 1")

-----------
QUERY:

create table rp_prefix_test3_p1 partition of rp_prefix_test3 for values from (1, 1, 1, 0) to (1, 1, 1, 10);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of rp_prefix_test3 for values from (1, 1, 1, 0) to (1, 1, 1, 10)' at line 1")

-----------
QUERY:

create table rp_prefix_test3_p2 partition of rp_prefix_test3 for values from (2, 2, 2, 0) to (2, 2, 2, 10);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of rp_prefix_test3 for values from (2, 2, 2, 0) to (2, 2, 2, 10)' at line 1")

-----------
QUERY:


-- Test that get_steps_using_prefix() handles a prefix that contains multiple
-- clauses for the partition key b (ie, b >= 1 and b >= 2)
explain (costs off) select * from rp_prefix_test3 where a >= 1 and b >= 1 and b >= 2 and c >= 2 and d >= 0;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from rp_prefix_test3 where a >= 1 and b >= 1 and b >= 2 and ' at line 3")

-----------
QUERY:


-- Test that get_steps_using_prefix() handles a prefix that contains multiple
-- clauses for the partition key b (ie, b >= 1 and b = 2)  (This also tests
-- that the caller arranges clauses in that prefix in the required order)
explain (costs off) select * from rp_prefix_test3 where a >= 1 and b >= 1 and b = 2 and c = 2 and d >= 0;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from rp_prefix_test3 where a >= 1 and b >= 1 and b = 2 and c' at line 4")

-----------
QUERY:


drop table rp_prefix_test1;
RESULT:
	ERROR - (1051, "Unknown table 'test.rp_prefix_test1'")

-----------
QUERY:

drop table rp_prefix_test2;
RESULT:
	ERROR - (1051, "Unknown table 'test.rp_prefix_test2'")

-----------
QUERY:

drop table rp_prefix_test3;
RESULT:
	ERROR - (1051, "Unknown table 'test.rp_prefix_test3'")

-----------
QUERY:


--
-- Test that get_steps_using_prefix() handles IS NULL clauses correctly
--
create table hp_prefix_test (a int, b int, c int, d int)
  partition by hash (a part_test_int4_ops, b part_test_int4_ops, c part_test_int4_ops, d part_test_int4_ops);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'part_test_int4_ops, b part_test_int4_ops, c part_test_int4_ops, d part_test_int4' at line 5")

-----------
QUERY:


-- create 8 partitions
select 'create table hp_prefix_test_p' || x::text || ' partition of hp_prefix_test for values with (modulus 8, remainder ' || x::text || ');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::text || ' partition of hp_prefix_test for values with (modulus 8, remainder ' ' at line 2")

-----------
QUERY:
'
from generate_Series(0,7) x;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ''\nfrom generate_Series(0,7) x' at line 1")

-----------
QUERY:

\gexec

-- insert 16 rows, one row for each test to perform.
insert into hp_prefix_test
select
  case a when 0 then null else 1 end,
  case b when 0 then null else 2 end,
  case c when 0 then null else 3 end,
  case d when 0 then null else 4 end
from
  generate_series(0,1) a,
  generate_series(0,1) b,
  generate_Series(0,1) c,
  generate_Series(0,1) d;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '\\gexec\n\n-- insert 16 rows, one row for each test to perform.\ninsert into hp_pref' at line 1")

-----------
QUERY:


-- Ensure partition pruning works correctly for each combination of IS NULL
-- and equality quals.  This may seem a little excessive, but there have been
-- a number of bugs in this area over the years.  We make use of row only
-- output to reduce the size of the expected results.
\t on
select
  'explain (costs off) select tableoid::regclass,* from hp_prefix_test where ' ||
  string_agg(c.colname || case when g.s & (1 << c.colpos) = 0 then ' is null' else ' = ' || (colpos+1)::text end, ' and ' order by c.colpos)
from (values('a',0),('b',1),('c',2),('d',3)) c(colname, colpos), generate_Series(0,15) g(s)
group by g.s
order by g.s;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '\\t on\nselect\n  'explain (costs off) select tableoid::regclass,* from hp_prefix_t' at line 5")

-----------
QUERY:

\gexec

-- And ensure we get exactly 1 row from each. Again, all 16 possible combinations.
select
  'select tableoid::regclass,* from hp_prefix_test where ' ||
  string_agg(c.colname || case when g.s & (1 << c.colpos) = 0 then ' is null' else ' = ' || (colpos+1)::text end, ' and ' order by c.colpos)
from (values('a',0),('b',1),('c',2),('d',3)) c(colname, colpos), generate_Series(0,15) g(s)
group by g.s
order by g.s;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '\\gexec\n\n-- And ensure we get exactly 1 row from each. Again, all 16 possible com' at line 1")

-----------
QUERY:

\gexec
\t off

drop table hp_prefix_test;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '\\gexec\n\\t off\n\ndrop table hp_prefix_test' at line 1")

-----------
QUERY:


--
-- Check that gen_partprune_steps() detects self-contradiction from clauses
-- regardless of the order of the clauses (Here we use a custom operator to
-- prevent the equivclass.c machinery from reordering the clauses)
--

create operator === (
   leftarg = int4,
   rightarg = int4,
   procedure = int4eq,
   commutator = ===,
   hashes
);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'operator === (\n   leftarg = int4,\n   rightarg = int4,\n   procedure = int4eq,\n   ' at line 7")

-----------
QUERY:

create operator class part_test_int4_ops2
for type int4
using hash as
operator 1 ===,
function 2 part_hashint4_noop(int4, int8);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'operator class part_test_int4_ops2\nfor type int4\nusing hash as\noperator 1 ===,\nf' at line 1")

-----------
QUERY:


create table hp_contradict_test (a int, b int) partition by hash (a part_test_int4_ops2, b part_test_int4_ops2);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'part_test_int4_ops2, b part_test_int4_ops2)' at line 1")

-----------
QUERY:

create table hp_contradict_test_p1 partition of hp_contradict_test for values with (modulus 2, remainder 0);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of hp_contradict_test for values with (modulus 2, remainder 0)' at line 1")

-----------
QUERY:

create table hp_contradict_test_p2 partition of hp_contradict_test for values with (modulus 2, remainder 1);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'of hp_contradict_test for values with (modulus 2, remainder 1)' at line 1")

-----------
QUERY:


explain (costs off) select * from hp_contradict_test where a is null and a === 1 and b === 1;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from hp_contradict_test where a is null and a === 1 and b ==' at line 1")

-----------
QUERY:

explain (costs off) select * from hp_contradict_test where a === 1 and b === 1 and a is null;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs off) select * from hp_contradict_test where a === 1 and b === 1 and a is n' at line 1")

-----------
QUERY:


drop table hp_contradict_test;
RESULT:
	ERROR - (1051, "Unknown table 'test.hp_contradict_test'")

-----------
QUERY:

drop operator class part_test_int4_ops2 using hash;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'operator class part_test_int4_ops2 using hash' at line 1")

-----------
QUERY:

drop operator ===(int4, int4);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'operator ===(int4, int4)' at line 1")
