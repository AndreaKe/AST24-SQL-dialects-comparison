
-----------
QUERY:
--
-- Tests for polymorphic SQL functions and aggregates based on them.
-- Tests for other features related to function-calling have snuck in, too.
--

create function polyf(x anyelement) returns anyelement as $$
  select x + 1
$$ language sql;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'anyelement) returns anyelement as $$\n  select x + 1\n$$ language sql' at line 6")

-----------
QUERY:


select polyf(42) as int, polyf(4.5) as num;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'int, polyf(4.5) as num' at line 1")

-----------
QUERY:

select polyf(point(3,4));
RESULT:
	ERROR - (1305, 'FUNCTION test.polyf does not exist')

-----------
QUERY:
  -- fail for lack of + operator

drop function polyf(x anyelement);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(x anyelement)' at line 3")

-----------
QUERY:


create function polyf(x anyelement) returns anyarray as $$
  select array[x + 1, x + 2]
$$ language sql;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'anyelement) returns anyarray as $$\n  select array[x + 1, x + 2]\n$$ language sql' at line 1")

-----------
QUERY:


select polyf(42) as int, polyf(4.5) as num;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'int, polyf(4.5) as num' at line 1")

-----------
QUERY:


drop function polyf(x anyelement);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(x anyelement)' at line 1")

-----------
QUERY:


create function polyf(x anyarray) returns anyelement as $$
  select x[1]
$$ language sql;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'anyarray) returns anyelement as $$\n  select x[1]\n$$ language sql' at line 1")

-----------
QUERY:


select polyf(array[2,4]) as int, polyf(array[4.5, 7.7]) as num;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[2,4]) as int, polyf(array[4.5, 7.7]) as num' at line 1")

-----------
QUERY:


select polyf(stavalues1) from pg_statistic;
RESULT:
	ERROR - (1146, "Table 'test.pg_statistic' doesn't exist")

-----------
QUERY:
  -- fail, can/* REPLACED */ ''t infer element type

drop function polyf(x anyarray);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(x anyarray)' at line 3")

-----------
QUERY:


create function polyf(x anyarray) returns anyarray as $$
  select x
$$ language sql;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'anyarray) returns anyarray as $$\n  select x\n$$ language sql' at line 1")

-----------
QUERY:


select polyf(array[2,4]) as int, polyf(array[4.5, 7.7]) as num;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[2,4]) as int, polyf(array[4.5, 7.7]) as num' at line 1")

-----------
QUERY:


select polyf(stavalues1) from pg_statistic;
RESULT:
	ERROR - (1146, "Table 'test.pg_statistic' doesn't exist")

-----------
QUERY:
  -- fail, can/* REPLACED */ ''t infer element type

drop function polyf(x anyarray);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(x anyarray)' at line 3")

-----------
QUERY:


-- fail, can/* REPLACED */ ''t infer type:
create function polyf(x anyelement) returns anyrange as $$
  select array[x + 1, x + 2]
$$ language sql;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'anyelement) returns anyrange as $$\n  select array[x + 1, x + 2]\n$$ language sql' at line 2")

-----------
QUERY:


create function polyf(x anyrange) returns anyarray as $$
  select array[lower(x), upper(x)]
$$ language sql;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'anyrange) returns anyarray as $$\n  select array[lower(x), upper(x)]\n$$ language ' at line 1")

-----------
QUERY:


select polyf(int4range(42, 49)) as int, polyf(float8range(4.5, 7.8)) as num;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'int, polyf(float8range(4.5, 7.8)) as num' at line 1")

-----------
QUERY:


drop function polyf(x anyrange);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(x anyrange)' at line 1")

-----------
QUERY:


create function polyf(x anycompatible, y anycompatible) returns anycompatiblearray as $$
  select array[x, y]
$$ language sql;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'anycompatible, y anycompatible) returns anycompatiblearray as $$\n  select array[' at line 1")

-----------
QUERY:


select polyf(2, 4) as int, polyf(2, 4.5) as num;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'int, polyf(2, 4.5) as num' at line 1")

-----------
QUERY:


drop function polyf(x anycompatible, y anycompatible);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(x anycompatible, y anycompatible)' at line 1")

-----------
QUERY:


create function polyf(x anycompatiblerange, y anycompatible, z anycompatible) returns anycompatiblearray as $$
  select array[lower(x), upper(x), y, z]
$$ language sql;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'anycompatiblerange, y anycompatible, z anycompatible) returns anycompatiblearray' at line 1")

-----------
QUERY:


select polyf(int4range(42, 49), 11, 2::smallint) as int, polyf(float8range(4.5, 7.8), 7.8, 11::real) as num;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::smallint) as int, polyf(float8range(4.5, 7.8), 7.8, 11::real) as num' at line 1")

-----------
QUERY:


select polyf(int4range(42, 49), 11, 4.5) as fail;
RESULT:
	ERROR - (1305, 'FUNCTION test.polyf does not exist')

-----------
QUERY:
  -- range type doesn/* REPLACED */ ''t fit

drop function polyf(x anycompatiblerange, y anycompatible, z anycompatible);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(x anycompatiblerange, y anycompatible, z anycompatible)' at line 3")

-----------
QUERY:


create function polyf(x anycompatiblemultirange, y anycompatible, z anycompatible) returns anycompatiblearray as $$
  select array[lower(x), upper(x), y, z]
$$ language sql;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'anycompatiblemultirange, y anycompatible, z anycompatible) returns anycompatible' at line 1")

-----------
QUERY:


select polyf(multirange(int4range(42, 49)), 11, 2::smallint) as int, polyf(multirange(float8range(4.5, 7.8)), 7.8, 11::real) as num;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::smallint) as int, polyf(multirange(float8range(4.5, 7.8)), 7.8, 11::real) as n' at line 1")

-----------
QUERY:


select polyf(multirange(int4range(42, 49)), 11, 4.5) as fail;
RESULT:
	ERROR - (1305, 'FUNCTION test.polyf does not exist')

-----------
QUERY:
  -- range type doesn/* REPLACED */ ''t fit

drop function polyf(x anycompatiblemultirange, y anycompatible, z anycompatible);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(x anycompatiblemultirange, y anycompatible, z anycompatible)' at line 3")

-----------
QUERY:


-- fail, can/* REPLACED */ ''t infer type:
create function polyf(x anycompatible) returns anycompatiblerange as $$
  select array[x + 1, x + 2]
$$ language sql;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'anycompatible) returns anycompatiblerange as $$\n  select array[x + 1, x + 2]\n$$ ' at line 2")

-----------
QUERY:


create function polyf(x anycompatiblerange, y anycompatiblearray) returns anycompatiblerange as $$
  select x
$$ language sql;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'anycompatiblerange, y anycompatiblearray) returns anycompatiblerange as $$\n  sel' at line 1")

-----------
QUERY:


select polyf(int4range(42, 49), array[11]) as int, polyf(float8range(4.5, 7.8), array[7]) as num;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[11]) as int, polyf(float8range(4.5, 7.8), array[7]) as num' at line 1")

-----------
QUERY:


drop function polyf(x anycompatiblerange, y anycompatiblearray);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(x anycompatiblerange, y anycompatiblearray)' at line 1")

-----------
QUERY:


-- fail, can/* REPLACED */ ''t infer type:
create function polyf(x anycompatible) returns anycompatiblemultirange as $$
  select array[x + 1, x + 2]
$$ language sql;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'anycompatible) returns anycompatiblemultirange as $$\n  select array[x + 1, x + 2' at line 2")

-----------
QUERY:


create function polyf(x anycompatiblemultirange, y anycompatiblearray) returns anycompatiblemultirange as $$
  select x
$$ language sql;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'anycompatiblemultirange, y anycompatiblearray) returns anycompatiblemultirange a' at line 1")

-----------
QUERY:


select polyf(multirange(int4range(42, 49)), array[11]) as int, polyf(multirange(float8range(4.5, 7.8)), array[7]) as num;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[11]) as int, polyf(multirange(float8range(4.5, 7.8)), array[7]) as num' at line 1")

-----------
QUERY:


drop function polyf(x anycompatiblemultirange, y anycompatiblearray);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(x anycompatiblemultirange, y anycompatiblearray)' at line 1")

-----------
QUERY:


create function polyf(a anyelement, b anyarray,
                      c anycompatible, d anycompatible,
                      OUT x anyarray, OUT y anycompatiblearray)
as $$
  select a || b, array[c, d]
$$ language sql;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'anyelement, b anyarray,\n                      c anycompatible, d anycompatible,\n' at line 1")

-----------
QUERY:


select x, pg_typeof(x), y, pg_typeof(y)
  from polyf(11, array[1, 2], 42, 34.5);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(11, array[1, 2], 42, 34.5)' at line 2")

-----------
QUERY:

select x, pg_typeof(x), y, pg_typeof(y)
  from polyf(11, array[1, 2], point(1,2), point(3,4));
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(11, array[1, 2], point(1,2), point(3,4))' at line 2")

-----------
QUERY:

select x, pg_typeof(x), y, pg_typeof(y)
  from polyf(11, '{1,2}', point(1,2), '(3,4)');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(11, '{1,2}', point(1,2), '(3,4)')' at line 2")

-----------
QUERY:

select x, pg_typeof(x), y, pg_typeof(y)
  from polyf(11, array[1, 2.2], 42, 34.5);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(11, array[1, 2.2], 42, 34.5)' at line 2")

-----------
QUERY:
  -- fail

drop function polyf(a anyelement, b anyarray,
                    c anycompatible, d anycompatible);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(a anyelement, b anyarray,\n                    c anycompatible, d anycompatible)' at line 3")

-----------
QUERY:


create function polyf(anyrange) returns anymultirange
as 'select multirange($1);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ') returns anymultirange\nas 'select multirange($1)' at line 1")

-----------
QUERY:
' language sql;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '' language sql' at line 1")

-----------
QUERY:


select polyf(int4range(1,10));
RESULT:
	ERROR - (1305, 'FUNCTION test.polyf does not exist')

-----------
QUERY:

select polyf(null);
RESULT:
	ERROR - (1305, 'FUNCTION test.polyf does not exist')

-----------
QUERY:


drop function polyf(anyrange);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(anyrange)' at line 1")

-----------
QUERY:


create function polyf(anymultirange) returns anyelement
as 'select lower($1);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ') returns anyelement\nas 'select lower($1)' at line 1")

-----------
QUERY:
' language sql;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '' language sql' at line 1")

-----------
QUERY:


select polyf(int4multirange(int4range(1,10), int4range(20,30)));
RESULT:
	ERROR - (1305, 'FUNCTION test.polyf does not exist')

-----------
QUERY:

select polyf(null);
RESULT:
	ERROR - (1305, 'FUNCTION test.polyf does not exist')

-----------
QUERY:


drop function polyf(anymultirange);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(anymultirange)' at line 1")

-----------
QUERY:


create function polyf(anycompatiblerange) returns anycompatiblemultirange
as 'select multirange($1);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ') returns anycompatiblemultirange\nas 'select multirange($1)' at line 1")

-----------
QUERY:
' language sql;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '' language sql' at line 1")

-----------
QUERY:


select polyf(int4range(1,10));
RESULT:
	ERROR - (1305, 'FUNCTION test.polyf does not exist')

-----------
QUERY:

select polyf(null);
RESULT:
	ERROR - (1305, 'FUNCTION test.polyf does not exist')

-----------
QUERY:


drop function polyf(anycompatiblerange);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(anycompatiblerange)' at line 1")

-----------
QUERY:


create function polyf(anymultirange) returns anyrange
as 'select range_merge($1);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ') returns anyrange\nas 'select range_merge($1)' at line 1")

-----------
QUERY:
' language sql;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '' language sql' at line 1")

-----------
QUERY:


select polyf(int4multirange(int4range(1,10), int4range(20,30)));
RESULT:
	ERROR - (1305, 'FUNCTION test.polyf does not exist')

-----------
QUERY:

select polyf(null);
RESULT:
	ERROR - (1305, 'FUNCTION test.polyf does not exist')

-----------
QUERY:


drop function polyf(anymultirange);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(anymultirange)' at line 1")

-----------
QUERY:


create function polyf(anycompatiblemultirange) returns anycompatiblerange
as 'select range_merge($1);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ') returns anycompatiblerange\nas 'select range_merge($1)' at line 1")

-----------
QUERY:
' language sql;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '' language sql' at line 1")

-----------
QUERY:


select polyf(int4multirange(int4range(1,10), int4range(20,30)));
RESULT:
	ERROR - (1305, 'FUNCTION test.polyf does not exist')

-----------
QUERY:

select polyf(null);
RESULT:
	ERROR - (1305, 'FUNCTION test.polyf does not exist')

-----------
QUERY:


drop function polyf(anycompatiblemultirange);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(anycompatiblemultirange)' at line 1")

-----------
QUERY:


create function polyf(anycompatiblemultirange) returns anycompatible
as 'select lower($1);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ') returns anycompatible\nas 'select lower($1)' at line 1")

-----------
QUERY:
' language sql;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '' language sql' at line 1")

-----------
QUERY:


select polyf(int4multirange(int4range(1,10), int4range(20,30)));
RESULT:
	ERROR - (1305, 'FUNCTION test.polyf does not exist')

-----------
QUERY:

select polyf(null);
RESULT:
	ERROR - (1305, 'FUNCTION test.polyf does not exist')

-----------
QUERY:


drop function polyf(anycompatiblemultirange);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(anycompatiblemultirange)' at line 1")

-----------
QUERY:



--
-- Polymorphic aggregate tests
--
-- Legend:
-----------
-- A = type is ANY
-- P = type is polymorphic
-- N = type is non-polymorphic
-- B = aggregate base type
-- S = aggregate state type
-- R = aggregate return type
-- 1 = arg1 of a function
-- 2 = arg2 of a function
-- ag = aggregate
-- tf = trans (state) function
-- ff = final function
-- rt = return type of a function
-- -> = implies
-- => = allowed
-- !> = not allowed
-- E  = exists
-- NE = not-exists
--
-- Possible states:
-- ----------------
-- B = (A || P || N)
--   when (B = A) -> (tf2 = NE)
-- S = (P || N)
-- ff = (E || NE)
-- tf1 = (P || N)
-- tf2 = (NE || P || N)
-- R = (P || N)

-- create functions for use as tf and ff with the needed combinations of
-- argument polymorphism, but within the constraints of valid aggregate
-- functions, i.e. tf arg1 and tf return type must match

-- polymorphic single arg transfn
CREATE FUNCTION stfp(anyarray) RETURNS anyarray AS
'select $1' LANGUAGE SQL;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '-----------\n-- A = type is ANY\n-- P = type is polymorphic\n-- N = type is non-pol' at line 5")

-----------
QUERY:

-- non-polymorphic single arg transfn
CREATE FUNCTION stfnp(int[]) RETURNS int[] AS
'select $1' LANGUAGE SQL;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'int[]) RETURNS int[] AS\n'select $1' LANGUAGE SQL' at line 2")

-----------
QUERY:


-- dual polymorphic transfn
CREATE FUNCTION tfp(anyarray,anyelement) RETURNS anyarray AS
'select $1 || $2' LANGUAGE SQL;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ',anyelement) RETURNS anyarray AS\n'select $1 || $2' LANGUAGE SQL' at line 2")

-----------
QUERY:

-- dual non-polymorphic transfn
CREATE FUNCTION tfnp(int[],int) RETURNS int[] AS
'select $1 || $2' LANGUAGE SQL;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'int[],int) RETURNS int[] AS\n'select $1 || $2' LANGUAGE SQL' at line 2")

-----------
QUERY:


-- arg1 only polymorphic transfn
CREATE FUNCTION tf1p(anyarray,int) RETURNS anyarray AS
'select $1' LANGUAGE SQL;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ',int) RETURNS anyarray AS\n'select $1' LANGUAGE SQL' at line 2")

-----------
QUERY:

-- arg2 only polymorphic transfn
CREATE FUNCTION tf2p(int[],anyelement) RETURNS int[] AS
'select $1' LANGUAGE SQL;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'int[],anyelement) RETURNS int[] AS\n'select $1' LANGUAGE SQL' at line 2")

-----------
QUERY:


-- multi-arg polymorphic
CREATE FUNCTION sum3(anyelement,anyelement,anyelement) returns anyelement AS
'select $1+$2+$3' language sql strict;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ',anyelement,anyelement) returns anyelement AS\n'select $1+$2+$3' language sql str' at line 2")

-----------
QUERY:


-- finalfn polymorphic
CREATE FUNCTION ffp(anyarray) RETURNS anyarray AS
'select $1' LANGUAGE SQL;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ') RETURNS anyarray AS\n'select $1' LANGUAGE SQL' at line 2")

-----------
QUERY:

-- finalfn non-polymorphic
CREATE FUNCTION ffnp(int[]) returns int[] as
'select $1' LANGUAGE SQL;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'int[]) returns int[] as\n'select $1' LANGUAGE SQL' at line 2")

-----------
QUERY:


-- Try to cover all the possible states:
--
-- Note: in Cases 1 & 2, we are trying to return P. Therefore, if the transfn
-- is stfnp, tfnp, or tf2p, we must use ffp as finalfn, because stfnp, tfnp,
-- and tf2p do not return P. Conversely, in Cases 3 & 4, we are trying to
-- return N. Therefore, if the transfn is stfp, tfp, or tf1p, we must use ffnp
-- as finalfn, because stfp, tfp, and tf1p do not return N.
--
--     Case1 (R = P) && (B = A)
--     ------------------------
--     S    tf1
--     -------
--     N    N
-- should CREATE
CREATE AGGREGATE myaggp01a(*) (SFUNC = stfnp, STYPE = int4[],
  FINALFUNC = ffp, INITCOND = '{}');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'myaggp01a(*) (SFUNC = stfnp, STYPE = int4[],\n  FINALFUNC = ffp, INITCOND = '{}')' at line 15")

-----------
QUERY:


--     P    N
-- should ERROR: stfnp(anyarray) not matched by stfnp(int[])
CREATE AGGREGATE myaggp02a(*) (SFUNC = stfnp, STYPE = anyarray,
  FINALFUNC = ffp, INITCOND = '{}');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'myaggp02a(*) (SFUNC = stfnp, STYPE = anyarray,\n  FINALFUNC = ffp, INITCOND = '{}' at line 3")

-----------
QUERY:


--     N    P
-- should CREATE
CREATE AGGREGATE myaggp03a(*) (SFUNC = stfp, STYPE = int4[],
  FINALFUNC = ffp, INITCOND = '{}');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'myaggp03a(*) (SFUNC = stfp, STYPE = int4[],\n  FINALFUNC = ffp, INITCOND = '{}')' at line 3")

-----------
QUERY:

CREATE AGGREGATE myaggp03b(*) (SFUNC = stfp, STYPE = int4[],
  INITCOND = '{}');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'myaggp03b(*) (SFUNC = stfp, STYPE = int4[],\n  INITCOND = '{}')' at line 1")

-----------
QUERY:


--     P    P
-- should ERROR: we have no way to resolve S
CREATE AGGREGATE myaggp04a(*) (SFUNC = stfp, STYPE = anyarray,
  FINALFUNC = ffp, INITCOND = '{}');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'myaggp04a(*) (SFUNC = stfp, STYPE = anyarray,\n  FINALFUNC = ffp, INITCOND = '{}'' at line 3")

-----------
QUERY:

CREATE AGGREGATE myaggp04b(*) (SFUNC = stfp, STYPE = anyarray,
  INITCOND = '{}');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'myaggp04b(*) (SFUNC = stfp, STYPE = anyarray,\n  INITCOND = '{}')' at line 1")

-----------
QUERY:



--    Case2 (R = P) && ((B = P) || (B = N))
--    -------------------------------------
--    S    tf1      B    tf2
--    -----------------------
--    N    N        N    N
-- should CREATE
CREATE AGGREGATE myaggp05a(BASETYPE = int, SFUNC = tfnp, STYPE = int[],
  FINALFUNC = ffp, INITCOND = '{}');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'myaggp05a(BASETYPE = int, SFUNC = tfnp, STYPE = int[],\n  FINALFUNC = ffp, INITCO' at line 7")

-----------
QUERY:


--    N    N        N    P
-- should CREATE
CREATE AGGREGATE myaggp06a(BASETYPE = int, SFUNC = tf2p, STYPE = int[],
  FINALFUNC = ffp, INITCOND = '{}');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'myaggp06a(BASETYPE = int, SFUNC = tf2p, STYPE = int[],\n  FINALFUNC = ffp, INITCO' at line 3")

-----------
QUERY:


--    N    N        P    N
-- should ERROR: tfnp(int[], anyelement) not matched by tfnp(int[], int)
CREATE AGGREGATE myaggp07a(BASETYPE = anyelement, SFUNC = tfnp, STYPE = int[],
  FINALFUNC = ffp, INITCOND = '{}');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'myaggp07a(BASETYPE = anyelement, SFUNC = tfnp, STYPE = int[],\n  FINALFUNC = ffp,' at line 3")

-----------
QUERY:


--    N    N        P    P
-- should CREATE
CREATE AGGREGATE myaggp08a(BASETYPE = anyelement, SFUNC = tf2p, STYPE = int[],
  FINALFUNC = ffp, INITCOND = '{}');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'myaggp08a(BASETYPE = anyelement, SFUNC = tf2p, STYPE = int[],\n  FINALFUNC = ffp,' at line 3")

-----------
QUERY:


--    N    P        N    N
-- should CREATE
CREATE AGGREGATE myaggp09a(BASETYPE = int, SFUNC = tf1p, STYPE = int[],
  FINALFUNC = ffp, INITCOND = '{}');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'myaggp09a(BASETYPE = int, SFUNC = tf1p, STYPE = int[],\n  FINALFUNC = ffp, INITCO' at line 3")

-----------
QUERY:

CREATE AGGREGATE myaggp09b(BASETYPE = int, SFUNC = tf1p, STYPE = int[],
  INITCOND = '{}');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'myaggp09b(BASETYPE = int, SFUNC = tf1p, STYPE = int[],\n  INITCOND = '{}')' at line 1")

-----------
QUERY:


--    N    P        N    P
-- should CREATE
CREATE AGGREGATE myaggp10a(BASETYPE = int, SFUNC = tfp, STYPE = int[],
  FINALFUNC = ffp, INITCOND = '{}');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'myaggp10a(BASETYPE = int, SFUNC = tfp, STYPE = int[],\n  FINALFUNC = ffp, INITCON' at line 3")

-----------
QUERY:

CREATE AGGREGATE myaggp10b(BASETYPE = int, SFUNC = tfp, STYPE = int[],
  INITCOND = '{}');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'myaggp10b(BASETYPE = int, SFUNC = tfp, STYPE = int[],\n  INITCOND = '{}')' at line 1")

-----------
QUERY:


--    N    P        P    N
-- should ERROR: tf1p(int[],anyelement) not matched by tf1p(anyarray,int)
CREATE AGGREGATE myaggp11a(BASETYPE = anyelement, SFUNC = tf1p, STYPE = int[],
  FINALFUNC = ffp, INITCOND = '{}');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'myaggp11a(BASETYPE = anyelement, SFUNC = tf1p, STYPE = int[],\n  FINALFUNC = ffp,' at line 3")

-----------
QUERY:

CREATE AGGREGATE myaggp11b(BASETYPE = anyelement, SFUNC = tf1p, STYPE = int[],
  INITCOND = '{}');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'myaggp11b(BASETYPE = anyelement, SFUNC = tf1p, STYPE = int[],\n  INITCOND = '{}')' at line 1")

-----------
QUERY:


--    N    P        P    P
-- should ERROR: tfp(int[],anyelement) not matched by tfp(anyarray,anyelement)
CREATE AGGREGATE myaggp12a(BASETYPE = anyelement, SFUNC = tfp, STYPE = int[],
  FINALFUNC = ffp, INITCOND = '{}');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'myaggp12a(BASETYPE = anyelement, SFUNC = tfp, STYPE = int[],\n  FINALFUNC = ffp, ' at line 3")

-----------
QUERY:

CREATE AGGREGATE myaggp12b(BASETYPE = anyelement, SFUNC = tfp, STYPE = int[],
  INITCOND = '{}');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'myaggp12b(BASETYPE = anyelement, SFUNC = tfp, STYPE = int[],\n  INITCOND = '{}')' at line 1")

-----------
QUERY:


--    P    N        N    N
-- should ERROR: tfnp(anyarray, int) not matched by tfnp(int[],int)
CREATE AGGREGATE myaggp13a(BASETYPE = int, SFUNC = tfnp, STYPE = anyarray,
  FINALFUNC = ffp, INITCOND = '{}');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'myaggp13a(BASETYPE = int, SFUNC = tfnp, STYPE = anyarray,\n  FINALFUNC = ffp, INI' at line 3")

-----------
QUERY:


--    P    N        N    P
-- should ERROR: tf2p(anyarray, int) not matched by tf2p(int[],anyelement)
CREATE AGGREGATE myaggp14a(BASETYPE = int, SFUNC = tf2p, STYPE = anyarray,
  FINALFUNC = ffp, INITCOND = '{}');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'myaggp14a(BASETYPE = int, SFUNC = tf2p, STYPE = anyarray,\n  FINALFUNC = ffp, INI' at line 3")

-----------
QUERY:


--    P    N        P    N
-- should ERROR: tfnp(anyarray, anyelement) not matched by tfnp(int[],int)
CREATE AGGREGATE myaggp15a(BASETYPE = anyelement, SFUNC = tfnp,
  STYPE = anyarray, FINALFUNC = ffp, INITCOND = '{}');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'myaggp15a(BASETYPE = anyelement, SFUNC = tfnp,\n  STYPE = anyarray, FINALFUNC = f' at line 3")

-----------
QUERY:


--    P    N        P    P
-- should ERROR: tf2p(anyarray, anyelement) not matched by tf2p(int[],anyelement)
CREATE AGGREGATE myaggp16a(BASETYPE = anyelement, SFUNC = tf2p,
  STYPE = anyarray, FINALFUNC = ffp, INITCOND = '{}');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'myaggp16a(BASETYPE = anyelement, SFUNC = tf2p,\n  STYPE = anyarray, FINALFUNC = f' at line 3")

-----------
QUERY:


--    P    P        N    N
-- should ERROR: we have no way to resolve S
CREATE AGGREGATE myaggp17a(BASETYPE = int, SFUNC = tf1p, STYPE = anyarray,
  FINALFUNC = ffp, INITCOND = '{}');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'myaggp17a(BASETYPE = int, SFUNC = tf1p, STYPE = anyarray,\n  FINALFUNC = ffp, INI' at line 3")

-----------
QUERY:

CREATE AGGREGATE myaggp17b(BASETYPE = int, SFUNC = tf1p, STYPE = anyarray,
  INITCOND = '{}');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'myaggp17b(BASETYPE = int, SFUNC = tf1p, STYPE = anyarray,\n  INITCOND = '{}')' at line 1")

-----------
QUERY:


--    P    P        N    P
-- should ERROR: tfp(anyarray, int) not matched by tfp(anyarray, anyelement)
CREATE AGGREGATE myaggp18a(BASETYPE = int, SFUNC = tfp, STYPE = anyarray,
  FINALFUNC = ffp, INITCOND = '{}');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'myaggp18a(BASETYPE = int, SFUNC = tfp, STYPE = anyarray,\n  FINALFUNC = ffp, INIT' at line 3")

-----------
QUERY:

CREATE AGGREGATE myaggp18b(BASETYPE = int, SFUNC = tfp, STYPE = anyarray,
  INITCOND = '{}');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'myaggp18b(BASETYPE = int, SFUNC = tfp, STYPE = anyarray,\n  INITCOND = '{}')' at line 1")

-----------
QUERY:


--    P    P        P    N
-- should ERROR: tf1p(anyarray, anyelement) not matched by tf1p(anyarray, int)
CREATE AGGREGATE myaggp19a(BASETYPE = anyelement, SFUNC = tf1p,
  STYPE = anyarray, FINALFUNC = ffp, INITCOND = '{}');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'myaggp19a(BASETYPE = anyelement, SFUNC = tf1p,\n  STYPE = anyarray, FINALFUNC = f' at line 3")

-----------
QUERY:

CREATE AGGREGATE myaggp19b(BASETYPE = anyelement, SFUNC = tf1p,
  STYPE = anyarray, INITCOND = '{}');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'myaggp19b(BASETYPE = anyelement, SFUNC = tf1p,\n  STYPE = anyarray, INITCOND = '{' at line 1")

-----------
QUERY:


--    P    P        P    P
-- should CREATE
CREATE AGGREGATE myaggp20a(BASETYPE = anyelement, SFUNC = tfp,
  STYPE = anyarray, FINALFUNC = ffp, INITCOND = '{}');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'myaggp20a(BASETYPE = anyelement, SFUNC = tfp,\n  STYPE = anyarray, FINALFUNC = ff' at line 3")

-----------
QUERY:

CREATE AGGREGATE myaggp20b(BASETYPE = anyelement, SFUNC = tfp,
  STYPE = anyarray, INITCOND = '{}');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'myaggp20b(BASETYPE = anyelement, SFUNC = tfp,\n  STYPE = anyarray, INITCOND = '{}' at line 1")

-----------
QUERY:


--     Case3 (R = N) && (B = A)
--     ------------------------
--     S    tf1
--     -------
--     N    N
-- should CREATE
CREATE AGGREGATE myaggn01a(*) (SFUNC = stfnp, STYPE = int4[],
  FINALFUNC = ffnp, INITCOND = '{}');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'myaggn01a(*) (SFUNC = stfnp, STYPE = int4[],\n  FINALFUNC = ffnp, INITCOND = '{}'' at line 7")

-----------
QUERY:

CREATE AGGREGATE myaggn01b(*) (SFUNC = stfnp, STYPE = int4[],
  INITCOND = '{}');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'myaggn01b(*) (SFUNC = stfnp, STYPE = int4[],\n  INITCOND = '{}')' at line 1")

-----------
QUERY:


--     P    N
-- should ERROR: stfnp(anyarray) not matched by stfnp(int[])
CREATE AGGREGATE myaggn02a(*) (SFUNC = stfnp, STYPE = anyarray,
  FINALFUNC = ffnp, INITCOND = '{}');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'myaggn02a(*) (SFUNC = stfnp, STYPE = anyarray,\n  FINALFUNC = ffnp, INITCOND = '{' at line 3")

-----------
QUERY:

CREATE AGGREGATE myaggn02b(*) (SFUNC = stfnp, STYPE = anyarray,
  INITCOND = '{}');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'myaggn02b(*) (SFUNC = stfnp, STYPE = anyarray,\n  INITCOND = '{}')' at line 1")

-----------
QUERY:


--     N    P
-- should CREATE
CREATE AGGREGATE myaggn03a(*) (SFUNC = stfp, STYPE = int4[],
  FINALFUNC = ffnp, INITCOND = '{}');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'myaggn03a(*) (SFUNC = stfp, STYPE = int4[],\n  FINALFUNC = ffnp, INITCOND = '{}')' at line 3")

-----------
QUERY:


--     P    P
-- should ERROR: ffnp(anyarray) not matched by ffnp(int[])
CREATE AGGREGATE myaggn04a(*) (SFUNC = stfp, STYPE = anyarray,
  FINALFUNC = ffnp, INITCOND = '{}');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'myaggn04a(*) (SFUNC = stfp, STYPE = anyarray,\n  FINALFUNC = ffnp, INITCOND = '{}' at line 3")

-----------
QUERY:



--    Case4 (R = N) && ((B = P) || (B = N))
--    -------------------------------------
--    S    tf1      B    tf2
--    -----------------------
--    N    N        N    N
-- should CREATE
CREATE AGGREGATE myaggn05a(BASETYPE = int, SFUNC = tfnp, STYPE = int[],
  FINALFUNC = ffnp, INITCOND = '{}');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'myaggn05a(BASETYPE = int, SFUNC = tfnp, STYPE = int[],\n  FINALFUNC = ffnp, INITC' at line 7")

-----------
QUERY:

CREATE AGGREGATE myaggn05b(BASETYPE = int, SFUNC = tfnp, STYPE = int[],
  INITCOND = '{}');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'myaggn05b(BASETYPE = int, SFUNC = tfnp, STYPE = int[],\n  INITCOND = '{}')' at line 1")

-----------
QUERY:


--    N    N        N    P
-- should CREATE
CREATE AGGREGATE myaggn06a(BASETYPE = int, SFUNC = tf2p, STYPE = int[],
  FINALFUNC = ffnp, INITCOND = '{}');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'myaggn06a(BASETYPE = int, SFUNC = tf2p, STYPE = int[],\n  FINALFUNC = ffnp, INITC' at line 3")

-----------
QUERY:

CREATE AGGREGATE myaggn06b(BASETYPE = int, SFUNC = tf2p, STYPE = int[],
  INITCOND = '{}');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'myaggn06b(BASETYPE = int, SFUNC = tf2p, STYPE = int[],\n  INITCOND = '{}')' at line 1")

-----------
QUERY:


--    N    N        P    N
-- should ERROR: tfnp(int[], anyelement) not matched by tfnp(int[], int)
CREATE AGGREGATE myaggn07a(BASETYPE = anyelement, SFUNC = tfnp, STYPE = int[],
  FINALFUNC = ffnp, INITCOND = '{}');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'myaggn07a(BASETYPE = anyelement, SFUNC = tfnp, STYPE = int[],\n  FINALFUNC = ffnp' at line 3")

-----------
QUERY:

CREATE AGGREGATE myaggn07b(BASETYPE = anyelement, SFUNC = tfnp, STYPE = int[],
  INITCOND = '{}');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'myaggn07b(BASETYPE = anyelement, SFUNC = tfnp, STYPE = int[],\n  INITCOND = '{}')' at line 1")

-----------
QUERY:


--    N    N        P    P
-- should CREATE
CREATE AGGREGATE myaggn08a(BASETYPE = anyelement, SFUNC = tf2p, STYPE = int[],
  FINALFUNC = ffnp, INITCOND = '{}');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'myaggn08a(BASETYPE = anyelement, SFUNC = tf2p, STYPE = int[],\n  FINALFUNC = ffnp' at line 3")

-----------
QUERY:

CREATE AGGREGATE myaggn08b(BASETYPE = anyelement, SFUNC = tf2p, STYPE = int[],
  INITCOND = '{}');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'myaggn08b(BASETYPE = anyelement, SFUNC = tf2p, STYPE = int[],\n  INITCOND = '{}')' at line 1")

-----------
QUERY:


--    N    P        N    N
-- should CREATE
CREATE AGGREGATE myaggn09a(BASETYPE = int, SFUNC = tf1p, STYPE = int[],
  FINALFUNC = ffnp, INITCOND = '{}');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'myaggn09a(BASETYPE = int, SFUNC = tf1p, STYPE = int[],\n  FINALFUNC = ffnp, INITC' at line 3")

-----------
QUERY:


--    N    P        N    P
-- should CREATE
CREATE AGGREGATE myaggn10a(BASETYPE = int, SFUNC = tfp, STYPE = int[],
  FINALFUNC = ffnp, INITCOND = '{}');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'myaggn10a(BASETYPE = int, SFUNC = tfp, STYPE = int[],\n  FINALFUNC = ffnp, INITCO' at line 3")

-----------
QUERY:


--    N    P        P    N
-- should ERROR: tf1p(int[],anyelement) not matched by tf1p(anyarray,int)
CREATE AGGREGATE myaggn11a(BASETYPE = anyelement, SFUNC = tf1p, STYPE = int[],
  FINALFUNC = ffnp, INITCOND = '{}');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'myaggn11a(BASETYPE = anyelement, SFUNC = tf1p, STYPE = int[],\n  FINALFUNC = ffnp' at line 3")

-----------
QUERY:


--    N    P        P    P
-- should ERROR: tfp(int[],anyelement) not matched by tfp(anyarray,anyelement)
CREATE AGGREGATE myaggn12a(BASETYPE = anyelement, SFUNC = tfp, STYPE = int[],
  FINALFUNC = ffnp, INITCOND = '{}');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'myaggn12a(BASETYPE = anyelement, SFUNC = tfp, STYPE = int[],\n  FINALFUNC = ffnp,' at line 3")

-----------
QUERY:


--    P    N        N    N
-- should ERROR: tfnp(anyarray, int) not matched by tfnp(int[],int)
CREATE AGGREGATE myaggn13a(BASETYPE = int, SFUNC = tfnp, STYPE = anyarray,
  FINALFUNC = ffnp, INITCOND = '{}');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'myaggn13a(BASETYPE = int, SFUNC = tfnp, STYPE = anyarray,\n  FINALFUNC = ffnp, IN' at line 3")

-----------
QUERY:

CREATE AGGREGATE myaggn13b(BASETYPE = int, SFUNC = tfnp, STYPE = anyarray,
  INITCOND = '{}');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'myaggn13b(BASETYPE = int, SFUNC = tfnp, STYPE = anyarray,\n  INITCOND = '{}')' at line 1")

-----------
QUERY:


--    P    N        N    P
-- should ERROR: tf2p(anyarray, int) not matched by tf2p(int[],anyelement)
CREATE AGGREGATE myaggn14a(BASETYPE = int, SFUNC = tf2p, STYPE = anyarray,
  FINALFUNC = ffnp, INITCOND = '{}');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'myaggn14a(BASETYPE = int, SFUNC = tf2p, STYPE = anyarray,\n  FINALFUNC = ffnp, IN' at line 3")

-----------
QUERY:

CREATE AGGREGATE myaggn14b(BASETYPE = int, SFUNC = tf2p, STYPE = anyarray,
  INITCOND = '{}');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'myaggn14b(BASETYPE = int, SFUNC = tf2p, STYPE = anyarray,\n  INITCOND = '{}')' at line 1")

-----------
QUERY:


--    P    N        P    N
-- should ERROR: tfnp(anyarray, anyelement) not matched by tfnp(int[],int)
CREATE AGGREGATE myaggn15a(BASETYPE = anyelement, SFUNC = tfnp,
  STYPE = anyarray, FINALFUNC = ffnp, INITCOND = '{}');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'myaggn15a(BASETYPE = anyelement, SFUNC = tfnp,\n  STYPE = anyarray, FINALFUNC = f' at line 3")

-----------
QUERY:

CREATE AGGREGATE myaggn15b(BASETYPE = anyelement, SFUNC = tfnp,
  STYPE = anyarray, INITCOND = '{}');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'myaggn15b(BASETYPE = anyelement, SFUNC = tfnp,\n  STYPE = anyarray, INITCOND = '{' at line 1")

-----------
QUERY:


--    P    N        P    P
-- should ERROR: tf2p(anyarray, anyelement) not matched by tf2p(int[],anyelement)
CREATE AGGREGATE myaggn16a(BASETYPE = anyelement, SFUNC = tf2p,
  STYPE = anyarray, FINALFUNC = ffnp, INITCOND = '{}');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'myaggn16a(BASETYPE = anyelement, SFUNC = tf2p,\n  STYPE = anyarray, FINALFUNC = f' at line 3")

-----------
QUERY:

CREATE AGGREGATE myaggn16b(BASETYPE = anyelement, SFUNC = tf2p,
  STYPE = anyarray, INITCOND = '{}');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'myaggn16b(BASETYPE = anyelement, SFUNC = tf2p,\n  STYPE = anyarray, INITCOND = '{' at line 1")

-----------
QUERY:


--    P    P        N    N
-- should ERROR: ffnp(anyarray) not matched by ffnp(int[])
CREATE AGGREGATE myaggn17a(BASETYPE = int, SFUNC = tf1p, STYPE = anyarray,
  FINALFUNC = ffnp, INITCOND = '{}');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'myaggn17a(BASETYPE = int, SFUNC = tf1p, STYPE = anyarray,\n  FINALFUNC = ffnp, IN' at line 3")

-----------
QUERY:


--    P    P        N    P
-- should ERROR: tfp(anyarray, int) not matched by tfp(anyarray, anyelement)
CREATE AGGREGATE myaggn18a(BASETYPE = int, SFUNC = tfp, STYPE = anyarray,
  FINALFUNC = ffnp, INITCOND = '{}');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'myaggn18a(BASETYPE = int, SFUNC = tfp, STYPE = anyarray,\n  FINALFUNC = ffnp, INI' at line 3")

-----------
QUERY:


--    P    P        P    N
-- should ERROR: tf1p(anyarray, anyelement) not matched by tf1p(anyarray, int)
CREATE AGGREGATE myaggn19a(BASETYPE = anyelement, SFUNC = tf1p,
  STYPE = anyarray, FINALFUNC = ffnp, INITCOND = '{}');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'myaggn19a(BASETYPE = anyelement, SFUNC = tf1p,\n  STYPE = anyarray, FINALFUNC = f' at line 3")

-----------
QUERY:


--    P    P        P    P
-- should ERROR: ffnp(anyarray) not matched by ffnp(int[])
CREATE AGGREGATE myaggn20a(BASETYPE = anyelement, SFUNC = tfp,
  STYPE = anyarray, FINALFUNC = ffnp, INITCOND = '{}');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'myaggn20a(BASETYPE = anyelement, SFUNC = tfp,\n  STYPE = anyarray, FINALFUNC = ff' at line 3")

-----------
QUERY:


-- multi-arg polymorphic
CREATE AGGREGATE mysum2(anyelement,anyelement) (SFUNC = sum3,
  STYPE = anyelement, INITCOND = '0');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'mysum2(anyelement,anyelement) (SFUNC = sum3,\n  STYPE = anyelement, INITCOND = '0' at line 2")

-----------
QUERY:


-- create test data for polymorphic aggregates
create temp table t(f1 int, f2 int[], f3 text);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'temp table t(f1 int, f2 int[], f3 text)' at line 2")

-----------
QUERY:

insert into t values(1,array[1],'a');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[1],'a')' at line 1")

-----------
QUERY:

insert into t values(1,array[11],'b');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[11],'b')' at line 1")

-----------
QUERY:

insert into t values(1,array[111],'c');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[111],'c')' at line 1")

-----------
QUERY:

insert into t values(2,array[2],'a');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[2],'a')' at line 1")

-----------
QUERY:

insert into t values(2,array[22],'b');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[22],'b')' at line 1")

-----------
QUERY:

insert into t values(2,array[222],'c');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[222],'c')' at line 1")

-----------
QUERY:

insert into t values(3,array[3],'a');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[3],'a')' at line 1")

-----------
QUERY:

insert into t values(3,array[3],'b');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[3],'b')' at line 1")

-----------
QUERY:


-- test the successfully created polymorphic aggregates
select f3, myaggp01a(*) from t group by f3 order by f3;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '*) from t group by f3 order by f3' at line 2")

-----------
QUERY:

select f3, myaggp03a(*) from t group by f3 order by f3;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '*) from t group by f3 order by f3' at line 1")

-----------
QUERY:

select f3, myaggp03b(*) from t group by f3 order by f3;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '*) from t group by f3 order by f3' at line 1")

-----------
QUERY:

select f3, myaggp05a(f1) from t group by f3 order by f3;
RESULT:
	ERROR - (1146, "Table 'test.t' doesn't exist")

-----------
QUERY:

select f3, myaggp06a(f1) from t group by f3 order by f3;
RESULT:
	ERROR - (1146, "Table 'test.t' doesn't exist")

-----------
QUERY:

select f3, myaggp08a(f1) from t group by f3 order by f3;
RESULT:
	ERROR - (1146, "Table 'test.t' doesn't exist")

-----------
QUERY:

select f3, myaggp09a(f1) from t group by f3 order by f3;
RESULT:
	ERROR - (1146, "Table 'test.t' doesn't exist")

-----------
QUERY:

select f3, myaggp09b(f1) from t group by f3 order by f3;
RESULT:
	ERROR - (1146, "Table 'test.t' doesn't exist")

-----------
QUERY:

select f3, myaggp10a(f1) from t group by f3 order by f3;
RESULT:
	ERROR - (1146, "Table 'test.t' doesn't exist")

-----------
QUERY:

select f3, myaggp10b(f1) from t group by f3 order by f3;
RESULT:
	ERROR - (1146, "Table 'test.t' doesn't exist")

-----------
QUERY:

select f3, myaggp20a(f1) from t group by f3 order by f3;
RESULT:
	ERROR - (1146, "Table 'test.t' doesn't exist")

-----------
QUERY:

select f3, myaggp20b(f1) from t group by f3 order by f3;
RESULT:
	ERROR - (1146, "Table 'test.t' doesn't exist")

-----------
QUERY:

select f3, myaggn01a(*) from t group by f3 order by f3;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '*) from t group by f3 order by f3' at line 1")

-----------
QUERY:

select f3, myaggn01b(*) from t group by f3 order by f3;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '*) from t group by f3 order by f3' at line 1")

-----------
QUERY:

select f3, myaggn03a(*) from t group by f3 order by f3;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '*) from t group by f3 order by f3' at line 1")

-----------
QUERY:

select f3, myaggn05a(f1) from t group by f3 order by f3;
RESULT:
	ERROR - (1146, "Table 'test.t' doesn't exist")

-----------
QUERY:

select f3, myaggn05b(f1) from t group by f3 order by f3;
RESULT:
	ERROR - (1146, "Table 'test.t' doesn't exist")

-----------
QUERY:

select f3, myaggn06a(f1) from t group by f3 order by f3;
RESULT:
	ERROR - (1146, "Table 'test.t' doesn't exist")

-----------
QUERY:

select f3, myaggn06b(f1) from t group by f3 order by f3;
RESULT:
	ERROR - (1146, "Table 'test.t' doesn't exist")

-----------
QUERY:

select f3, myaggn08a(f1) from t group by f3 order by f3;
RESULT:
	ERROR - (1146, "Table 'test.t' doesn't exist")

-----------
QUERY:

select f3, myaggn08b(f1) from t group by f3 order by f3;
RESULT:
	ERROR - (1146, "Table 'test.t' doesn't exist")

-----------
QUERY:

select f3, myaggn09a(f1) from t group by f3 order by f3;
RESULT:
	ERROR - (1146, "Table 'test.t' doesn't exist")

-----------
QUERY:

select f3, myaggn10a(f1) from t group by f3 order by f3;
RESULT:
	ERROR - (1146, "Table 'test.t' doesn't exist")

-----------
QUERY:

select mysum2(f1, f1 + 1) from t;
RESULT:
	ERROR - (1146, "Table 'test.t' doesn't exist")

-----------
QUERY:


-- test inlining of polymorphic SQL functions
create function bleat(int) returns int as $$
begin
  raise notice 'bleat %', $1;
  return $1;
end$$ language plpgsql;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'int) returns int as $$\nbegin\n  raise notice 'bleat %', $1;\n  return $1;\nend$$ la' at line 2")

-----------
QUERY:


create function sql_if(bool, anyelement, anyelement) returns anyelement as $$
select case when $1 then $2 else $3 end $$ language sql;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ', anyelement, anyelement) returns anyelement as $$\nselect case when $1 then $2 e' at line 1")

-----------
QUERY:


-- Note this would fail with integer overflow, never mind wrong bleat() output,
-- if the CASE expression were not successfully inlined
select f1, sql_if(f1 > 0, bleat(f1), bleat(f1 + 1)) from int4_tbl;
RESULT:
	ERROR - (1146, "Table 'test.int4_tbl' doesn't exist")

-----------
QUERY:


select q2, sql_if(q2 > 0, q2, q2 + 1) from int8_tbl;
RESULT:
	ERROR - (1146, "Table 'test.int8_tbl' doesn't exist")

-----------
QUERY:


-- another sort of polymorphic aggregate

CREATE AGGREGATE array_larger_accum (anyarray)
(
    sfunc = array_larger,
    stype = anyarray,
    initcond = '{}'
);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'array_larger_accum (anyarray)\n(\n    sfunc = array_larger,\n    stype = anyarray,\n' at line 3")

-----------
QUERY:


SELECT array_larger_accum(i)
FROM (VALUES (ARRAY[1,2]), (ARRAY[3,4])) as t(i);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(ARRAY[1,2]), (ARRAY[3,4])) as t(i)' at line 2")

-----------
QUERY:


SELECT array_larger_accum(i)
FROM (VALUES (ARRAY[row(1,2),row(3,4)]), (ARRAY[row(5,6),row(7,8)])) as t(i);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(ARRAY[row(1,2),row(3,4)]), (ARRAY[row(5,6),row(7,8)])) as t(i)' at line 2")

-----------
QUERY:


-- another kind of polymorphic aggregate

create function add_group(grp anyarray, ad anyelement, size integer)
  returns anyarray
  as $$
begin
  if grp is null then
    return array[ad];
  end if;
  if array_upper(grp, 1) < size then
    return grp || ad;
  end if;
  return grp;
end;
$$
  language plpgsql immutable;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'anyarray, ad anyelement, size integer)\n  returns anyarray\n  as $$\nbegin\n  if grp' at line 3")

-----------
QUERY:


create aggregate build_group(anyelement, integer) (
  SFUNC = add_group,
  STYPE = anyarray
);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'build_group(anyelement, integer) (\n  SFUNC = add_group,\n  STYPE = anyarray\n)' at line 1")

-----------
QUERY:


select build_group(q1,3) from int8_tbl;
RESULT:
	ERROR - (1146, "Table 'test.int8_tbl' doesn't exist")

-----------
QUERY:


-- this should fail because stype isn/* REPLACED */ ''t compatible with arg
create aggregate build_group(int8, integer) (
  SFUNC = add_group,
  STYPE = int2[]
);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'build_group(int8, integer) (\n  SFUNC = add_group,\n  STYPE = int2[]\n)' at line 2")

-----------
QUERY:


-- but we can make a non-poly agg from a poly sfunc if types are OK
create aggregate build_group(int8, integer) (
  SFUNC = add_group,
  STYPE = int8[]
);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'build_group(int8, integer) (\n  SFUNC = add_group,\n  STYPE = int8[]\n)' at line 2")

-----------
QUERY:


-- check proper resolution of data types for polymorphic transfn/finalfn

create function first_el_transfn(anyarray, anyelement) returns anyarray as
'select $1 || $2' language sql immutable;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ', anyelement) returns anyarray as\n'select $1 || $2' language sql immutable' at line 3")

-----------
QUERY:


create function first_el(anyarray) returns anyelement as
'select $1[1]' language sql strict immutable;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ') returns anyelement as\n'select $1[1]' language sql strict immutable' at line 1")

-----------
QUERY:


create aggregate first_el_agg_f8(float8) (
  SFUNC = array_append,
  STYPE = float8[],
  FINALFUNC = first_el
);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'first_el_agg_f8(float8) (\n  SFUNC = array_append,\n  STYPE = float8[],\n  FINALFUN' at line 1")

-----------
QUERY:


create aggregate first_el_agg_any(anyelement) (
  SFUNC = first_el_transfn,
  STYPE = anyarray,
  FINALFUNC = first_el
);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'first_el_agg_any(anyelement) (\n  SFUNC = first_el_transfn,\n  STYPE = anyarray,\n ' at line 1")

-----------
QUERY:


select first_el_agg_f8(x::float8) from generate_series(1,10) x;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::float8) from generate_series(1,10) x' at line 1")

-----------
QUERY:

select first_el_agg_any(x) from generate_series(1,10) x;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(1,10) x' at line 1")

-----------
QUERY:

select first_el_agg_f8(x::float8) over(order by x) from generate_series(1,10) x;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::float8) over(order by x) from generate_series(1,10) x' at line 1")

-----------
QUERY:

select first_el_agg_any(x) over(order by x) from generate_series(1,10) x;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'over(order by x) from generate_series(1,10) x' at line 1")

-----------
QUERY:


-- check that we can apply functions taking ANYARRAY to pg_stats
select distinct array_ndims(histogram_bounds) from pg_stats
where histogram_bounds is not null;
RESULT:
	ERROR - (1146, "Table 'test.pg_stats' doesn't exist")

-----------
QUERY:


-- such functions must protect themselves if varying element type isn/* REPLACED */ ''t OK
-- (WHERE clause here is to avoid possibly getting a collation error instead)
select max(histogram_bounds) from pg_stats where tablename = 'pg_am';
RESULT:
	ERROR - (1146, "Table 'test.pg_stats' doesn't exist")

-----------
QUERY:


-- another corner case is the input functions for polymorphic pseudotypes
select array_in('{1,2,3}','int4'::regtype,-1);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::regtype,-1)' at line 2")

-----------
QUERY:
  -- this has historically worked
select * from array_in('{1,2,3}','int4'::regtype,-1);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '('{1,2,3}','int4'::regtype,-1)' at line 2")

-----------
QUERY:
  -- this not
select anyrange_in('[10,20)','int4range'::regtype,-1);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::regtype,-1)' at line 2")

-----------
QUERY:


-- test variadic polymorphic functions

create function myleast(variadic anyarray) returns anyelement as $$
  select min($1[i]) from generate_subscripts($1,1) g(i)
$$ language sql immutable strict;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'anyarray) returns anyelement as $$\n  select min($1[i]) from generate_subscripts(' at line 3")

-----------
QUERY:


select myleast(10, 1, 20, 33);
RESULT:
	ERROR - (1305, 'FUNCTION test.myleast does not exist')

-----------
QUERY:

select myleast(1.1, 0.22, 0.55);
RESULT:
	ERROR - (1305, 'FUNCTION test.myleast does not exist')

-----------
QUERY:

select myleast('z'::text);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::text)' at line 1")

-----------
QUERY:

select myleast();
RESULT:
	ERROR - (1305, 'FUNCTION test.myleast does not exist')

-----------
QUERY:
 -- fail

-- test with variadic call parameter
select myleast(variadic array[1,2,3,4,-1]);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[1,2,3,4,-1])' at line 4")

-----------
QUERY:

select myleast(variadic array[1.1, -5.5]);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[1.1, -5.5])' at line 1")

-----------
QUERY:


--test with empty variadic call parameter
select myleast(variadic array[]::int[]);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '--test with empty variadic call parameter\nselect myleast(variadic array[]::int[]' at line 1")

-----------
QUERY:


-- an example with some ordinary arguments too
create function concat(text, variadic anyarray) returns text as $$
  select array_to_string($2, $1);
$$ language sql immutable strict;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ', variadic anyarray) returns text as $$\n  select array_to_string($2, $1);\n$$ lan' at line 2")

-----------
QUERY:


select concat('%', 1, 2, 3, 4, 5);
RESULT:
	(('%12345',),)

-----------
QUERY:

select concat('|', 'a'::text, 'b', 'c');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::text, 'b', 'c')' at line 1")

-----------
QUERY:

select concat('|', variadic array[1,2,33]);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[1,2,33])' at line 1")

-----------
QUERY:

select concat('|', variadic array[]::int[]);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[]::int[])' at line 1")

-----------
QUERY:


drop function concat(text, anyarray);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(text, anyarray)' at line 1")

-----------
QUERY:


-- mix variadic with anyelement
create function formarray(anyelement, variadic anyarray) returns anyarray as $$
  select array_prepend($1, $2);
$$ language sql immutable strict;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ', variadic anyarray) returns anyarray as $$\n  select array_prepend($1, $2);\n$$ l' at line 2")

-----------
QUERY:


select formarray(1,2,3,4,5);
RESULT:
	ERROR - (1305, 'FUNCTION test.formarray does not exist')

-----------
QUERY:

select formarray(1.1, variadic array[1.2,55.5]);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[1.2,55.5])' at line 1")

-----------
QUERY:

select formarray(1.1, array[1.2,55.5]);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[1.2,55.5])' at line 1")

-----------
QUERY:
 -- fail without variadic
select formarray(1, 'x'::text);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::text)' at line 2")

-----------
QUERY:
 -- fail, type mismatch
select formarray(1, variadic array['x'::text]);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '['x'::text])' at line 2")

-----------
QUERY:
 -- fail, type mismatch

drop function formarray(anyelement, variadic anyarray);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(anyelement, variadic anyarray)' at line 3")

-----------
QUERY:


-- test pg_typeof() function
select pg_typeof(null);
RESULT:
	ERROR - (1305, 'FUNCTION test.pg_typeof does not exist')

-----------
QUERY:
           -- unknown
select pg_typeof(0);
RESULT:
	ERROR - (1305, 'FUNCTION test.pg_typeof does not exist')

-----------
QUERY:
              -- integer
select pg_typeof(0.0);
RESULT:
	ERROR - (1305, 'FUNCTION test.pg_typeof does not exist')

-----------
QUERY:
            -- numeric
select pg_typeof(1+1 = 2);
RESULT:
	ERROR - (1305, 'FUNCTION test.pg_typeof does not exist')

-----------
QUERY:
        -- boolean
select pg_typeof('x');
RESULT:
	ERROR - (1305, 'FUNCTION test.pg_typeof does not exist')

-----------
QUERY:
            -- unknown
select pg_typeof('' || '');
RESULT:
	ERROR - (1305, 'FUNCTION test.pg_typeof does not exist')

-----------
QUERY:
       -- text
select pg_typeof(pg_typeof(0));
RESULT:
	ERROR - (1305, 'FUNCTION test.pg_typeof does not exist')

-----------
QUERY:
   -- regtype
select pg_typeof(array[1.2,55.5]);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[1.2,55.5])' at line 2")

-----------
QUERY:
 -- numeric[]
select pg_typeof(myleast(10, 1, 20, 33));
RESULT:
	ERROR - (1305, 'FUNCTION test.pg_typeof does not exist')

-----------
QUERY:
  -- polymorphic input

-- test functions with default parameters

-- test basic functionality
create function dfunc(a int = 1, int = 2) returns int as $$
  select $1 + $2;
$$ language sql;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '= 1, int = 2) returns int as $$\n  select $1 + $2;\n$$ language sql' at line 6")

-----------
QUERY:


select dfunc();
RESULT:
	ERROR - (1305, 'FUNCTION test.dfunc does not exist')

-----------
QUERY:

select dfunc(10);
RESULT:
	ERROR - (1305, 'FUNCTION test.dfunc does not exist')

-----------
QUERY:

select dfunc(10, 20);
RESULT:
	ERROR - (1305, 'FUNCTION test.dfunc does not exist')

-----------
QUERY:

select dfunc(10, 20, 30);
RESULT:
	ERROR - (1305, 'FUNCTION test.dfunc does not exist')

-----------
QUERY:
  -- fail

drop function dfunc();
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '()' at line 3")

-----------
QUERY:
  -- fail
drop function dfunc(int);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(int)' at line 2")

-----------
QUERY:
  -- fail
drop function dfunc(int, int);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(int, int)' at line 2")

-----------
QUERY:
  -- ok

-- fail: defaults must be at end of argument list
create function dfunc(a int = 1, b int) returns int as $$
  select $1 + $2;
$$ language sql;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '= 1, b int) returns int as $$\n  select $1 + $2;\n$$ language sql' at line 4")

-----------
QUERY:


-- however, this should work:
create function dfunc(a int = 1, out sum int, b int = 2) as $$
  select $1 + $2;
$$ language sql;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '= 1, out sum int, b int = 2) as $$\n  select $1 + $2;\n$$ language sql' at line 2")

-----------
QUERY:


select dfunc();
RESULT:
	ERROR - (1305, 'FUNCTION test.dfunc does not exist')

-----------
QUERY:


-- verify it lists properly
-- \df dfunc

drop function dfunc(int, int);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(int, int)' at line 4")

-----------
QUERY:


-- check implicit coercion
create function dfunc(a int DEFAULT 1.0, int DEFAULT '-1') returns int as $$
  select $1 + $2;
$$ language sql;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'DEFAULT 1.0, int DEFAULT '-1') returns int as $$\n  select $1 + $2;\n$$ language s' at line 2")

-----------
QUERY:

select dfunc();
RESULT:
	ERROR - (1305, 'FUNCTION test.dfunc does not exist')

-----------
QUERY:


create function dfunc(a text DEFAULT 'Hello', b text DEFAULT 'World') returns text as $$
  select $1 || ', ' || $2;
$$ language sql;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'DEFAULT 'Hello', b text DEFAULT 'World') returns text as $$\n  select $1 || ', ' ' at line 1")

-----------
QUERY:


select dfunc();
RESULT:
	ERROR - (1305, 'FUNCTION test.dfunc does not exist')

-----------
QUERY:
  -- fail: which dfunc should be called? int or text
select dfunc('Hi');
RESULT:
	ERROR - (1305, 'FUNCTION test.dfunc does not exist')

-----------
QUERY:
  -- ok
select dfunc('Hi', 'City');
RESULT:
	ERROR - (1305, 'FUNCTION test.dfunc does not exist')

-----------
QUERY:
  -- ok
select dfunc(0);
RESULT:
	ERROR - (1305, 'FUNCTION test.dfunc does not exist')

-----------
QUERY:
  -- ok
select dfunc(10, 20);
RESULT:
	ERROR - (1305, 'FUNCTION test.dfunc does not exist')

-----------
QUERY:
  -- ok

drop function dfunc(int, int);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(int, int)' at line 3")

-----------
QUERY:

drop function dfunc(text, text);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(text, text)' at line 1")

-----------
QUERY:


create function dfunc(int = 1, int = 2) returns int as $$
  select 2;
$$ language sql;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'int = 1, int = 2) returns int as $$\n  select 2;\n$$ language sql' at line 1")

-----------
QUERY:


create function dfunc(int = 1, int = 2, int = 3, int = 4) returns int as $$
  select 4;
$$ language sql;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'int = 1, int = 2, int = 3, int = 4) returns int as $$\n  select 4;\n$$ language sq' at line 1")

-----------
QUERY:


-- Now, dfunc(nargs = 2) and dfunc(nargs = 4) are ambiguous when called
-- with 0 to 2 arguments.

select dfunc();
RESULT:
	ERROR - (1305, 'FUNCTION test.dfunc does not exist')

-----------
QUERY:
  -- fail
select dfunc(1);
RESULT:
	ERROR - (1305, 'FUNCTION test.dfunc does not exist')

-----------
QUERY:
  -- fail
select dfunc(1, 2);
RESULT:
	ERROR - (1305, 'FUNCTION test.dfunc does not exist')

-----------
QUERY:
  -- fail
select dfunc(1, 2, 3);
RESULT:
	ERROR - (1305, 'FUNCTION test.dfunc does not exist')

-----------
QUERY:
  -- ok
select dfunc(1, 2, 3, 4);
RESULT:
	ERROR - (1305, 'FUNCTION test.dfunc does not exist')

-----------
QUERY:
  -- ok

drop function dfunc(int, int);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(int, int)' at line 3")

-----------
QUERY:

drop function dfunc(int, int, int, int);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(int, int, int, int)' at line 1")

-----------
QUERY:


-- default values are not allowed for output parameters
create function dfunc(out int = 20) returns int as $$
  select 1;
$$ language sql;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'out int = 20) returns int as $$\n  select 1;\n$$ language sql' at line 2")

-----------
QUERY:


-- polymorphic parameter test
create function dfunc(anyelement = 'World'::text) returns text as $$
  select 'Hello, ' || $1::text;
$$ language sql;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '= 'World'::text) returns text as $$\n  select 'Hello, ' || $1::text;\n$$ language ' at line 2")

-----------
QUERY:


select dfunc();
RESULT:
	ERROR - (1305, 'FUNCTION test.dfunc does not exist')

-----------
QUERY:

select dfunc(0);
RESULT:
	ERROR - (1305, 'FUNCTION test.dfunc does not exist')

-----------
QUERY:

select dfunc(to_date('20081215','YYYYMMDD'));
RESULT:
	ERROR - (1305, 'FUNCTION test.dfunc does not exist')

-----------
QUERY:

select dfunc('City'::text);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::text)' at line 1")

-----------
QUERY:


drop function dfunc(anyelement);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(anyelement)' at line 1")

-----------
QUERY:


-- check defaults for variadics

create function dfunc(a variadic int[]) returns int as
$$ select array_upper($1, 1) $$ language sql;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'variadic int[]) returns int as\n$$ select array_upper($1, 1) $$ language sql' at line 3")

-----------
QUERY:


select dfunc();
RESULT:
	ERROR - (1305, 'FUNCTION test.dfunc does not exist')

-----------
QUERY:
  -- fail
select dfunc(10);
RESULT:
	ERROR - (1305, 'FUNCTION test.dfunc does not exist')

-----------
QUERY:

select dfunc(10,20);
RESULT:
	ERROR - (1305, 'FUNCTION test.dfunc does not exist')

-----------
QUERY:


create or replace function dfunc(a variadic int[] default array[]::int[]) returns int as
$$ select array_upper($1, 1) $$ language sql;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'function dfunc(a variadic int[] default array[]::int[]) returns int as\n$$ select' at line 1")

-----------
QUERY:


select dfunc();
RESULT:
	ERROR - (1305, 'FUNCTION test.dfunc does not exist')

-----------
QUERY:
  -- now ok
select dfunc(10);
RESULT:
	ERROR - (1305, 'FUNCTION test.dfunc does not exist')

-----------
QUERY:

select dfunc(10,20);
RESULT:
	ERROR - (1305, 'FUNCTION test.dfunc does not exist')

-----------
QUERY:


-- can/* REPLACED */ ''t remove the default once it exists
create or replace function dfunc(a variadic int[]) returns int as
$$ select array_upper($1, 1) $$ language sql;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'function dfunc(a variadic int[]) returns int as\n$$ select array_upper($1, 1) $$ ' at line 2")

-----------
QUERY:


-- \df dfunc

drop function dfunc(a variadic int[]);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(a variadic int[])' at line 3")

-----------
QUERY:


-- Ambiguity should be reported only if there/* REPLACED */ ''s not a better match available

create function dfunc(int = 1, int = 2, int = 3) returns int as $$
  select 3;
$$ language sql;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'int = 1, int = 2, int = 3) returns int as $$\n  select 3;\n$$ language sql' at line 3")

-----------
QUERY:


create function dfunc(int = 1, int = 2) returns int as $$
  select 2;
$$ language sql;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'int = 1, int = 2) returns int as $$\n  select 2;\n$$ language sql' at line 1")

-----------
QUERY:


create function dfunc(text) returns text as $$
  select $1;
$$ language sql;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ') returns text as $$\n  select $1;\n$$ language sql' at line 1")

-----------
QUERY:


-- dfunc(narg=2) and dfunc(narg=3) are ambiguous
select dfunc(1);
RESULT:
	ERROR - (1305, 'FUNCTION test.dfunc does not exist')

-----------
QUERY:
  -- fail

-- but this works since the ambiguous functions aren/* REPLACED */ ''t preferred anyway
select dfunc('Hi');
RESULT:
	ERROR - (1305, 'FUNCTION test.dfunc does not exist')

-----------
QUERY:


drop function dfunc(int, int, int);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(int, int, int)' at line 1")

-----------
QUERY:

drop function dfunc(int, int);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(int, int)' at line 1")

-----------
QUERY:

drop function dfunc(text);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(text)' at line 1")

-----------
QUERY:


--
-- Tests for named- and mixed-notation function calling
--

create function dfunc(a int, b int, c int = 0, d int = 0)
  returns table (a int, b int, c int, d int) as $$
  select $1, $2, $3, $4;
$$ language sql;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '= 0, d int = 0)\n  returns table (a int, b int, c int, d int) as $$\n  select $1, ' at line 5")

-----------
QUERY:


select (dfunc(10,20,30)).*;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '.*' at line 1")

-----------
QUERY:

select (dfunc(a := 10, b := 20, c := 30)).*;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ':= 10, b := 20, c := 30)).*' at line 1")

-----------
QUERY:

select * from dfunc(a := 10, b := 20);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(a := 10, b := 20)' at line 1")

-----------
QUERY:

select * from dfunc(b := 10, a := 20);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(b := 10, a := 20)' at line 1")

-----------
QUERY:

select * from dfunc(0);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(0)' at line 1")

-----------
QUERY:
  -- fail
select * from dfunc(1,2);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(1,2)' at line 2")

-----------
QUERY:

select * from dfunc(1,2,c := 3);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(1,2,c := 3)' at line 1")

-----------
QUERY:

select * from dfunc(1,2,d := 3);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(1,2,d := 3)' at line 1")

-----------
QUERY:


select * from dfunc(x := 20, b := 10, x := 30);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(x := 20, b := 10, x := 30)' at line 1")

-----------
QUERY:
  -- fail, duplicate name
select * from dfunc(10, b := 20, 30);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(10, b := 20, 30)' at line 2")

-----------
QUERY:
  -- fail, named args must be last
select * from dfunc(x := 10, b := 20, c := 30);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(x := 10, b := 20, c := 30)' at line 2")

-----------
QUERY:
  -- fail, unknown param
select * from dfunc(10, 10, a := 20);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(10, 10, a := 20)' at line 2")

-----------
QUERY:
  -- fail, a overlaps positional parameter
select * from dfunc(1,c := 2,d := 3);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(1,c := 2,d := 3)' at line 2")

-----------
QUERY:
 -- fail, no value for b

drop function dfunc(int, int, int, int);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(int, int, int, int)' at line 3")

-----------
QUERY:


-- test with different parameter types
create function dfunc(a varchar, b numeric, c date = current_date)
  returns table (a varchar, b numeric, c date) as $$
  select $1, $2, $3;
$$ language sql;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ', b numeric, c date = current_date)\n  returns table (a varchar, b numeric, c dat' at line 2")

-----------
QUERY:


select (dfunc('Hello World', 20, '2009-07-25'::date)).*;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::date)).*' at line 1")

-----------
QUERY:

select * from dfunc('Hello World', 20, '2009-07-25'::date);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '('Hello World', 20, '2009-07-25'::date)' at line 1")

-----------
QUERY:

select * from dfunc(c := '2009-07-25'::date, a := 'Hello World', b := 20);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(c := '2009-07-25'::date, a := 'Hello World', b := 20)' at line 1")

-----------
QUERY:

select * from dfunc('Hello World', b := 20, c := '2009-07-25'::date);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '('Hello World', b := 20, c := '2009-07-25'::date)' at line 1")

-----------
QUERY:

select * from dfunc('Hello World', c := '2009-07-25'::date, b := 20);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '('Hello World', c := '2009-07-25'::date, b := 20)' at line 1")

-----------
QUERY:

select * from dfunc('Hello World', c := 20, b := '2009-07-25'::date);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '('Hello World', c := 20, b := '2009-07-25'::date)' at line 1")

-----------
QUERY:
  -- fail

drop function dfunc(varchar, numeric, date);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(varchar, numeric, date)' at line 3")

-----------
QUERY:


-- test out parameters with named params
create function dfunc(a varchar = 'def a', out _a varchar, c numeric = NULL, out _c numeric)
returns record as $$
  select $1, $2;
$$ language sql;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '= 'def a', out _a varchar, c numeric = NULL, out _c numeric)\nreturns record as $' at line 2")

-----------
QUERY:


select (dfunc()).*;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '.*' at line 1")

-----------
QUERY:

select * from dfunc();
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '()' at line 1")

-----------
QUERY:

select * from dfunc('Hello', 100);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '('Hello', 100)' at line 1")

-----------
QUERY:

select * from dfunc(a := 'Hello', c := 100);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(a := 'Hello', c := 100)' at line 1")

-----------
QUERY:

select * from dfunc(c := 100, a := 'Hello');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(c := 100, a := 'Hello')' at line 1")

-----------
QUERY:

select * from dfunc('Hello');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '('Hello')' at line 1")

-----------
QUERY:

select * from dfunc('Hello', c := 100);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '('Hello', c := 100)' at line 1")

-----------
QUERY:

select * from dfunc(c := 100);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(c := 100)' at line 1")

-----------
QUERY:


-- fail, can no longer change an input parameter/* REPLACED */ ''s name
create or replace function dfunc(a varchar = 'def a', out _a varchar, x numeric = NULL, out _c numeric)
returns record as $$
  select $1, $2;
$$ language sql;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'function dfunc(a varchar = 'def a', out _a varchar, x numeric = NULL, out _c num' at line 2")

-----------
QUERY:


create or replace function dfunc(a varchar = 'def a', out _a varchar, numeric = NULL, out _c numeric)
returns record as $$
  select $1, $2;
$$ language sql;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'function dfunc(a varchar = 'def a', out _a varchar, numeric = NULL, out _c numer' at line 1")

-----------
QUERY:


drop function dfunc(varchar, numeric);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(varchar, numeric)' at line 1")

-----------
QUERY:


--fail, named parameters are not unique
create function testpolym(a int, a int) returns int as $$ select 1;$$ language sql;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '--fail, named parameters are not unique\ncreate function testpolym(a int, a int) ' at line 1")

-----------
QUERY:

create function testpolym(int, out a int, out a int) returns int as $$ select 1;$$ language sql;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'int, out a int, out a int) returns int as $$ select 1;$$ language sql' at line 1")

-----------
QUERY:

create function testpolym(out a int, inout a int) returns int as $$ select 1;$$ language sql;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'out a int, inout a int) returns int as $$ select 1;$$ language sql' at line 1")

-----------
QUERY:

create function testpolym(a int, inout a int) returns int as $$ select 1;$$ language sql;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'inout a int) returns int as $$ select 1;$$ language sql' at line 1")

-----------
QUERY:


-- valid
create function testpolym(a int, out a int) returns int as $$ select $1;$$ language sql;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'out a int) returns int as $$ select $1;$$ language sql' at line 2")

-----------
QUERY:

select testpolym(37);
RESULT:
	ERROR - (1305, 'FUNCTION test.testpolym does not exist')

-----------
QUERY:

drop function testpolym(int);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(int)' at line 1")

-----------
QUERY:

create function testpolym(a int) returns table(a int) as $$ select $1;$$ language sql;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'table(a int) as $$ select $1;$$ language sql' at line 1")

-----------
QUERY:

select * from testpolym(37);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(37)' at line 1")

-----------
QUERY:

drop function testpolym(int);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(int)' at line 1")

-----------
QUERY:


-- test polymorphic params and defaults
create function dfunc(a anyelement, b anyelement = null, flag bool = true)
returns anyelement as $$
  select case when $3 then $1 else $2 end;
$$ language sql;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'anyelement, b anyelement = null, flag bool = true)\nreturns anyelement as $$\n  se' at line 2")

-----------
QUERY:


select dfunc(1,2);
RESULT:
	ERROR - (1305, 'FUNCTION test.dfunc does not exist')

-----------
QUERY:

select dfunc('a'::text, 'b');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::text, 'b')' at line 1")

-----------
QUERY:
 -- positional notation with default

select dfunc(a := 1, b := 2);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ':= 1, b := 2)' at line 3")

-----------
QUERY:

select dfunc(a := 'a'::text, b := 'b');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ':= 'a'::text, b := 'b')' at line 1")

-----------
QUERY:

select dfunc(a := 'a'::text, b := 'b', flag := false);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ':= 'a'::text, b := 'b', flag := false)' at line 1")

-----------
QUERY:
 -- named notation

select dfunc(b := 'b'::text, a := 'a');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ':= 'b'::text, a := 'a')' at line 3")

-----------
QUERY:
 -- named notation with default
select dfunc(a := 'a'::text, flag := true);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ':= 'a'::text, flag := true)' at line 2")

-----------
QUERY:
 -- named notation with default
select dfunc(a := 'a'::text, flag := false);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ':= 'a'::text, flag := false)' at line 2")

-----------
QUERY:
 -- named notation with default
select dfunc(b := 'b'::text, a := 'a', flag := true);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ':= 'b'::text, a := 'a', flag := true)' at line 2")

-----------
QUERY:
 -- named notation

select dfunc('a'::text, 'b', false);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::text, 'b', false)' at line 3")

-----------
QUERY:
 -- full positional notation
select dfunc('a'::text, 'b', flag := false);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::text, 'b', flag := false)' at line 2")

-----------
QUERY:
 -- mixed notation
select dfunc('a'::text, 'b', true);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::text, 'b', true)' at line 2")

-----------
QUERY:
 -- full positional notation
select dfunc('a'::text, 'b', flag := true);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::text, 'b', flag := true)' at line 2")

-----------
QUERY:
 -- mixed notation

-- ansi/sql syntax
select dfunc(a => 1, b => 2);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '=> 1, b => 2)' at line 4")

-----------
QUERY:

select dfunc(a => 'a'::text, b => 'b');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '=> 'a'::text, b => 'b')' at line 1")

-----------
QUERY:

select dfunc(a => 'a'::text, b => 'b', flag => false);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '=> 'a'::text, b => 'b', flag => false)' at line 1")

-----------
QUERY:
 -- named notation

select dfunc(b => 'b'::text, a => 'a');
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '=> 'b'::text, a => 'a')' at line 3")

-----------
QUERY:
 -- named notation with default
select dfunc(a => 'a'::text, flag => true);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '=> 'a'::text, flag => true)' at line 2")

-----------
QUERY:
 -- named notation with default
select dfunc(a => 'a'::text, flag => false);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '=> 'a'::text, flag => false)' at line 2")

-----------
QUERY:
 -- named notation with default
select dfunc(b => 'b'::text, a => 'a', flag => true);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '=> 'b'::text, a => 'a', flag => true)' at line 2")

-----------
QUERY:
 -- named notation

select dfunc('a'::text, 'b', false);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::text, 'b', false)' at line 3")

-----------
QUERY:
 -- full positional notation
select dfunc('a'::text, 'b', flag => false);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::text, 'b', flag => false)' at line 2")

-----------
QUERY:
 -- mixed notation
select dfunc('a'::text, 'b', true);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::text, 'b', true)' at line 2")

-----------
QUERY:
 -- full positional notation
select dfunc('a'::text, 'b', flag => true);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '::text, 'b', flag => true)' at line 2")

-----------
QUERY:
 -- mixed notation

-- this tests lexer edge cases around =>
select dfunc(a =>-1);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '=>-1)' at line 4")

-----------
QUERY:

select dfunc(a =>+1);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '=>+1)' at line 1")

-----------
QUERY:

select dfunc(a =>/**/1);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '=>/**/1)' at line 1")

-----------
QUERY:

select dfunc(a =>--comment to be removed by psql
  1);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '=>--comment to be removed by psql\n  1)' at line 1")

-----------
QUERY:

-- need DO to protect the -- from psql
do $$
  declare r integer;
  begin
    select dfunc(a=>-- comment
      1) into r;
    raise info 'r = %', r;
  end;
$$;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'declare r integer;\n  begin\n    select dfunc(a=>-- comment\n      1) into r;\n    r' at line 3")

-----------
QUERY:


-- check reverse-listing of named-arg calls
CREATE VIEW dfview AS
   SELECT q1, q2,
     dfunc(q1,q2, flag := q1>q2) as c3,
     dfunc(q1, flag := q1<q2, b := q2) as c4
     FROM int8_tbl;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ':= q1>q2) as c3,\n     dfunc(q1, flag := q1<q2, b := q2) as c4\n     FROM int8_tbl' at line 4")

-----------
QUERY:


select * from dfview;
RESULT:
	ERROR - (1146, "Table 'test.dfview' doesn't exist")

-----------
QUERY:


-- \d+ dfview

drop view dfview;
RESULT:
	ERROR - (1051, "Unknown table 'test.dfview'")

-----------
QUERY:

drop function dfunc(anyelement, anyelement, bool);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(anyelement, anyelement, bool)' at line 1")

-----------
QUERY:


--
-- Tests for ANYCOMPATIBLE polymorphism family
--

create function anyctest(anycompatible, anycompatible)
returns anycompatible as $$
  select greatest($1, $2)
$$ language sql;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ', anycompatible)\nreturns anycompatible as $$\n  select greatest($1, $2)\n$$ langua' at line 5")

-----------
QUERY:


select x, pg_typeof(x) from anyctest(11, 12) x;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(11, 12) x' at line 1")

-----------
QUERY:

select x, pg_typeof(x) from anyctest(11, 12.3) x;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(11, 12.3) x' at line 1")

-----------
QUERY:

select x, pg_typeof(x) from anyctest(11, point(1,2)) x;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(11, point(1,2)) x' at line 1")

-----------
QUERY:
  -- fail
select x, pg_typeof(x) from anyctest('11', '12.3') x;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '('11', '12.3') x' at line 2")

-----------
QUERY:
  -- defaults to text

drop function anyctest(anycompatible, anycompatible);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(anycompatible, anycompatible)' at line 3")

-----------
QUERY:


create function anyctest(anycompatible, anycompatible)
returns anycompatiblearray as $$
  select array[$1, $2]
$$ language sql;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ', anycompatible)\nreturns anycompatiblearray as $$\n  select array[$1, $2]\n$$ lang' at line 1")

-----------
QUERY:


select x, pg_typeof(x) from anyctest(11, 12) x;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(11, 12) x' at line 1")

-----------
QUERY:

select x, pg_typeof(x) from anyctest(11, 12.3) x;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(11, 12.3) x' at line 1")

-----------
QUERY:

select x, pg_typeof(x) from anyctest(11, array[1,2]) x;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(11, array[1,2]) x' at line 1")

-----------
QUERY:
  -- fail

drop function anyctest(anycompatible, anycompatible);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(anycompatible, anycompatible)' at line 3")

-----------
QUERY:


create function anyctest(anycompatible, anycompatiblearray)
returns anycompatiblearray as $$
  select array[$1] || $2
$$ language sql;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ', anycompatiblearray)\nreturns anycompatiblearray as $$\n  select array[$1] || $2\n' at line 1")

-----------
QUERY:


select x, pg_typeof(x) from anyctest(11, array[12]) x;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(11, array[12]) x' at line 1")

-----------
QUERY:

select x, pg_typeof(x) from anyctest(11, array[12.3]) x;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(11, array[12.3]) x' at line 1")

-----------
QUERY:

select x, pg_typeof(x) from anyctest(12.3, array[13]) x;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(12.3, array[13]) x' at line 1")

-----------
QUERY:

select x, pg_typeof(x) from anyctest(12.3, '{13,14.4}') x;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(12.3, '{13,14.4}') x' at line 1")

-----------
QUERY:

select x, pg_typeof(x) from anyctest(11, array[point(1,2)]) x;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(11, array[point(1,2)]) x' at line 1")

-----------
QUERY:
  -- fail
select x, pg_typeof(x) from anyctest(11, 12) x;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(11, 12) x' at line 2")

-----------
QUERY:
  -- fail

drop function anyctest(anycompatible, anycompatiblearray);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(anycompatible, anycompatiblearray)' at line 3")

-----------
QUERY:


create function anyctest(anycompatible, anycompatiblerange)
returns anycompatiblerange as $$
  select $2
$$ language sql;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ', anycompatiblerange)\nreturns anycompatiblerange as $$\n  select $2\n$$ language s' at line 1")

-----------
QUERY:


select x, pg_typeof(x) from anyctest(11, int4range(4,7)) x;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(11, int4range(4,7)) x' at line 1")

-----------
QUERY:

select x, pg_typeof(x) from anyctest(11, numrange(4,7)) x;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(11, numrange(4,7)) x' at line 1")

-----------
QUERY:

select x, pg_typeof(x) from anyctest(11, 12) x;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(11, 12) x' at line 1")

-----------
QUERY:
  -- fail
select x, pg_typeof(x) from anyctest(11.2, int4range(4,7)) x;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(11.2, int4range(4,7)) x' at line 2")

-----------
QUERY:
  -- fail
select x, pg_typeof(x) from anyctest(11.2, '[4,7)') x;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(11.2, '[4,7)') x' at line 2")

-----------
QUERY:
  -- fail

drop function anyctest(anycompatible, anycompatiblerange);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(anycompatible, anycompatiblerange)' at line 3")

-----------
QUERY:


create function anyctest(anycompatiblerange, anycompatiblerange)
returns anycompatible as $$
  select lower($1) + upper($2)
$$ language sql;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ', anycompatiblerange)\nreturns anycompatible as $$\n  select lower($1) + upper($2)' at line 1")

-----------
QUERY:


select x, pg_typeof(x) from anyctest(int4range(11,12), int4range(4,7)) x;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(int4range(11,12), int4range(4,7)) x' at line 1")

-----------
QUERY:

select x, pg_typeof(x) from anyctest(int4range(11,12), numrange(4,7)) x;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(int4range(11,12), numrange(4,7)) x' at line 1")

-----------
QUERY:
 -- fail

drop function anyctest(anycompatiblerange, anycompatiblerange);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(anycompatiblerange, anycompatiblerange)' at line 3")

-----------
QUERY:


-- fail, can/* REPLACED */ ''t infer result type:
create function anyctest(anycompatible)
returns anycompatiblerange as $$
  select $1
$$ language sql;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ')\nreturns anycompatiblerange as $$\n  select $1\n$$ language sql' at line 2")

-----------
QUERY:


create function anyctest(anycompatible, anycompatiblemultirange)
returns anycompatiblemultirange as $$
  select $2
$$ language sql;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ', anycompatiblemultirange)\nreturns anycompatiblemultirange as $$\n  select $2\n$$ ' at line 1")

-----------
QUERY:


select x, pg_typeof(x) from anyctest(11, multirange(int4range(4,7))) x;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(11, multirange(int4range(4,7))) x' at line 1")

-----------
QUERY:

select x, pg_typeof(x) from anyctest(11, multirange(numrange(4,7))) x;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(11, multirange(numrange(4,7))) x' at line 1")

-----------
QUERY:

select x, pg_typeof(x) from anyctest(11, 12) x;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(11, 12) x' at line 1")

-----------
QUERY:
  -- fail
select x, pg_typeof(x) from anyctest(11.2, multirange(int4range(4,7))) x;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(11.2, multirange(int4range(4,7))) x' at line 2")

-----------
QUERY:
  -- fail
select x, pg_typeof(x) from anyctest(11.2, '{[4,7)}') x;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(11.2, '{[4,7)}') x' at line 2")

-----------
QUERY:
  -- fail

drop function anyctest(anycompatible, anycompatiblemultirange);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(anycompatible, anycompatiblemultirange)' at line 3")

-----------
QUERY:


create function anyctest(anycompatiblemultirange, anycompatiblemultirange)
returns anycompatible as $$
  select lower($1) + upper($2)
$$ language sql;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ', anycompatiblemultirange)\nreturns anycompatible as $$\n  select lower($1) + uppe' at line 1")

-----------
QUERY:


select x, pg_typeof(x) from anyctest(multirange(int4range(11,12)), multirange(int4range(4,7))) x;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(multirange(int4range(11,12)), multirange(int4range(4,7))) x' at line 1")

-----------
QUERY:

select x, pg_typeof(x) from anyctest(multirange(int4range(11,12)), multirange(numrange(4,7))) x;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(multirange(int4range(11,12)), multirange(numrange(4,7))) x' at line 1")

-----------
QUERY:
 -- fail

drop function anyctest(anycompatiblemultirange, anycompatiblemultirange);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(anycompatiblemultirange, anycompatiblemultirange)' at line 3")

-----------
QUERY:


-- fail, can/* REPLACED */ ''t infer result type:
create function anyctest(anycompatible)
returns anycompatiblemultirange as $$
  select $1
$$ language sql;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ')\nreturns anycompatiblemultirange as $$\n  select $1\n$$ language sql' at line 2")

-----------
QUERY:


create function anyctest(anycompatiblenonarray, anycompatiblenonarray)
returns anycompatiblearray as $$
  select array[$1, $2]
$$ language sql;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ', anycompatiblenonarray)\nreturns anycompatiblearray as $$\n  select array[$1, $2]' at line 1")

-----------
QUERY:


select x, pg_typeof(x) from anyctest(11, 12) x;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(11, 12) x' at line 1")

-----------
QUERY:

select x, pg_typeof(x) from anyctest(11, 12.3) x;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(11, 12.3) x' at line 1")

-----------
QUERY:

select x, pg_typeof(x) from anyctest(array[11], array[1,2]) x;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(array[11], array[1,2]) x' at line 1")

-----------
QUERY:
  -- fail

drop function anyctest(anycompatiblenonarray, anycompatiblenonarray);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(anycompatiblenonarray, anycompatiblenonarray)' at line 3")

-----------
QUERY:


create function anyctest(a anyelement, b anyarray,
                         c anycompatible, d anycompatible)
returns anycompatiblearray as $$
  select array[c, d]
$$ language sql;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'anyelement, b anyarray,\n                         c anycompatible, d anycompatibl' at line 1")

-----------
QUERY:


select x, pg_typeof(x) from anyctest(11, array[1, 2], 42, 34.5) x;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(11, array[1, 2], 42, 34.5) x' at line 1")

-----------
QUERY:

select x, pg_typeof(x) from anyctest(11, array[1, 2], point(1,2), point(3,4)) x;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(11, array[1, 2], point(1,2), point(3,4)) x' at line 1")

-----------
QUERY:

select x, pg_typeof(x) from anyctest(11, '{1,2}', point(1,2), '(3,4)') x;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(11, '{1,2}', point(1,2), '(3,4)') x' at line 1")

-----------
QUERY:

select x, pg_typeof(x) from anyctest(11, array[1, 2.2], 42, 34.5) x;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(11, array[1, 2.2], 42, 34.5) x' at line 1")

-----------
QUERY:
  -- fail

drop function anyctest(a anyelement, b anyarray,
                       c anycompatible, d anycompatible);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(a anyelement, b anyarray,\n                       c anycompatible, d anycompatib' at line 3")

-----------
QUERY:


create function anyctest(variadic anycompatiblearray)
returns anycompatiblearray as $$
  select $1
$$ language sql;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'anycompatiblearray)\nreturns anycompatiblearray as $$\n  select $1\n$$ language sql' at line 1")

-----------
QUERY:


select x, pg_typeof(x) from anyctest(11, 12) x;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(11, 12) x' at line 1")

-----------
QUERY:

select x, pg_typeof(x) from anyctest(11, 12.2) x;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(11, 12.2) x' at line 1")

-----------
QUERY:

select x, pg_typeof(x) from anyctest(11, '12') x;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(11, '12') x' at line 1")

-----------
QUERY:

select x, pg_typeof(x) from anyctest(11, '12.2') x;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(11, '12.2') x' at line 1")

-----------
QUERY:
  -- fail
select x, pg_typeof(x) from anyctest(variadic array[11, 12]) x;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(variadic array[11, 12]) x' at line 2")

-----------
QUERY:

select x, pg_typeof(x) from anyctest(variadic array[11, 12.2]) x;
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(variadic array[11, 12.2]) x' at line 1")

-----------
QUERY:


drop function anyctest(variadic anycompatiblearray);
RESULT:
	ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(variadic anycompatiblearray)' at line 1")
