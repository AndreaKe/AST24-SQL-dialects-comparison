
-----------
QUERY:
-- relative tablespace locations are not allowed
CREATE TABLESPACE regress_tblspace LOCATION 'relative';
RESULT:
	mySQL: ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'LOCATION 'relative'' at line 2")

-----------
QUERY:
 -- fail

-- empty tablespace locations are not usually allowed
CREATE TABLESPACE regress_tblspace LOCATION '';
RESULT:
	mySQL: ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'LOCATION ''' at line 4")

-----------
QUERY:
 -- fail

-- as a special developer-only option to allow us to use tablespaces
-- with streaming replication on the same server, an empty location
-- can be allowed as a way to say that the tablespace should be created
-- as a directory in pg_tblspc, rather than being a symlink
SET allow_in_place_tablespaces = true;
RESULT:
	mySQL: ERROR - (1193, "Unknown system variable 'allow_in_place_tablespaces'")

-----------
QUERY:


-- create a tablespace using WITH clause
CREATE TABLESPACE regress_tblspacewith LOCATION '' WITH (some_nonexistent_parameter = true);
RESULT:
	mySQL: ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'LOCATION '' WITH (some_nonexistent_parameter = true)' at line 2")

-----------
QUERY:
 -- fail
CREATE TABLESPACE regress_tblspacewith LOCATION '' WITH (random_page_cost = 3.0);
RESULT:
	mySQL: ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'LOCATION '' WITH (random_page_cost = 3.0)' at line 2")

-----------
QUERY:
 -- ok

-- check to see the parameter was used
SELECT spcoptions FROM pg_tablespace WHERE spcname = 'regress_tblspacewith';
RESULT:
	mySQL: ERROR - (1146, "Table 'test.pg_tablespace' doesn't exist")

-----------
QUERY:


-- drop the tablespace so we can re-use the location
DROP TABLESPACE regress_tblspacewith;
RESULT:
	mySQL: ERROR - (3510, "Tablespace regress_tblspacewith doesn't exist.")

-----------
QUERY:


-- This returns a relative path as of an effect of allow_in_place_tablespaces,
-- masking the tablespace OID used in the path name.
SELECT regexp_replace(pg_tablespace_location(oid), '(pg_tblspc)/(\d+)', '\1/NNN')
  FROM pg_tablespace  WHERE spcname = 'regress_tblspace';
RESULT:
	mySQL: ERROR - (1146, "Table 'test.pg_tablespace' doesn't exist")

-----------
QUERY:


-- try setting and resetting some properties for the new tablespace
ALTER TABLESPACE regress_tblspace SET (random_page_cost = 1.0, seq_page_cost = 1.1);
RESULT:
	mySQL: ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'SET (random_page_cost = 1.0, seq_page_cost = 1.1)' at line 2")

-----------
QUERY:

ALTER TABLESPACE regress_tblspace SET (some_nonexistent_parameter = true);
RESULT:
	mySQL: ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'SET (some_nonexistent_parameter = true)' at line 1")

-----------
QUERY:
  -- fail
ALTER TABLESPACE regress_tblspace RESET (random_page_cost = 2.0);
RESULT:
	mySQL: ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'RESET (random_page_cost = 2.0)' at line 2")

-----------
QUERY:
 -- fail
ALTER TABLESPACE regress_tblspace RESET (random_page_cost, effective_io_concurrency);
RESULT:
	mySQL: ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'RESET (random_page_cost, effective_io_concurrency)' at line 2")

-----------
QUERY:
 -- ok

-- REINDEX (TABLESPACE)
-- catalogs and system tablespaces
-- system catalog, fail
REINDEX (TABLESPACE regress_tblspace) TABLE pg_am;
RESULT:
	mySQL: ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'REINDEX (TABLESPACE regress_tblspace) TABLE pg_am' at line 6")

-----------
QUERY:

REINDEX (TABLESPACE regress_tblspace) TABLE CONCURRENTLY pg_am;
RESULT:
	mySQL: ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'REINDEX (TABLESPACE regress_tblspace) TABLE CONCURRENTLY pg_am' at line 1")

-----------
QUERY:

-- shared catalog, fail
REINDEX (TABLESPACE regress_tblspace) TABLE pg_authid;
RESULT:
	mySQL: ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'REINDEX (TABLESPACE regress_tblspace) TABLE pg_authid' at line 2")

-----------
QUERY:

REINDEX (TABLESPACE regress_tblspace) TABLE CONCURRENTLY pg_authid;
RESULT:
	mySQL: ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'REINDEX (TABLESPACE regress_tblspace) TABLE CONCURRENTLY pg_authid' at line 1")

-----------
QUERY:

-- toast relations, fail
REINDEX (TABLESPACE regress_tblspace) INDEX pg_toast.pg_toast_1260_index;
RESULT:
	mySQL: ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'REINDEX (TABLESPACE regress_tblspace) INDEX pg_toast.pg_toast_1260_index' at line 2")

-----------
QUERY:

REINDEX (TABLESPACE regress_tblspace) INDEX CONCURRENTLY pg_toast.pg_toast_1260_index;
RESULT:
	mySQL: ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'REINDEX (TABLESPACE regress_tblspace) INDEX CONCURRENTLY pg_toast.pg_toast_1260_' at line 1")

-----------
QUERY:

REINDEX (TABLESPACE regress_tblspace) TABLE pg_toast.pg_toast_1260;
RESULT:
	mySQL: ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'REINDEX (TABLESPACE regress_tblspace) TABLE pg_toast.pg_toast_1260' at line 1")

-----------
QUERY:

REINDEX (TABLESPACE regress_tblspace) TABLE CONCURRENTLY pg_toast.pg_toast_1260;
RESULT:
	mySQL: ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'REINDEX (TABLESPACE regress_tblspace) TABLE CONCURRENTLY pg_toast.pg_toast_1260' at line 1")

-----------
QUERY:

-- system catalog, fail
REINDEX (TABLESPACE pg_global) TABLE pg_authid;
RESULT:
	mySQL: ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'REINDEX (TABLESPACE pg_global) TABLE pg_authid' at line 2")

-----------
QUERY:

REINDEX (TABLESPACE pg_global) TABLE CONCURRENTLY pg_authid;
RESULT:
	mySQL: ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'REINDEX (TABLESPACE pg_global) TABLE CONCURRENTLY pg_authid' at line 1")

-----------
QUERY:


-- table with toast relation
CREATE TABLE regress_tblspace_test_tbl (num1 bigint, num2 double precision, t text);
RESULT:
	mySQL: []

-----------
QUERY:

INSERT INTO regress_tblspace_test_tbl (num1, num2, t)
  SELECT round(random()*100), random(), 'text'
  FROM generate_series(1, 10) s(i);
RESULT:
	mySQL: ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '()*100), random(), 'text'\n  FROM generate_series(1, 10) s(i)' at line 2")

-----------
QUERY:

CREATE INDEX regress_tblspace_test_tbl_idx ON regress_tblspace_test_tbl (num1);
RESULT:
	mySQL: []

-----------
QUERY:

-- move to global tablespace, fail
REINDEX (TABLESPACE pg_global) INDEX regress_tblspace_test_tbl_idx;
RESULT:
	mySQL: ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'REINDEX (TABLESPACE pg_global) INDEX regress_tblspace_test_tbl_idx' at line 2")

-----------
QUERY:

REINDEX (TABLESPACE pg_global) INDEX CONCURRENTLY regress_tblspace_test_tbl_idx;
RESULT:
	mySQL: ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'REINDEX (TABLESPACE pg_global) INDEX CONCURRENTLY regress_tblspace_test_tbl_idx' at line 1")

-----------
QUERY:


-- check transactional behavior of REINDEX (TABLESPACE)
BEGIN;
RESULT:
	mySQL: []

-----------
QUERY:

REINDEX (TABLESPACE regress_tblspace) INDEX regress_tblspace_test_tbl_idx;
RESULT:
	mySQL: ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'REINDEX (TABLESPACE regress_tblspace) INDEX regress_tblspace_test_tbl_idx' at line 1")

-----------
QUERY:

REINDEX (TABLESPACE regress_tblspace) TABLE regress_tblspace_test_tbl;
RESULT:
	mySQL: ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'REINDEX (TABLESPACE regress_tblspace) TABLE regress_tblspace_test_tbl' at line 1")

-----------
QUERY:

ROLLBACK;
RESULT:
	mySQL: []

-----------
QUERY:

-- no relation moved to the new tablespace
SELECT c.relname FROM pg_class c, pg_tablespace s
  WHERE c.reltablespace = s.oid AND s.spcname = 'regress_tblspace';
RESULT:
	mySQL: ERROR - (1146, "Table 'test.pg_class' doesn't exist")

-----------
QUERY:


-- check that all indexes are moved to a new tablespace with different
-- relfilenode.
-- Save first the existing relfilenode for the toast and main relations.
SELECT relfilenode as main_filenode FROM pg_class
  WHERE relname = 'regress_tblspace_test_tbl_idx' \gset
SELECT relfilenode as toast_filenode FROM pg_class
  WHERE oid =
    (SELECT i.indexrelid
       FROM pg_class c,
            pg_index i
       WHERE i.indrelid = c.reltoastrelid AND
             c.relname = 'regress_tblspace_test_tbl') \gset
REINDEX (TABLESPACE regress_tblspace) TABLE regress_tblspace_test_tbl;
RESULT:
	mySQL: ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '\\gset\nSELECT relfilenode as toast_filenode FROM pg_class\n  WHERE oid =\n    (SELE' at line 5")

-----------
QUERY:

SELECT c.relname FROM pg_class c, pg_tablespace s
  WHERE c.reltablespace = s.oid AND s.spcname = 'regress_tblspace'
  ORDER BY c.relname;
RESULT:
	mySQL: ERROR - (1146, "Table 'test.pg_class' doesn't exist")

-----------
QUERY:

ALTER TABLE regress_tblspace_test_tbl SET TABLESPACE regress_tblspace;
RESULT:
	mySQL: ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'SET TABLESPACE regress_tblspace' at line 1")

-----------
QUERY:

ALTER TABLE regress_tblspace_test_tbl SET TABLESPACE pg_default;
RESULT:
	mySQL: ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'SET TABLESPACE pg_default' at line 1")

-----------
QUERY:

SELECT c.relname FROM pg_class c, pg_tablespace s
  WHERE c.reltablespace = s.oid AND s.spcname = 'regress_tblspace'
  ORDER BY c.relname;
RESULT:
	mySQL: ERROR - (1146, "Table 'test.pg_class' doesn't exist")

-----------
QUERY:

-- Move back to the default tablespace.
ALTER INDEX regress_tblspace_test_tbl_idx SET TABLESPACE pg_default;
RESULT:
	mySQL: ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'INDEX regress_tblspace_test_tbl_idx SET TABLESPACE pg_default' at line 2")

-----------
QUERY:

SELECT c.relname FROM pg_class c, pg_tablespace s
  WHERE c.reltablespace = s.oid AND s.spcname = 'regress_tblspace'
  ORDER BY c.relname;
RESULT:
	mySQL: ERROR - (1146, "Table 'test.pg_class' doesn't exist")

-----------
QUERY:

REINDEX (TABLESPACE regress_tblspace, CONCURRENTLY) TABLE regress_tblspace_test_tbl;
RESULT:
	mySQL: ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'REINDEX (TABLESPACE regress_tblspace, CONCURRENTLY) TABLE regress_tblspace_test_' at line 1")

-----------
QUERY:

SELECT c.relname FROM pg_class c, pg_tablespace s
  WHERE c.reltablespace = s.oid AND s.spcname = 'regress_tblspace'
  ORDER BY c.relname;
RESULT:
	mySQL: ERROR - (1146, "Table 'test.pg_class' doesn't exist")

-----------
QUERY:

SELECT relfilenode = :main_filenode AS main_same FROM pg_class
  WHERE relname = 'regress_tblspace_test_tbl_idx';
RESULT:
	mySQL: ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ':main_filenode AS main_same FROM pg_class\n  WHERE relname = 'regress_tblspace_te' at line 1")

-----------
QUERY:

SELECT relfilenode = :toast_filenode as toast_same FROM pg_class
  WHERE oid =
    (SELECT i.indexrelid
       FROM pg_class c,
            pg_index i
       WHERE i.indrelid = c.reltoastrelid AND
             c.relname = 'regress_tblspace_test_tbl');
RESULT:
	mySQL: ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ':toast_filenode as toast_same FROM pg_class\n  WHERE oid =\n    (SELECT i.indexrel' at line 1")

-----------
QUERY:

DROP TABLE regress_tblspace_test_tbl;
RESULT:
	mySQL: []

-----------
QUERY:


-- REINDEX (TABLESPACE) with partitions
-- Create a partition tree and check the set of relations reindexed
-- with their new tablespace.
CREATE TABLE tbspace_reindex_part (c1 int, c2 int) PARTITION BY RANGE (c1);
RESULT:
	mySQL: ERROR - (1492, 'For RANGE partitions each partition must be defined')

-----------
QUERY:

CREATE TABLE tbspace_reindex_part_0 PARTITION OF tbspace_reindex_part
  FOR VALUES FROM (0) TO (10) PARTITION BY list (c2);
RESULT:
	mySQL: ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'OF tbspace_reindex_part\n  FOR VALUES FROM (0) TO (10) PARTITION BY list (c2)' at line 1")

-----------
QUERY:

CREATE TABLE tbspace_reindex_part_0_1 PARTITION OF tbspace_reindex_part_0
  FOR VALUES IN (1);
RESULT:
	mySQL: ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'OF tbspace_reindex_part_0\n  FOR VALUES IN (1)' at line 1")

-----------
QUERY:

CREATE TABLE tbspace_reindex_part_0_2 PARTITION OF tbspace_reindex_part_0
  FOR VALUES IN (2);
RESULT:
	mySQL: ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'OF tbspace_reindex_part_0\n  FOR VALUES IN (2)' at line 1")

-----------
QUERY:

-- This partitioned table will have no partitions.
CREATE TABLE tbspace_reindex_part_10 PARTITION OF tbspace_reindex_part
   FOR VALUES FROM (10) TO (20) PARTITION BY list (c2);
RESULT:
	mySQL: ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'OF tbspace_reindex_part\n   FOR VALUES FROM (10) TO (20) PARTITION BY list (c2)' at line 2")

-----------
QUERY:

-- Create some partitioned indexes
CREATE INDEX tbspace_reindex_part_index ON ONLY tbspace_reindex_part (c1);
RESULT:
	mySQL: ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'tbspace_reindex_part (c1)' at line 2")

-----------
QUERY:

CREATE INDEX tbspace_reindex_part_index_0 ON ONLY tbspace_reindex_part_0 (c1);
RESULT:
	mySQL: ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'tbspace_reindex_part_0 (c1)' at line 1")

-----------
QUERY:

ALTER INDEX tbspace_reindex_part_index ATTACH PARTITION tbspace_reindex_part_index_0;
RESULT:
	mySQL: ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'INDEX tbspace_reindex_part_index ATTACH PARTITION tbspace_reindex_part_index_0' at line 1")

-----------
QUERY:

-- This partitioned index will have no partitions.
CREATE INDEX tbspace_reindex_part_index_10 ON ONLY tbspace_reindex_part_10 (c1);
RESULT:
	mySQL: ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'tbspace_reindex_part_10 (c1)' at line 2")

-----------
QUERY:

ALTER INDEX tbspace_reindex_part_index ATTACH PARTITION tbspace_reindex_part_index_10;
RESULT:
	mySQL: ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'INDEX tbspace_reindex_part_index ATTACH PARTITION tbspace_reindex_part_index_10' at line 1")

-----------
QUERY:

CREATE INDEX tbspace_reindex_part_index_0_1 ON ONLY tbspace_reindex_part_0_1 (c1);
RESULT:
	mySQL: ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'tbspace_reindex_part_0_1 (c1)' at line 1")

-----------
QUERY:

ALTER INDEX tbspace_reindex_part_index_0 ATTACH PARTITION tbspace_reindex_part_index_0_1;
RESULT:
	mySQL: ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'INDEX tbspace_reindex_part_index_0 ATTACH PARTITION tbspace_reindex_part_index_0' at line 1")

-----------
QUERY:

CREATE INDEX tbspace_reindex_part_index_0_2 ON ONLY tbspace_reindex_part_0_2 (c1);
RESULT:
	mySQL: ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'tbspace_reindex_part_0_2 (c1)' at line 1")

-----------
QUERY:

ALTER INDEX tbspace_reindex_part_index_0 ATTACH PARTITION tbspace_reindex_part_index_0_2;
RESULT:
	mySQL: ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'INDEX tbspace_reindex_part_index_0 ATTACH PARTITION tbspace_reindex_part_index_0' at line 1")

-----------
QUERY:

SELECT relid, parentrelid, level FROM pg_partition_tree('tbspace_reindex_part_index')
  ORDER BY relid, level;
RESULT:
	mySQL: ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '('tbspace_reindex_part_index')\n  ORDER BY relid, level' at line 1")

-----------
QUERY:

-- Track the original tablespace, relfilenode and OID of each index
-- in the tree.
CREATE TEMP TABLE reindex_temp_before AS
  SELECT oid, relname, relfilenode, reltablespace
  FROM pg_class
    WHERE relname ~ 'tbspace_reindex_part_index';
RESULT:
	mySQL: ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'TEMP TABLE reindex_temp_before AS\n  SELECT oid, relname, relfilenode, reltablesp' at line 3")

-----------
QUERY:

REINDEX (TABLESPACE regress_tblspace, CONCURRENTLY) TABLE tbspace_reindex_part;
RESULT:
	mySQL: ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'REINDEX (TABLESPACE regress_tblspace, CONCURRENTLY) TABLE tbspace_reindex_part' at line 1")

-----------
QUERY:

-- REINDEX CONCURRENTLY changes the OID of the old relation, hence a check
-- based on the relation name below.
SELECT b.relname,
       CASE WHEN a.relfilenode = b.relfilenode THEN 'relfilenode is unchanged'
       ELSE 'relfilenode has changed' END AS filenode,
       CASE WHEN a.reltablespace = b.reltablespace THEN 'reltablespace is unchanged'
       ELSE 'reltablespace has changed' END AS tbspace
  FROM reindex_temp_before b JOIN pg_class a ON b.relname = a.relname
  ORDER BY 1;
RESULT:
	mySQL: ERROR - (1146, "Table 'test.reindex_temp_before' doesn't exist")

-----------
QUERY:

DROP TABLE tbspace_reindex_part;
RESULT:
	mySQL: ERROR - (1051, "Unknown table 'test.tbspace_reindex_part'")

-----------
QUERY:


-- create a schema we can use
CREATE SCHEMA testschema;
RESULT:
	mySQL: []

-----------
QUERY:


-- try a table
CREATE TABLE testschema.foo (i int) TABLESPACE regress_tblspace;
RESULT:
	mySQL: ERROR - (3510, "Tablespace regress_tblspace doesn't exist.")

-----------
QUERY:

SELECT relname, spcname FROM pg_catalog.pg_tablespace t, pg_catalog.pg_class c
    where c.reltablespace = t.oid AND c.relname = 'foo';
RESULT:
	mySQL: ERROR - (1049, "Unknown database 'pg_catalog'")

-----------
QUERY:


INSERT INTO testschema.foo VALUES(1);
RESULT:
	mySQL: ERROR - (1146, "Table 'testschema.foo' doesn't exist")

-----------
QUERY:

INSERT INTO testschema.foo VALUES(2);
RESULT:
	mySQL: ERROR - (1146, "Table 'testschema.foo' doesn't exist")

-----------
QUERY:


-- tables from dynamic sources
CREATE TABLE testschema.asselect TABLESPACE regress_tblspace AS SELECT 1;
RESULT:
	mySQL: ERROR - (3510, "Tablespace regress_tblspace doesn't exist.")

-----------
QUERY:

SELECT relname, spcname FROM pg_catalog.pg_tablespace t, pg_catalog.pg_class c
    where c.reltablespace = t.oid AND c.relname = 'asselect';
RESULT:
	mySQL: ERROR - (1049, "Unknown database 'pg_catalog'")

-----------
QUERY:


PREPARE selectsource(int) AS SELECT $1;
RESULT:
	mySQL: ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(int) AS SELECT $1' at line 1")

-----------
QUERY:

CREATE TABLE testschema.asexecute TABLESPACE regress_tblspace
    AS EXECUTE selectsource(2);
RESULT:
	mySQL: ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'EXECUTE selectsource(2)' at line 2")

-----------
QUERY:

SELECT relname, spcname FROM pg_catalog.pg_tablespace t, pg_catalog.pg_class c
    where c.reltablespace = t.oid AND c.relname = 'asexecute';
RESULT:
	mySQL: ERROR - (1049, "Unknown database 'pg_catalog'")

-----------
QUERY:


-- index
CREATE INDEX foo_idx on testschema.foo(i) TABLESPACE regress_tblspace;
RESULT:
	mySQL: ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'TABLESPACE regress_tblspace' at line 2")

-----------
QUERY:

SELECT relname, spcname FROM pg_catalog.pg_tablespace t, pg_catalog.pg_class c
    where c.reltablespace = t.oid AND c.relname = 'foo_idx';
RESULT:
	mySQL: ERROR - (1049, "Unknown database 'pg_catalog'")

-----------
QUERY:


-- check \d output
-- \d testschema.foo
-- \d testschema.foo_idx

--
-- partitioned table
--
CREATE TABLE testschema.part (a int) PARTITION BY LIST (a);
RESULT:
	mySQL: ERROR - (1492, 'For LIST partitions each partition must be defined')

-----------
QUERY:

SET default_tablespace TO pg_global;
RESULT:
	mySQL: ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'TO pg_global' at line 1")

-----------
QUERY:

CREATE TABLE testschema.part_1 PARTITION OF testschema.part FOR VALUES IN (1);
RESULT:
	mySQL: ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'OF testschema.part FOR VALUES IN (1)' at line 1")

-----------
QUERY:

RESET default_tablespace;
RESULT:
	mySQL: ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'default_tablespace' at line 1")

-----------
QUERY:

CREATE TABLE testschema.part_1 PARTITION OF testschema.part FOR VALUES IN (1);
RESULT:
	mySQL: ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'OF testschema.part FOR VALUES IN (1)' at line 1")

-----------
QUERY:

SET default_tablespace TO regress_tblspace;
RESULT:
	mySQL: ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'TO regress_tblspace' at line 1")

-----------
QUERY:

CREATE TABLE testschema.part_2 PARTITION OF testschema.part FOR VALUES IN (2);
RESULT:
	mySQL: ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'OF testschema.part FOR VALUES IN (2)' at line 1")

-----------
QUERY:

SET default_tablespace TO pg_global;
RESULT:
	mySQL: ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'TO pg_global' at line 1")

-----------
QUERY:

CREATE TABLE testschema.part_3 PARTITION OF testschema.part FOR VALUES IN (3);
RESULT:
	mySQL: ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'OF testschema.part FOR VALUES IN (3)' at line 1")

-----------
QUERY:

ALTER TABLE testschema.part SET TABLESPACE regress_tblspace;
RESULT:
	mySQL: ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'SET TABLESPACE regress_tblspace' at line 1")

-----------
QUERY:

CREATE TABLE testschema.part_3 PARTITION OF testschema.part FOR VALUES IN (3);
RESULT:
	mySQL: ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'OF testschema.part FOR VALUES IN (3)' at line 1")

-----------
QUERY:

CREATE TABLE testschema.part_4 PARTITION OF testschema.part FOR VALUES IN (4)
  TABLESPACE pg_default;
RESULT:
	mySQL: ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'OF testschema.part FOR VALUES IN (4)\n  TABLESPACE pg_default' at line 1")

-----------
QUERY:

CREATE TABLE testschema.part_56 PARTITION OF testschema.part FOR VALUES IN (5, 6)
  PARTITION BY LIST (a);
RESULT:
	mySQL: ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'OF testschema.part FOR VALUES IN (5, 6)\n  PARTITION BY LIST (a)' at line 1")

-----------
QUERY:

ALTER TABLE testschema.part SET TABLESPACE pg_default;
RESULT:
	mySQL: ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'SET TABLESPACE pg_default' at line 1")

-----------
QUERY:

CREATE TABLE testschema.part_78 PARTITION OF testschema.part FOR VALUES IN (7, 8)
  PARTITION BY LIST (a);
RESULT:
	mySQL: ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'OF testschema.part FOR VALUES IN (7, 8)\n  PARTITION BY LIST (a)' at line 1")

-----------
QUERY:

CREATE TABLE testschema.part_910 PARTITION OF testschema.part FOR VALUES IN (9, 10)
  PARTITION BY LIST (a) TABLESPACE regress_tblspace;
RESULT:
	mySQL: ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'OF testschema.part FOR VALUES IN (9, 10)\n  PARTITION BY LIST (a) TABLESPACE regr' at line 1")

-----------
QUERY:

RESET default_tablespace;
RESULT:
	mySQL: ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'default_tablespace' at line 1")

-----------
QUERY:

CREATE TABLE testschema.part_78 PARTITION OF testschema.part FOR VALUES IN (7, 8)
  PARTITION BY LIST (a);
RESULT:
	mySQL: ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'OF testschema.part FOR VALUES IN (7, 8)\n  PARTITION BY LIST (a)' at line 1")

-----------
QUERY:


SELECT relname, spcname FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON (c.relnamespace = n.oid)
    LEFT JOIN pg_catalog.pg_tablespace t ON c.reltablespace = t.oid
    where c.relname LIKE 'part%' AND n.nspname = 'testschema' order by relname;
RESULT:
	mySQL: ERROR - (1049, "Unknown database 'pg_catalog'")

-----------
QUERY:

RESET default_tablespace;
RESULT:
	mySQL: ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'default_tablespace' at line 1")

-----------
QUERY:

DROP TABLE testschema.part;
RESULT:
	mySQL: ERROR - (1051, "Unknown table 'testschema.part'")

-----------
QUERY:


-- partitioned index
CREATE TABLE testschema.part (a int) PARTITION BY LIST (a);
RESULT:
	mySQL: ERROR - (1492, 'For LIST partitions each partition must be defined')

-----------
QUERY:

CREATE TABLE testschema.part1 PARTITION OF testschema.part FOR VALUES IN (1);
RESULT:
	mySQL: ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'OF testschema.part FOR VALUES IN (1)' at line 1")

-----------
QUERY:

CREATE INDEX part_a_idx ON testschema.part (a) TABLESPACE regress_tblspace;
RESULT:
	mySQL: ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'TABLESPACE regress_tblspace' at line 1")

-----------
QUERY:

CREATE TABLE testschema.part2 PARTITION OF testschema.part FOR VALUES IN (2);
RESULT:
	mySQL: ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'OF testschema.part FOR VALUES IN (2)' at line 1")

-----------
QUERY:

SELECT relname, spcname FROM pg_catalog.pg_tablespace t, pg_catalog.pg_class c
    where c.reltablespace = t.oid AND c.relname LIKE 'part%_idx' ORDER BY relname;
RESULT:
	mySQL: ERROR - (1049, "Unknown database 'pg_catalog'")

-----------
QUERY:

-- \d testschema.part
-- \d+ testschema.part
-- \d testschema.part1
-- \d+ testschema.part1
-- \d testschema.part_a_idx
-- \d+ testschema.part_a_idx

-- partitioned rels cannot specify the default tablespace.  These fail:
CREATE TABLE testschema.dflt (a int PRIMARY KEY) PARTITION BY LIST (a) TABLESPACE pg_default;
RESULT:
	mySQL: ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'TABLESPACE pg_default' at line 9")

-----------
QUERY:

CREATE TABLE testschema.dflt (a int PRIMARY KEY USING INDEX TABLESPACE pg_default) PARTITION BY LIST (a);
RESULT:
	mySQL: ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'USING INDEX TABLESPACE pg_default) PARTITION BY LIST (a)' at line 1")

-----------
QUERY:

SET default_tablespace TO 'pg_default';
RESULT:
	mySQL: ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'TO 'pg_default'' at line 1")

-----------
QUERY:

CREATE TABLE testschema.dflt (a int PRIMARY KEY) PARTITION BY LIST (a) TABLESPACE regress_tblspace;
RESULT:
	mySQL: ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'TABLESPACE regress_tblspace' at line 1")

-----------
QUERY:

CREATE TABLE testschema.dflt (a int PRIMARY KEY USING INDEX TABLESPACE regress_tblspace) PARTITION BY LIST (a);
RESULT:
	mySQL: ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'USING INDEX TABLESPACE regress_tblspace) PARTITION BY LIST (a)' at line 1")

-----------
QUERY:

-- but these work:
CREATE TABLE testschema.dflt (a int PRIMARY KEY USING INDEX TABLESPACE regress_tblspace) PARTITION BY LIST (a) TABLESPACE regress_tblspace;
RESULT:
	mySQL: ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'USING INDEX TABLESPACE regress_tblspace) PARTITION BY LIST (a) TABLESPACE regres' at line 2")

-----------
QUERY:

SET default_tablespace TO '';
RESULT:
	mySQL: ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'TO ''' at line 1")

-----------
QUERY:

CREATE TABLE testschema.dflt2 (a int PRIMARY KEY) PARTITION BY LIST (a);
RESULT:
	mySQL: ERROR - (1492, 'For LIST partitions each partition must be defined')

-----------
QUERY:

DROP TABLE testschema.dflt, testschema.dflt2;
RESULT:
	mySQL: ERROR - (1051, "Unknown table 'testschema.dflt,testschema.dflt2'")

-----------
QUERY:


-- check that default_tablespace doesn/* REPLACED */''t affect ALTER TABLE index rebuilds
CREATE TABLE testschema.test_default_tab(id bigint) TABLESPACE regress_tblspace;
RESULT:
	mySQL: ERROR - (3510, "Tablespace regress_tblspace doesn't exist.")

-----------
QUERY:

INSERT INTO testschema.test_default_tab VALUES (1);
RESULT:
	mySQL: ERROR - (1146, "Table 'testschema.test_default_tab' doesn't exist")

-----------
QUERY:

CREATE INDEX test_index1 on testschema.test_default_tab (id);
RESULT:
	mySQL: ERROR - (1146, "Table 'testschema.test_default_tab' doesn't exist")

-----------
QUERY:

CREATE INDEX test_index2 on testschema.test_default_tab (id) TABLESPACE regress_tblspace;
RESULT:
	mySQL: ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'TABLESPACE regress_tblspace' at line 1")

-----------
QUERY:

ALTER TABLE testschema.test_default_tab ADD CONSTRAINT test_index3 PRIMARY KEY (id);
RESULT:
	mySQL: ERROR - (1146, "Table 'testschema.test_default_tab' doesn't exist")

-----------
QUERY:

ALTER TABLE testschema.test_default_tab ADD CONSTRAINT test_index4 UNIQUE (id) USING INDEX TABLESPACE regress_tblspace;
RESULT:
	mySQL: ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'INDEX TABLESPACE regress_tblspace' at line 1")

-----------
QUERY:


-- \d testschema.test_index1
-- \d testschema.test_index2
-- \d testschema.test_index3
-- \d testschema.test_index4
-- use a custom tablespace for default_tablespace
SET default_tablespace TO regress_tblspace;
RESULT:
	mySQL: ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'TO regress_tblspace' at line 6")

-----------
QUERY:

-- tablespace should not change if no rewrite
ALTER TABLE testschema.test_default_tab ALTER id TYPE bigint;
RESULT:
	mySQL: ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'TYPE bigint' at line 2")

-----------
QUERY:

-- \d testschema.test_index1
-- \d testschema.test_index2
-- \d testschema.test_index3
-- \d testschema.test_index4
SELECT * FROM testschema.test_default_tab;
RESULT:
	mySQL: ERROR - (1146, "Table 'testschema.test_default_tab' doesn't exist")

-----------
QUERY:

-- tablespace should not change even if there is an index rewrite
ALTER TABLE testschema.test_default_tab ALTER id TYPE int;
RESULT:
	mySQL: ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'TYPE int' at line 2")

-----------
QUERY:

-- \d testschema.test_index1
-- \d testschema.test_index2
-- \d testschema.test_index3
-- \d testschema.test_index4
SELECT * FROM testschema.test_default_tab;
RESULT:
	mySQL: ERROR - (1146, "Table 'testschema.test_default_tab' doesn't exist")

-----------
QUERY:

-- now use the default tablespace for default_tablespace
SET default_tablespace TO '';
RESULT:
	mySQL: ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'TO ''' at line 2")

-----------
QUERY:

-- tablespace should not change if no rewrite
ALTER TABLE testschema.test_default_tab ALTER id TYPE int;
RESULT:
	mySQL: ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'TYPE int' at line 2")

-----------
QUERY:

-- \d testschema.test_index1
-- \d testschema.test_index2
-- \d testschema.test_index3
-- \d testschema.test_index4
-- tablespace should not change even if there is an index rewrite
ALTER TABLE testschema.test_default_tab ALTER id TYPE bigint;
RESULT:
	mySQL: ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'TYPE bigint' at line 6")

-----------
QUERY:

-- \d testschema.test_index1
-- \d testschema.test_index2
-- \d testschema.test_index3
-- \d testschema.test_index4
DROP TABLE testschema.test_default_tab;
RESULT:
	mySQL: ERROR - (1051, "Unknown table 'testschema.test_default_tab'")

-----------
QUERY:


-- check that default_tablespace doesn/* REPLACED */''t affect ALTER TABLE index rebuilds
-- (this time with a partitioned table)
CREATE TABLE testschema.test_default_tab_p(id bigint, val bigint)
    PARTITION BY LIST (id) TABLESPACE regress_tblspace;
RESULT:
	mySQL: ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'TABLESPACE regress_tblspace' at line 4")

-----------
QUERY:

CREATE TABLE testschema.test_default_tab_p1 PARTITION OF testschema.test_default_tab_p
    FOR VALUES IN (1);
RESULT:
	mySQL: ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'OF testschema.test_default_tab_p\n    FOR VALUES IN (1)' at line 1")

-----------
QUERY:

INSERT INTO testschema.test_default_tab_p VALUES (1);
RESULT:
	mySQL: ERROR - (1146, "Table 'testschema.test_default_tab_p' doesn't exist")

-----------
QUERY:

CREATE INDEX test_index1 on testschema.test_default_tab_p (val);
RESULT:
	mySQL: ERROR - (1146, "Table 'testschema.test_default_tab_p' doesn't exist")

-----------
QUERY:

CREATE INDEX test_index2 on testschema.test_default_tab_p (val) TABLESPACE regress_tblspace;
RESULT:
	mySQL: ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'TABLESPACE regress_tblspace' at line 1")

-----------
QUERY:

ALTER TABLE testschema.test_default_tab_p ADD CONSTRAINT test_index3 PRIMARY KEY (id);
RESULT:
	mySQL: ERROR - (1146, "Table 'testschema.test_default_tab_p' doesn't exist")

-----------
QUERY:

ALTER TABLE testschema.test_default_tab_p ADD CONSTRAINT test_index4 UNIQUE (id) USING INDEX TABLESPACE regress_tblspace;
RESULT:
	mySQL: ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'INDEX TABLESPACE regress_tblspace' at line 1")

-----------
QUERY:


-- \d testschema.test_index1
-- \d testschema.test_index2
-- \d testschema.test_index3
-- \d testschema.test_index4
-- use a custom tablespace for default_tablespace
SET default_tablespace TO regress_tblspace;
RESULT:
	mySQL: ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'TO regress_tblspace' at line 6")

-----------
QUERY:

-- tablespace should not change if no rewrite
ALTER TABLE testschema.test_default_tab_p ALTER val TYPE bigint;
RESULT:
	mySQL: ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'TYPE bigint' at line 2")

-----------
QUERY:

-- \d testschema.test_index1
-- \d testschema.test_index2
-- \d testschema.test_index3
-- \d testschema.test_index4
SELECT * FROM testschema.test_default_tab_p;
RESULT:
	mySQL: ERROR - (1146, "Table 'testschema.test_default_tab_p' doesn't exist")

-----------
QUERY:

-- tablespace should not change even if there is an index rewrite
ALTER TABLE testschema.test_default_tab_p ALTER val TYPE int;
RESULT:
	mySQL: ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'TYPE int' at line 2")

-----------
QUERY:

-- \d testschema.test_index1
-- \d testschema.test_index2
-- \d testschema.test_index3
-- \d testschema.test_index4
SELECT * FROM testschema.test_default_tab_p;
RESULT:
	mySQL: ERROR - (1146, "Table 'testschema.test_default_tab_p' doesn't exist")

-----------
QUERY:

-- now use the default tablespace for default_tablespace
SET default_tablespace TO '';
RESULT:
	mySQL: ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'TO ''' at line 2")

-----------
QUERY:

-- tablespace should not change if no rewrite
ALTER TABLE testschema.test_default_tab_p ALTER val TYPE int;
RESULT:
	mySQL: ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'TYPE int' at line 2")

-----------
QUERY:

-- \d testschema.test_index1
-- \d testschema.test_index2
-- \d testschema.test_index3
-- \d testschema.test_index4
-- tablespace should not change even if there is an index rewrite
ALTER TABLE testschema.test_default_tab_p ALTER val TYPE bigint;
RESULT:
	mySQL: ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'TYPE bigint' at line 6")

-----------
QUERY:

-- \d testschema.test_index1
-- \d testschema.test_index2
-- \d testschema.test_index3
-- \d testschema.test_index4
DROP TABLE testschema.test_default_tab_p;
RESULT:
	mySQL: ERROR - (1051, "Unknown table 'testschema.test_default_tab_p'")

-----------
QUERY:


-- check that default_tablespace affects index additions in ALTER TABLE
CREATE TABLE testschema.test_tab(id int) TABLESPACE regress_tblspace;
RESULT:
	mySQL: ERROR - (3510, "Tablespace regress_tblspace doesn't exist.")

-----------
QUERY:

INSERT INTO testschema.test_tab VALUES (1);
RESULT:
	mySQL: ERROR - (1146, "Table 'testschema.test_tab' doesn't exist")

-----------
QUERY:

SET default_tablespace TO regress_tblspace;
RESULT:
	mySQL: ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'TO regress_tblspace' at line 1")

-----------
QUERY:

ALTER TABLE testschema.test_tab ADD CONSTRAINT test_tab_unique UNIQUE (id);
RESULT:
	mySQL: ERROR - (1146, "Table 'testschema.test_tab' doesn't exist")

-----------
QUERY:

SET default_tablespace TO '';
RESULT:
	mySQL: ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'TO ''' at line 1")

-----------
QUERY:

ALTER TABLE testschema.test_tab ADD CONSTRAINT test_tab_pkey PRIMARY KEY (id);
RESULT:
	mySQL: ERROR - (1146, "Table 'testschema.test_tab' doesn't exist")

-----------
QUERY:

-- \d testschema.test_tab_unique
-- \d testschema.test_tab_pkey
SELECT * FROM testschema.test_tab;
RESULT:
	mySQL: ERROR - (1146, "Table 'testschema.test_tab' doesn't exist")

-----------
QUERY:

DROP TABLE testschema.test_tab;
RESULT:
	mySQL: ERROR - (1051, "Unknown table 'testschema.test_tab'")

-----------
QUERY:


-- check that default_tablespace is handled correctly by multi-command
-- ALTER TABLE that includes a tablespace-preserving rewrite
CREATE TABLE testschema.test_tab(a int, b int, c int);
RESULT:
	mySQL: []

-----------
QUERY:

SET default_tablespace TO regress_tblspace;
RESULT:
	mySQL: ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'TO regress_tblspace' at line 1")

-----------
QUERY:

ALTER TABLE testschema.test_tab ADD CONSTRAINT test_tab_unique UNIQUE (a);
RESULT:
	mySQL: []

-----------
QUERY:

CREATE INDEX test_tab_a_idx ON testschema.test_tab (a);
RESULT:
	mySQL: []

-----------
QUERY:

SET default_tablespace TO '';
RESULT:
	mySQL: ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'TO ''' at line 1")

-----------
QUERY:

CREATE INDEX test_tab_b_idx ON testschema.test_tab (b);
RESULT:
	mySQL: []

-----------
QUERY:

-- \d testschema.test_tab_unique
-- \d testschema.test_tab_a_idx
-- \d testschema.test_tab_b_idx
ALTER TABLE testschema.test_tab ALTER b TYPE bigint, ADD UNIQUE (c);
RESULT:
	mySQL: ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'TYPE bigint, ADD UNIQUE (c)' at line 4")

-----------
QUERY:

-- \d testschema.test_tab_unique
-- \d testschema.test_tab_a_idx
-- \d testschema.test_tab_b_idx
DROP TABLE testschema.test_tab;
RESULT:
	mySQL: []

-----------
QUERY:


-- let/* REPLACED */''s try moving a table from one place to another
CREATE TABLE testschema.atable AS VALUES (1), (2);
RESULT:
	mySQL: ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(1), (2)' at line 2")

-----------
QUERY:

CREATE UNIQUE INDEX anindex ON testschema.atable(column1);
RESULT:
	mySQL: ERROR - (1146, "Table 'testschema.atable' doesn't exist")

-----------
QUERY:


ALTER TABLE testschema.atable SET TABLESPACE regress_tblspace;
RESULT:
	mySQL: ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'SET TABLESPACE regress_tblspace' at line 1")

-----------
QUERY:

ALTER INDEX testschema.anindex SET TABLESPACE regress_tblspace;
RESULT:
	mySQL: ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'INDEX testschema.anindex SET TABLESPACE regress_tblspace' at line 1")

-----------
QUERY:

ALTER INDEX testschema.part_a_idx SET TABLESPACE pg_global;
RESULT:
	mySQL: ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'INDEX testschema.part_a_idx SET TABLESPACE pg_global' at line 1")

-----------
QUERY:

ALTER INDEX testschema.part_a_idx SET TABLESPACE pg_default;
RESULT:
	mySQL: ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'INDEX testschema.part_a_idx SET TABLESPACE pg_default' at line 1")

-----------
QUERY:

ALTER INDEX testschema.part_a_idx SET TABLESPACE regress_tblspace;
RESULT:
	mySQL: ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'INDEX testschema.part_a_idx SET TABLESPACE regress_tblspace' at line 1")

-----------
QUERY:


INSERT INTO testschema.atable VALUES(3);
RESULT:
	mySQL: ERROR - (1146, "Table 'testschema.atable' doesn't exist")

-----------
QUERY:
	-- ok
INSERT INTO testschema.atable VALUES(1);
RESULT:
	mySQL: ERROR - (1146, "Table 'testschema.atable' doesn't exist")

-----------
QUERY:
	-- fail (checks index)
SELECT COUNT(*) FROM testschema.atable;
RESULT:
	mySQL: ERROR - (1146, "Table 'testschema.atable' doesn't exist")

-----------
QUERY:
		-- checks heap

-- let/* REPLACED */''s try moving a materialized view from one place to another
CREATE MATERIALIZED VIEW testschema.amv AS SELECT * FROM testschema.atable;
RESULT:
	mySQL: ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'MATERIALIZED VIEW testschema.amv AS SELECT * FROM testschema.atable' at line 4")

-----------
QUERY:

ALTER MATERIALIZED VIEW testschema.amv SET TABLESPACE regress_tblspace;
RESULT:
	mySQL: ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'MATERIALIZED VIEW testschema.amv SET TABLESPACE regress_tblspace' at line 1")

-----------
QUERY:

REFRESH MATERIALIZED VIEW testschema.amv;
RESULT:
	mySQL: ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'REFRESH MATERIALIZED VIEW testschema.amv' at line 1")

-----------
QUERY:

SELECT COUNT(*) FROM testschema.amv;
RESULT:
	mySQL: ERROR - (1146, "Table 'testschema.amv' doesn't exist")

-----------
QUERY:


-- Will fail with bad path
CREATE TABLESPACE regress_badspace LOCATION '/no/such/location';
RESULT:
	mySQL: ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'LOCATION '/no/such/location'' at line 2")

-----------
QUERY:


-- No such tablespace
CREATE TABLE bar (i int) TABLESPACE regress_nosuchspace;
RESULT:
	mySQL: ERROR - (3510, "Tablespace regress_nosuchspace doesn't exist.")

-----------
QUERY:


-- Fail, in use for some partitioned object
DROP TABLESPACE regress_tblspace;
RESULT:
	mySQL: ERROR - (3510, "Tablespace regress_tblspace doesn't exist.")

-----------
QUERY:

ALTER INDEX testschema.part_a_idx SET TABLESPACE pg_default;
RESULT:
	mySQL: ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'INDEX testschema.part_a_idx SET TABLESPACE pg_default' at line 1")

-----------
QUERY:

-- Fail, not empty
DROP TABLESPACE regress_tblspace;
RESULT:
	mySQL: ERROR - (3510, "Tablespace regress_tblspace doesn't exist.")

-----------
QUERY:


CREATE ROLE regress_tablespace_user1 login;
RESULT:
	mySQL: ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'login' at line 1")

-----------
QUERY:

CREATE ROLE regress_tablespace_user2 login;
RESULT:
	mySQL: ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'login' at line 1")

-----------
QUERY:

GRANT USAGE ON SCHEMA testschema TO regress_tablespace_user2;
RESULT:
	mySQL: ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'SCHEMA testschema TO regress_tablespace_user2' at line 1")

-----------
QUERY:


ALTER TABLESPACE regress_tblspace OWNER TO regress_tablespace_user1;
RESULT:
	mySQL: ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'OWNER TO regress_tablespace_user1' at line 1")

-----------
QUERY:


CREATE TABLE testschema.tablespace_acl (c int);
RESULT:
	mySQL: []

-----------
QUERY:

-- new owner lacks permission to create this index from scratch
CREATE INDEX k ON testschema.tablespace_acl (c) TABLESPACE regress_tblspace;
RESULT:
	mySQL: ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'TABLESPACE regress_tblspace' at line 2")

-----------
QUERY:

ALTER TABLE testschema.tablespace_acl OWNER TO regress_tablespace_user2;
RESULT:
	mySQL: ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'OWNER TO regress_tablespace_user2' at line 1")

-----------
QUERY:


SET SESSION ROLE regress_tablespace_user2;
RESULT:
	mySQL: ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'regress_tablespace_user2' at line 1")

-----------
QUERY:

CREATE TABLE tablespace_table (i int) TABLESPACE regress_tblspace;
RESULT:
	mySQL: ERROR - (3510, "Tablespace regress_tblspace doesn't exist.")

-----------
QUERY:
 -- fail
ALTER TABLE testschema.tablespace_acl ALTER c TYPE bigint;
RESULT:
	mySQL: ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'TYPE bigint' at line 2")

-----------
QUERY:

REINDEX (TABLESPACE regress_tblspace) TABLE tablespace_table;
RESULT:
	mySQL: ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'REINDEX (TABLESPACE regress_tblspace) TABLE tablespace_table' at line 1")

-----------
QUERY:
 -- fail
REINDEX (TABLESPACE regress_tblspace, CONCURRENTLY) TABLE tablespace_table;
RESULT:
	mySQL: ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'REINDEX (TABLESPACE regress_tblspace, CONCURRENTLY) TABLE tablespace_table' at line 2")

-----------
QUERY:
 -- fail
RESET ROLE;
RESULT:
	mySQL: ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'ROLE' at line 2")

-----------
QUERY:


ALTER TABLESPACE regress_tblspace RENAME TO regress_tblspace_renamed;
RESULT:
	mySQL: ERROR - (3510, "Tablespace regress_tblspace doesn't exist.")

-----------
QUERY:


ALTER TABLE ALL IN TABLESPACE regress_tblspace_renamed SET TABLESPACE pg_default;
RESULT:
	mySQL: ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'ALL IN TABLESPACE regress_tblspace_renamed SET TABLESPACE pg_default' at line 1")

-----------
QUERY:

ALTER INDEX ALL IN TABLESPACE regress_tblspace_renamed SET TABLESPACE pg_default;
RESULT:
	mySQL: ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'INDEX ALL IN TABLESPACE regress_tblspace_renamed SET TABLESPACE pg_default' at line 1")

-----------
QUERY:

ALTER MATERIALIZED VIEW ALL IN TABLESPACE regress_tblspace_renamed SET TABLESPACE pg_default;
RESULT:
	mySQL: ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'MATERIALIZED VIEW ALL IN TABLESPACE regress_tblspace_renamed SET TABLESPACE pg_d' at line 1")

-----------
QUERY:


-- Should show notice that nothing was done
ALTER TABLE ALL IN TABLESPACE regress_tblspace_renamed SET TABLESPACE pg_default;
RESULT:
	mySQL: ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'ALL IN TABLESPACE regress_tblspace_renamed SET TABLESPACE pg_default' at line 2")

-----------
QUERY:

ALTER MATERIALIZED VIEW ALL IN TABLESPACE regress_tblspace_renamed SET TABLESPACE pg_default;
RESULT:
	mySQL: ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'MATERIALIZED VIEW ALL IN TABLESPACE regress_tblspace_renamed SET TABLESPACE pg_d' at line 1")

-----------
QUERY:


-- Should succeed
DROP TABLESPACE regress_tblspace_renamed;
RESULT:
	mySQL: ERROR - (3510, "Tablespace regress_tblspace_renamed doesn't exist.")

-----------
QUERY:


DROP SCHEMA testschema CASCADE;
RESULT:
	mySQL: ERROR - (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'CASCADE' at line 1")

-----------
QUERY:


DROP ROLE regress_tablespace_user1;
RESULT:
	mySQL: ERROR - (1396, "Operation DROP ROLE failed for 'regress_tablespace_user1'@'%'")

-----------
QUERY:

DROP ROLE regress_tablespace_user2;
RESULT:
	mySQL: ERROR - (1396, "Operation DROP ROLE failed for 'regress_tablespace_user2'@'%'")
